import{f as oe,bb as f,r as u,$ as ne,a5 as le,g as H,H as z,cg as se,o as s,P as g,w,O as t,c as b,S as k,b as B,a as L,t as R,T as $,W as C,cb as i,bv as p,aK as P,au as ae,ey as re,d as ie,Q as ue,R as pe,a0 as U,a1 as F}from"./entry.5958c07b.js";import{_ as de}from"./Button.vue.c3ca0e8f.js";import{_ as me}from"./Tooltip.vue.971897f4.js";import{_ as ve}from"./CellIcon.b1340151.js";import{_ as ce}from"./Dropdown.vue.0d2ed10f.js";import{C as fe,E as _e,r as xe,z as ye,c as ge,l as be,i as we}from"./index.9b87fcff.js";import{_ as ke}from"./TextArea.9074ff05.js";import{_ as Ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.55641318.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./isSymbol.114fe557.js";import"./cell.165313cd.js";import"./bases.e6c8e3c4.js";import"./index.0feaca99.js";import"./index.dc13a4d6.js";import"./Dropdown.041b2468.js";import"./RightOutlined.7161c742.js";import"./Input.dca3a2bc.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.ddc65fa5.js";const Ee=U(()=>F(()=>import("./RichText.2eb9daf6.js"),["./RichText.2eb9daf6.js","./Button.vue.c3ca0e8f.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./tippy.esm.c1a353f4.js","./urlUtils.18c797fa.js","./index.ae235b22.js","./Input.dca3a2bc.js","./antInputDirective.8ac36ea7.js","./FormItemContext.ddc65fa5.js","./SearchOutlined.a517903c.js","./isPlainObject.ccda79fe.js","./_getPrototype.c1f3bae2.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./index.9b87fcff.js","./RichText.62a4b259.css"],import.meta.url).then(v=>v.default||v)),Te=U(()=>F(()=>import("./ClampedText.38ef3359.js"),["./ClampedText.38ef3359.js","./entry.5958c07b.js","./entry.bdecbb78.css"],import.meta.url).then(v=>v.default||v)),Re=["placeholder"],$e={key:2,class:"nc-null uppercase"},Ie={key:4},Me={class:"flex max-w-38"},he={class:"truncate"},Ve=oe({__name:"TextArea",props:{modelValue:{},isFocus:{type:Boolean},virtual:{type:Boolean}},emits:["update:modelValue"],setup(v,{emit:K}){const j=v,W=K,a=f(fe),_=f(_e,u(!1)),I=f(xe,u(!1)),c=f(ye,u(1)),E=f(ge,u(!1)),{showNull:q}=ne(),n=le(j,"modelValue",W),x=f(be,u(!1)),d=u({top:200,left:600}),y=u(!1),G=o=>!x.value&&!I.value&&E.value&&(o==null?void 0:o.focus()),M=H(()=>x.value?36*4:!c.value||c.value===1||I.value?36:c.value*36),l=u(!1),h=u(null),D=u(null),O=f(we);z(l,()=>{l.value&&setTimeout(()=>{var o;(o=D.value)==null||o.focus()},100)}),se(h,o=>{var e;(e=o.target)!=null&&e.className.includes("nc-long-text-toggle-expand")||(l.value=!1)});const J=()=>{j.virtual&&(l.value=!0,_.value=!0)},V=H(()=>{var e,m,T;let o={};return typeof((e=a==null?void 0:a.value)==null?void 0:e.meta)=="string"?o=JSON.parse((m=a==null?void 0:a.value)==null?void 0:m.meta):o=((T=a==null?void 0:a.value)==null?void 0:T.meta)??{},o==null?void 0:o.richMode}),N=()=>{var m;l.value=!0;const{top:o,left:e}=((m=h.value)==null?void 0:m.getBoundingClientRect())??{top:0,left:0};d.value={top:o+42,left:e}},S=o=>{y.value&&(o.stopPropagation(),d.value={top:o.clientY-30,left:o.clientX-120})},A=o=>{y.value&&(o.stopPropagation(),y.value=!1,d.value=void 0,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",A))};z(d,()=>{const o=document.querySelector(".nc-textarea-dropdown-active");o&&d.value&&setTimeout(()=>{d.value&&(o.style.left=`${d.value.left}px`,o.style.top=`${d.value.top}px`)},1)});const Q=()=>{document.addEventListener("mousemove",S),document.addEventListener("mouseup",A),y.value=!0};return z(_,()=>{_.value&&(l.value=!0)}),(o,e)=>{const m=Ee,T=Te,X=de,Y=me,Z=ve,ee=ke,te=ce;return s(),g(te,{visible:t(l),"onUpdate:visible":e[16]||(e[16]=r=>C(l)?l.value=r:null),class:"overflow-hidden group",trigger:[],placement:"bottomLeft","overlay-class-name":t(l)?"nc-textarea-dropdown-active":void 0},{overlay:w(()=>[t(l)?(s(),b("div",{key:0,ref_key:"inputWrapperRef",ref:h,class:k(["flex flex-col min-w-200 min-h-70 py-3 expanded-cell-input relative",{"cursor-move":t(y)}])},[t(a)?(s(),b("div",{key:0,class:k(["flex flex-row gap-x-1 items-center font-medium pl-3 pb-2.5 border-b-1 border-gray-100 cursor-move",{"select-none":t(y)}]),onMousedown:Q},[B(Z,{class:"flex"}),L("div",Me,[L("span",he,R(t(a).title),1)])],34)):$("",!0),t(V)?t(l)?(s(),g(m,{key:2,value:t(n),"onUpdate:value":e[15]||(e[15]=r=>C(n)?n.value=r:null),"show-menu":"","full-mode":"","read-only":t(O)},null,8,["value","read-only"])):$("",!0):(s(),g(ee,{key:1,ref_key:"inputRef",ref:D,value:t(n),"onUpdate:value":e[12]||(e[12]=r=>C(n)?n.value=r:null),class:"p-1 !pt-1 !pr-3 !border-0 !border-r-0 !focus:outline-transparent nc-scrollbar-md !text-black !cursor-text",placeholder:o.$t("activity.enterText"),bordered:!1,"auto-size":{minRows:20,maxRows:20},disabled:t(O),onKeydown:[e[13]||(e[13]=i(()=>{},["stop"])),e[14]||(e[14]=p(r=>l.value=!1,["escape"]))]},null,8,["value","placeholder","disabled"]))],2)):$("",!0)]),default:w(()=>[L("div",{class:k(["flex flex-row pt-0.5 w-full long-text-wrapper",{"min-h-10":t(c)!==1||t(x),"min-h-9":t(c)===1&&!t(x),"h-full":t(E)}])},[t(V)?(s(),b("div",{key:0,class:"w-full cursor-pointer",style:P({maxHeight:`${t(M)}px !important`,minHeight:`${t(M)}px !important`}),onDblclick:N,onKeydown:p(N,["enter"])},[B(m,{value:t(n),"onUpdate:value":e[0]||(e[0]=r=>C(n)?n.value=r:null),"sync-value-change":"",readonly:""},null,8,["value"])],36)):t(_)&&!t(l)?ae((s(),b("textarea",{key:1,ref:G,"onUpdate:modelValue":e[1]||(e[1]=r=>C(n)?n.value=r:null),rows:"4",class:k(["h-full w-full outline-none border-none nc-scrollbar-lg",{"p-2":t(_),"py-1 h-full":t(E),"px-2":t(x)}]),style:P({minHeight:`${t(M)}px`}),placeholder:t(I)?o.$t("labels.optional"):"",onBlur:e[2]||(e[2]=r=>_.value=!1),onKeydown:[e[3]||(e[3]=p(i(()=>{},["alt","stop"]),["enter"])),e[4]||(e[4]=p(i(()=>{},["shift","stop"]),["enter"])),e[5]||(e[5]=p(i(()=>{},["stop"]),["down"])),e[6]||(e[6]=p(i(()=>{},["stop"]),["left"])),e[7]||(e[7]=p(i(()=>{},["stop"]),["right"])),e[8]||(e[8]=p(i(()=>{},["stop"]),["up"])),e[9]||(e[9]=p(i(()=>{},["stop"]),["delete"]))],onSelectstartCapture:e[10]||(e[10]=i(()=>{},["stop"])),onMousedown:e[11]||(e[11]=i(()=>{},["stop"]))},null,46,Re)),[[re,t(n)]]):t(n)===null&&t(q)?(s(),b("span",$e,R(o.$t("general.null")),1)):t(c)?(s(),g(T,{key:3,value:t(n),lines:t(c),class:"mr-7 nc-text-area-clamped-text",style:{"word-break":"break-word","white-space":"pre-line"},onClick:J},null,8,["value","lines"])):(s(),b("span",Ie,R(t(n)),1)),t(l)?$("",!0):(s(),g(Y,{key:5,placement:"bottom",class:k(["!absolute right-0 hidden nc-text-area-expand-btn group-hover:block",t(x)||t(E)||t(V)?"top-1":"bottom-1"])},{title:w(()=>[ie(R(o.$t("title.expand")),1)]),default:w(()=>[B(X,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",onClick:i(N,["stop"])},{default:w(()=>[(s(),g(ue(t(pe).expand),{class:"transform !group-hover:text-grey-800 scale-120 text-gray-700 text-xs"}))]),_:1})]),_:1},8,["class"]))],2)]),_:1},8,["visible","overlay-class-name"])}}});const Ze=Ce(Ve,[["__scopeId","data-v-0203e711"]]);export{Ze as default};
