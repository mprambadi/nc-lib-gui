import{f as lt,ba as we,r as _,cG as g,$ as dt,aM as ut,N as ct,bb as N,bA as mt,g as pt,M as ft,gy as _t,H as xe,cg as vt,i as gt,eN as ht,c9 as bt,O as t,o as i,c as w,a as r,d as E,t as m,P as h,w as l,b as d,T as y,dy as yt,S as ee,eW as te,W as Ce,cb as O,Q as $e,R as qe,bv as kt,au as P,U as wt,a0 as H,a1 as W,fk as Se,X as j,eZ as Fe,eX as fe,a8 as xt,p as Ct,e as $t,C as qt,Y as St}from"./entry.5958c07b.js";import{_ as Ft}from"./Button.vue.c3ca0e8f.js";import{a as It,_ as Rt}from"./EditOrAddProvider.vue.31035ffc.js";import{c as At,y as Tt,f as Et,M as Mt,A as Ot,b as Dt,R as Ut}from"./index.9b87fcff.js";import{u as Lt}from"./useSmartsheetRowStore.5b92cc1b.js";import{u as Vt}from"./useViewColumns.f203dc14.js";import{u as zt}from"./useViewData.1858eb56.js";import{D as Ie}from"./vuedraggable.umd.00f5fccc.js";import{C as Bt}from"./index.f98c1d80.js";import{D as Nt}from"./index.dc13a4d6.js";import"./index.ae235b22.js";import{I as Pt}from"./Input.dca3a2bc.js";import{F as jt}from"./index.b06c8b67.js";import{_ as Ht}from"./index.1862798a.js";import{a as Wt,_ as Gt}from"./index.357e1bba.js";import{_ as Kt}from"./TextArea.9074ff05.js";import{_ as Jt}from"./FormItem.0bbf90a3.js";import{_ as Qt}from"./index.b076ba21.js";import{_ as Xt}from"./index.07078df6.js";import{_ as Yt}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.55641318.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./isSymbol.114fe557.js";import"./Icon.vue.129448d5.js";import"./views.4281cbf1.js";import"./bases.e6c8e3c4.js";import"./index.0feaca99.js";import"./useSharedView.e8f68616.js";import"./validation.2de04583.js";import"./v3-infinite-loading.660bd977.js";import"./cell.165313cd.js";import"./index.5e1434a7.js";import"./Checkbox.2e7b0035.js";import"./FormItemContext.ddc65fa5.js";import"./createForOfIteratorHelper.33de41ba.js";import"./index.5c6e4286.js";import"./toArray.fd74ce6f.js";import"./antInputDirective.8ac36ea7.js";import"./isMobile.e2e89480.js";import"./useMemo.1dd071d8.js";import"./useState.b891c8bb.js";import"./CheckOutlined.1fe5f230.js";import"./SearchOutlined.a517903c.js";import"./deepCompare.d32ec333.js";import"./dataUtils.3f874ca1.js";import"./virtualCell.427fa223.js";import"./index.e61e381a.js";import"./useSmartsheetStore.f1a70558.js";import"./index.912f77e8.js";import"./Dropdown.041b2468.js";import"./useRefs.40c81887.js";import"./identity.34c7640e.js";import"./_flatRest.39582a58.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";import"./RightOutlined.7161c742.js";import"./Password.f52125e7.js";import"./useSize.fad35fe8.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";const Zt=H(()=>W(()=>import("./VirtualCell.276a28e0.js"),["./VirtualCell.276a28e0.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.31035ffc.js","./Icon.vue.129448d5.js","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./index.9b87fcff.js","./views.4281cbf1.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./useSharedView.e8f68616.js","./validation.2de04583.js","./index.b06c8b67.js","./FormItem.0bbf90a3.js","./identity.34c7640e.js","./_getPrototype.c1f3bae2.js","./Col.a97e3e76.js","./responsiveObserve.0baefba6.js","./toArray.fd74ce6f.js","./FormItemContext.ddc65fa5.js","./useSize.fad35fe8.js","./_flatRest.39582a58.js","./isPlainObject.ccda79fe.js","./vuedraggable.umd.00f5fccc.js","./v3-infinite-loading.660bd977.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./index.ae235b22.js","./Input.dca3a2bc.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.a517903c.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./cell.165313cd.js","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./createForOfIteratorHelper.33de41ba.js","./index.5c6e4286.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./EditOrAddProvider.9247d0ff.css","./virtualCell.427fa223.js","./VirtualCell.ff98befc.css"],import.meta.url).then(v=>v.default||v)),eo=H(()=>W(()=>import("./Cell.0991f33c.js"),["./Cell.0991f33c.js","./entry.5958c07b.js","./entry.bdecbb78.css","./CellIcon.b1340151.js","./index.9b87fcff.js","./cell.165313cd.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.31035ffc.js","./Icon.vue.129448d5.js","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./views.4281cbf1.js","./useSharedView.e8f68616.js","./validation.2de04583.js","./index.b06c8b67.js","./FormItem.0bbf90a3.js","./identity.34c7640e.js","./_getPrototype.c1f3bae2.js","./Col.a97e3e76.js","./responsiveObserve.0baefba6.js","./toArray.fd74ce6f.js","./FormItemContext.ddc65fa5.js","./useSize.fad35fe8.js","./_flatRest.39582a58.js","./isPlainObject.ccda79fe.js","./vuedraggable.umd.00f5fccc.js","./v3-infinite-loading.660bd977.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./index.ae235b22.js","./Input.dca3a2bc.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.a517903c.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./createForOfIteratorHelper.33de41ba.js","./index.5c6e4286.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./EditOrAddProvider.9247d0ff.css","./Cell.14116970.css"],import.meta.url).then(v=>v.default||v)),to=H(()=>W(()=>import("./VirtualCell.3d02a7f6.js"),["./VirtualCell.3d02a7f6.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.9b87fcff.js","./virtualCell.427fa223.js","./cell.165313cd.js"],import.meta.url).then(v=>v.default||v)),oo=H(()=>W(()=>import("./Cell.2a47fcd0.js"),["./Cell.2a47fcd0.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.9b87fcff.js","./cell.165313cd.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./useSmartsheetRowStore.5b92cc1b.js","./deepCompare.d32ec333.js","./dataUtils.3f874ca1.js","./virtualCell.427fa223.js","./index.e61e381a.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.f27da8af.css"],import.meta.url).then(v=>v.default||v)),ao=H(()=>W(()=>import("./DivDataCell.7c09732c.js"),["./DivDataCell.7c09732c.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.9b87fcff.js","./_plugin-vue_export-helper.c27b6911.js","./DivDataCell.1a716a1e.css"],import.meta.url).then(v=>v.default||v)),Re=v=>(Ct("data-v-d790aef1"),v=v(),$t(),v),so={key:0,class:"pl-6 pr-[120px] py-6 bg-white flex-col justify-start items-start gap-2.5 inline-flex"},ro={class:"text-gray-500 text-5xl font-semibold leading-16"},io=Re(()=>r("br",null,null,-1)),no={class:"text-gray-500 text-base font-medium leading-normal"},lo={key:0,class:"items-center justify-center text-center mt-2"},uo={class:"text-center"},co={key:0,class:"text-gray-400 mt-4"},mo={key:1,class:"text-center mt-4"},po={class:"flex flex-wrap gap-2"},fo={class:"flex-1 text-lg"},_o={class:"flex flex-wrap gap-2 mb-4"},vo={class:"flex"},go={class:"flex flex-1"},ho={class:"my-4 select-none border-dashed border-2 border-gray-400 py-3 text-gray-400 text-center nc-drag-n-drop-to-hide","data-testid":"nc-drag-n-drop-to-hide"},bo={class:"flex items-center flex-wrap justify-center gap-2 prose-sm text-gray-400"},yo={class:"color-transition group-hover:text-primary break-words"},ko=Re(()=>r("div",{class:"h-[200px] bg-primary bg-opacity-75"},null,-1)),wo={key:0,class:"px-4 lg:px-12"},xo={key:1,class:"px-4 ml-3 w-full text-bold text-4xl"},Co={key:2,class:"px-4 lg:px-12"},$o={key:3,class:"px-4 ml-3 w-full text-bold text-md"},qo=["onClick"],So={key:0,class:"absolute flex top-2 right-2"},Fo={key:1,class:"flex flex-col gap-3 mb-3"},Io={class:"flex gap-2 items-center"},Ro=["onClick"],Ao={class:"flex gap-2 items-center"},To=["onClick"],Eo={class:"nc-form-help-text text-gray-500 text-xs truncate","data-testid":"nc-form-input-help-text-label"},Mo={key:0,class:"mt-4 border-dashed border-2 border-gray-400 py-3 text-gray-400 text-center"},Oo={class:"justify-center flex mt-6"},Do={key:1,class:"px-4 flex flex-col gap-2"},Uo={class:"text-lg text-gray-700"},Lo={class:"text-gray-500 text-bold"},Vo={class:"flex flex-col gap-2 mt-4"},zo={class:"flex items-center"},Bo={class:"ml-4"},No={class:"flex items-center"},Po={class:"ml-4"},jo={class:"mb-12 flex items-center"},Ho={class:"ml-4"},Wo={class:"text-bold text-gray-600"},Go=lt({__name:"Form",setup(v){we(At,_(!0)),we(Tt,_(!1));const Ae=["created_at","updated_at"],_e=[g.Rollup,g.Lookup,g.Formula,g.QrCode,g.Barcode,g.SpecificDBType,g.CreatedTime,g.LastModifiedTime,g.CreatedBy,g.LastModifiedBy],{isMobileMode:Te,user:oe}=dt(),ve=_(),{$api:ge,$e:G}=qt(),{isUIAllowed:ae}=ut(),S=ct({}),se=_(0),k=N(Et,_(!1)),F=ae("viewFieldEdit"),D=N(Mt,_()),he=N(Ot,_()),Ee=N(Dt,_(!1)),{loadFormView:re,insertRow:Me,formColumnData:ie,formViewData:n,updateFormView:Oe}=zt(D,he),ne=N(Ut,mt());ne.on(async()=>{await re(),ce()});const{showAll:De,hideAll:Ue,saveOrUpdate:K}=Vt(),{state:Le,row:Ve}=Lt(D,_({row:S,oldRow:{},rowMeta:{new:!0}})),le=pt(()=>{var e;return((e=D==null?void 0:D.value)==null?void 0:e.columns)||[]}),u=_([]),J=_([]),be=_(),Q=_([]),I=_(!1),de=_(!1),X=_(!1),R=_(!1),U=_(!1),Y=_(""),L=_([]),{t:ue}=ft(),{betaFeatureToggleState:ze}=It(),C=Se(()=>{var e,a;if((((a=(e=n.value)==null?void 0:e.subheading)==null?void 0:a.length)||0)>255)return j.error(ue("msg.error.formDescriptionTooLong"));Oe(n.value)},300,{maxWait:2e3});async function Be(){var e;try{await((e=ve.value)==null?void 0:e.validateFields())}catch(a){if(a.errorFields.map(s=>j.error(s.errors.join(","))),a.errorFields.length)return}await Me({row:{...S,...Le.value},oldRow:{},rowMeta:{new:!0}}),U.value=!0}function Ne(e){if(Ae.includes(e.fk_column_id))return!1;let a=!te(e)&&e.rqd&&!e.cdf&&!le.value.some(s=>{var b;return Fe(s.uidt)&&((b=s==null?void 0:s.colOptions)==null?void 0:b.type)===fe.BELONGS_TO&&e.fk_column_id===s.colOptions.fk_child_column_id})||e.pk&&!e.ai&&!e.cdf;if(e.uidt===g.LinkToAnotherRecord&&e.colOptions.type===fe.BELONGS_TO){const s=le.value.find(b=>b.id===e.colOptions.fk_child_column_id);s.rqd&&!s.default&&(a=!0)}return a}function Pe(e){if(e.from!==e.to&&V(e.draggedContext.element))return!1}function je(e){var x,$,p;const{newIndex:a,element:s,oldIndex:b}=e.added||e.moved||e.removed;if(e.added&&(s.show=!0),e.removed){if(V(s))return;s.show=!1,K(s,b)}else!u.value.length||u.value.length===1?s.order=1:u.value.length-1===a?s.order=(((x=u.value[a-1])==null?void 0:x.order)||0)+1:a===0?s.order=((($=u.value[1])==null?void 0:$.order)||0)/2:s.order=((((p=u.value[a-1])==null?void 0:p.order)||0)+(u.value[a+1].order||0))/2,K(s,a);G("a:form-view:reorder")}function He(e){if(V(u.value[e])){j.info(ue("msg.info.requriedFieldsCantBeMoved"));return}K({...u.value[e],show:!1},e),ne.trigger(),G("a:form-view:hide-columns")}async function We(){for(const e of u==null?void 0:u.value)Q.value.includes(e.fk_column_id)||(e.show=!0);await De(Q.value),G("a:form-view:add-all")}function V(e){return Ne(e)||!!e.required||!!e.rqd&&!e.cdf||e.uidt===g.QrCode||e.uidt===g.Barcode}async function Ge(){for(const e of u==null?void 0:u.value)V(e)||(e.show=!1);await Ue(u==null?void 0:u.value.filter(e=>V(e)).map(e=>e.fk_column_id)),G("a:form-view:remove-all")}async function Ke(){return R.value&&!await ge.plugin.status("SMTP")?(R.value=!1,j.info(ue("msg.toast.formEmailSMTP")),!1):!0}function ce(){var s,b,x,$;const e=(ie==null?void 0:ie.value)||[];n.value={...n.value,submit_another_form:!!(((s=n.value)==null?void 0:s.submit_another_form)??0),show_blank_form:!!(((b=n.value)==null?void 0:b.show_blank_form)??0)};let a={};try{a=JSON.parse(((x=n.value)==null?void 0:x.email)||"")||{}}catch{}R.value=a[($=oe.value)==null?void 0:$.email],u.value=e.filter(p=>p.show&&!_e.includes(p.uidt)).sort((p,Z)=>p.order-Z.order).map(p=>({...p,required:!!p.required})),L.value=new Array(u.value.length).fill(!1),Q.value=_t(e).map(p=>p.fk_column_id),J.value=e.filter(p=>!p.show&&!Q.value.includes(p.fk_column_id)&&!_e.includes(p.uidt))}function A(e,a=!1){let s=e;return Fe(s.uidt)&&s.colOptions&&s.colOptions.type===fe.BELONGS_TO&&(s=le.value.find(b=>b.id===s.colOptions.fk_child_column_id)),a||s&&s.rqd&&!s.cdf}async function Je(){var e,a,s;try{if(!await Ke())return;const b=(e=n.value)!=null&&e.email?JSON.parse((a=n.value)==null?void 0:a.email):{};b[(s=oe.value)==null?void 0:s.email]=R.value,n.value.email=JSON.stringify(b)}catch{}}function Qe(){Je(),C()}async function Xe(){await re(),ce(),I.value=!1}const M=Se(async e=>{if(e.id)try{await ge.dbView.formColumnUpdate(e.id,e)}catch(a){j.error(await St(a))}},250);xe(U,e=>{var a;if(e&&((a=n.value)!=null&&a.show_blank_form)){se.value=5;const s=setInterval(()=>{--se.value<0&&(U.value=!1,clearInterval(s))},1e3)}});function Ye(e,a){if(!k.value&&!de.value){const s=u.value.length;e.order=(s?u.value[s-1].order:0)+1,e.show=!0,u.value.push(e),J.value.splice(a,1),K(e,s)}}const Ze=e=>ze.show&&[g.SingleLineText,g.Number,g.Email,g.URL,g.LongText].includes(e);vt(be,()=>{Y.value=""}),gt(async()=>{await re(),ce()}),xe(he,e=>{(e==null?void 0:e.type)===ht.FORM&&ne.trigger()});const et=e=>{k.value||(Y.value=e.title)};return(e,a)=>{const s=Ht,b=xt,x=Wt,$=Gt,p=Ft,Z=Zt,ye=eo,me=Bt,tt=Rt,ot=Nt,pe=Kt,T=Jt,z=Qt,ke=Pt,at=to,st=oo,rt=ao,it=jt,nt=Xt,B=bt("e");return t(Te)?(i(),w("div",so,[r("div",ro,[E(m(e.$t("general.available")),1),io,E(m(e.$t("title.inDesktop")),1)]),r("div",no,m(e.$t("msg.formViewNotSupportedOnMobile")),1)])):(i(),w(wt,{key:1},[t(U)?(i(),h($,{key:0,class:"h-full","data-testid":"nc-form-wrapper-submit"},{default:l(()=>[d(x,{span:24},{default:l(()=>[t(n)?(i(),w("div",lo,[d(s,{type:"success"},{message:l(()=>[r("div",uo,m(t(n).success_msg||e.$t("msg.successfullySubmittedFormData")),1)]),_:1}),t(n).show_blank_form?(i(),w("div",co,m(e.$t("msg.newFormWillBeLoaded",{seconds:t(se)})),1)):y("",!0),t(n).submit_another_form||!t(Ee)?(i(),w("div",mo,[d(b,{type:"primary",size:"large",onClick:a[0]||(a[0]=c=>U.value=!1)},{default:l(()=>[E(m(e.$t("activity.submitAnotherForm")),1)]),_:1})])):y("",!0)])):y("",!0)]),_:1})]),_:1})):(i(),h($,{key:1,class:"h-full flex","data-testid":"nc-form-wrapper"},{default:l(()=>[t(F)?(i(),h(x,{key:0,span:8,class:"shadow p-2 md:p-4 h-full overflow-auto scrollbar-thin-dull nc-form-left-drawer"},{default:l(()=>[r("div",po,[r("div",fo,m(e.$t("objects.fields")),1),r("div",_o,[t(J).length?(i(),h(p,{key:0,type:"secondary",class:"nc-form-add-all","data-testid":"nc-form-add-all",disabled:t(k),onClick:We},{default:l(()=>[E(m(e.$t("general.addAll")),1)]),_:1},8,["disabled"])):y("",!0),t(u).length?(i(),h(p,{key:1,type:"secondary",class:"nc-form-remove-all","data-testid":"nc-form-remove-all",disabled:t(k),onClick:Ge},{default:l(()=>[E(m(e.$t("general.removeAll")),1)]),_:1},8,["disabled"])):y("",!0)])]),d(t(Ie),{list:t(J),"item-key":"id",draggable:".item",group:"form-inputs",disabled:t(k),class:"flex flex-col gap-2",onStart:a[8]||(a[8]=c=>X.value=!0),onEnd:a[9]||(a[9]=c=>X.value=!1)},yt({item:l(({element:c,index:o})=>[d(me,{size:"small",class:ee(["!border-0 color-transition cursor-pointer item hover:bg-primary hover:ring-1 hover:ring-accent hover:ring-opacity-100 bg-opacity-10 !rounded !shadow-lg",{"!bg-gray-50 !hover:bg-gray-50 !hover:ring-transparent !cursor-not-allowed":t(k)}]),"data-testid":`nc-form-hidden-column-${c.label||c.title}`,onMousedown:a[1]||(a[1]=q=>de.value=!1),onMousemove:a[2]||(a[2]=q=>de.value=!1),onMouseup:q=>Ye(c,o)},{default:l(()=>[r("div",vo,[r("div",go,[t(te)(c)?(i(),h(Z,{key:0,column:{...c,title:c.label||c.title},required:A(c,c.required),"hide-menu":!0},null,8,["column","required"])):(i(),h(ye,{key:1,column:{...c,title:c.label||c.title},required:A(c,c.required),"hide-menu":!0},null,8,["column","required"]))])])]),_:2},1032,["class","data-testid","onMouseup"])]),_:2},[t(k)?void 0:{name:"footer",fn:l(()=>[r("div",ho,m(e.$t("msg.info.dragDropHide")),1),d(ot,{visible:t(I),"onUpdate:visible":a[7]||(a[7]=c=>Ce(I)?I.value=c:null),trigger:["click"],"overlay-class-name":"nc-dropdown-form-add-column"},{overlay:l(()=>[t(I)?(i(),h(tt,{key:0,onSubmit:Xe,onCancel:a[4]||(a[4]=c=>I.value=!1),onClick:a[5]||(a[5]=O(()=>{},["stop"])),onKeydown:a[6]||(a[6]=O(()=>{},["stop"]))})):y("",!0)]),default:l(()=>[r("button",{type:"button",class:"group w-full mt-2",onClick:a[3]||(a[3]=O(c=>I.value=!0,["stop"]))},[r("span",bo,[(i(),h($e(t(qe).plus),{class:"color-transition transform group-hover:text-accent group-hover:scale-125"})),r("span",yo,m(e.$t("activity.addField")),1)])])]),_:1},8,["visible"])]),key:"0"}]),1032,["list","disabled"])]),_:1})):y("",!0),t(n)?(i(),h(x,{key:1,span:t(F)?16:24,class:"h-full overflow-auto scrollbar-thin-dull"},{default:l(()=>[ko,d(me,{class:"p-4 border-none","body-style":{maxWidth:"max(50vw, 700px)",margin:"0 auto",marginTop:"-200px",padding:"0px"}},{default:l(()=>{var c;return[d(it,{ref_key:"formRef",ref:ve,model:t(S),class:"nc-form","no-style":""},{default:l(()=>[d(me,{class:"!rounded !shadow !m-2 !md:m-4 !xl:m-8","body-style":{paddingLeft:"0px",paddingRight:"0px"}},{default:l(()=>[t(F)?(i(),w("div",wo,[t(F)?(i(),h(T,{key:0},{default:l(()=>[d(pe,{value:t(n).heading,"onUpdate:value":a[10]||(a[10]=o=>t(n).heading=o),class:"w-full !font-bold !text-4xl !border-0 !border-b-1 !border-dashed !rounded-none !border-gray-400",style:{borderRightWidth:"0px !important",height:"70px","max-height":"250px",resize:"vertical"},autosize:"",size:"large","hide-details":"",disabled:t(k),placeholder:"Form Title",bordered:!1,"data-testid":"nc-form-heading",onBlur:t(C),onKeydown:kt(t(C),["enter"])},null,8,["value","disabled","onBlur","onKeydown"])]),_:1})):y("",!0)])):(i(),w("div",xo,m(t(n).heading),1)),t(F)?(i(),w("div",Co,[d(T,null,{default:l(()=>[d(pe,{value:t(n).subheading,"onUpdate:value":a[11]||(a[11]=o=>t(n).subheading=o),class:"w-full !border-0 !border-b-1 !border-dashed !rounded-none !border-gray-400",style:{borderRightWidth:"0px !important",height:"40px","min-height":"40px",resize:"vertical"},size:"large",autosize:"","hide-details":"",placeholder:e.$t("msg.info.formDesc"),bordered:!1,disabled:!t(F)||t(k),"data-testid":"nc-form-sub-heading",onBlur:t(C),onClick:t(C)},null,8,["value","placeholder","disabled","onBlur","onClick"])]),_:1})])):(i(),w("div",$o,m(t(n).subheading||"---"),1)),d(t(Ie),{ref_key:"draggableRef",ref:be,list:t(u),"item-key":"fk_column_id",draggable:".item",group:"form-inputs",class:"h-full",move:Pe,disabled:t(k),onChange:a[14]||(a[14]=o=>je(o)),onStart:a[15]||(a[15]=o=>X.value=!0),onEnd:a[16]||(a[16]=o=>X.value=!1)},{item:l(({element:o,index:q})=>[r("div",{class:ee(["color-transition nc-editable item cursor-pointer hover:bg-primary hover:bg-opacity-10 hover:ring-1 hover:ring-accent hover:ring-opacity-100 px-4 lg:px-12 py-4 relative",[`nc-form-drag-${o.title.replaceAll(" ","")}`,{"bg-primary bg-opacity-5 ring-0.5 ring-accent ring-opacity-100":t(Y)===o.title},{"!hover:bg-white !ring-0 !cursor-auto":t(k)}]]),"data-testid":"nc-form-fields",onClick:f=>et(o)},[t(ae)("viewFieldEdit")&&!A(o,o.required)&&!t(k)?(i(),w("div",So,[(i(),h($e(t(qe).eyeSlash),{class:"opacity-0 nc-field-remove-icon","data-testid":"nc-field-remove-icon",onClick:O(f=>He(q),["stop"])},null,8,["onClick"]))])):y("",!0),t(Y)===o.title?(i(),w("div",Fo,[r("div",Io,[r("span",{class:"text-gray-500 mr-2 nc-form-input-required","data-testid":"nc-form-input-required",onClick:()=>{o.required=!o.required,t(M)(o)}},m(e.$t("general.required")),9,Ro),P(d(z,{checked:o.required,"onUpdate:checked":f=>o.required=f,size:"small",onChange:f=>t(M)(o)},null,8,["checked","onUpdate:checked","onChange"]),[[B,["a:form-view:field:mark-required"]]])]),Ze(o.uidt)?(i(),h(T,{key:0,class:"my-0 w-1/2 !mb-1"},{default:l(()=>[r("div",Ao,[r("span",{class:"text-gray-500 mr-2 nc-form-input-required","data-testid":"nc-form-input-enable-scanner",onClick:()=>{o.general.enable_scanner=!o.general.enable_scanner,t(M)(o)}},m(e.$t("general.enableScanner")),9,To),P(d(z,{checked:o.enable_scanner,"onUpdate:checked":f=>o.enable_scanner=f,size:"small",onChange:f=>t(M)(o)},null,8,["checked","onUpdate:checked","onChange"]),[[B,["a:form-view:field:mark-enable-scaner"]]])])]),_:2},1024)):y("",!0),d(T,{class:"my-0 w-1/2 !mb-1"},{default:l(()=>[d(ke,{value:o.label,"onUpdate:value":f=>o.label=f,type:"text",class:"form-meta-input nc-form-input-label","data-testid":"nc-form-input-label",placeholder:e.$t("msg.info.formInput"),onChange:f=>t(M)(o)},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1024),d(T,{class:"mt-2 mb-0 w-1/2"},{default:l(()=>[d(ke,{value:o.description,"onUpdate:value":f=>o.description=f,type:"text",class:"form-meta-input text-sm nc-form-input-help-text","data-testid":"nc-form-input-help-text",placeholder:e.$t("msg.info.formHelpText"),onChange:f=>t(M)(o)},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1024)])):y("",!0),r("div",null,[t(te)(o)?(i(),h(Z,{key:0,column:{...o,title:o.label||o.title},required:A(o,o.required),"hide-menu":!0,"data-testid":"nc-form-input-label"},null,8,["column","required"])):(i(),h(ye,{key:1,column:{...o,title:o.label||o.title},required:A(o,o.required),"hide-menu":!0,"data-testid":"nc-form-input-label"},null,8,["column","required"]))]),t(te)(o)?(i(),h(T,{key:2,name:o.title,class:"!mb-0 nc-input-required-error nc-form-input-item",rules:[{required:A(o,o.required),message:`${o.label||o.title} is required`}]},{default:l(()=>[d(at,{modelValue:t(S)[o.title],"onUpdate:modelValue":f=>t(S)[o.title]=f,row:t(Ve),class:ee(["nc-input",`nc-form-input-${o.title.replaceAll(" ","")}`]),"data-testid":`nc-form-input-${o.title.replaceAll(" ","")}`,column:o,onClick:a[12]||(a[12]=O(()=>{},["stop","prevent"]))},null,8,["modelValue","onUpdate:modelValue","row","class","data-testid","column"])]),_:2},1032,["name","rules"])):(i(),h(T,{key:3,name:o.title,class:"!mb-0 nc-input-required-error nc-form-input-item",rules:[{required:A(o,o.required),message:`${o.label||o.title} is required`}]},{default:l(()=>[d(rt,{class:"relative"},{default:l(()=>[d(st,{modelValue:t(S)[o.title],"onUpdate:modelValue":f=>t(S)[o.title]=f,class:ee(["nc-input truncate",`nc-form-input-${o.title.replaceAll(" ","")}`]),"data-testid":`nc-form-input-${o.title.replaceAll(" ","")}`,column:o,"edit-enabled":t(L)[q],onClick:[f=>t(L)[q]=!0,a[13]||(a[13]=O(()=>{},["stop","prevent"]))],onCancel:f=>t(L)[q]=!1,"onUpdate:editEnabled":f=>t(L)[q]=f},null,8,["modelValue","onUpdate:modelValue","class","data-testid","column","edit-enabled","onClick","onCancel","onUpdate:editEnabled"])]),_:2},1024)]),_:2},1032,["name","rules"])),r("div",Eo,m(o.description),1)],10,qo)]),footer:l(()=>[t(u).length?y("",!0):(i(),w("div",Mo,m(e.$t("activity.dragAndDropFieldsHereToAdd")),1))]),_:1},8,["list","disabled"]),r("div",Oo,[d(p,{"html-type":"submit",type:"primary",disabled:!t(ae)("dataInsert"),class:"nc-form-submit","data-testid":"nc-form-submit",onClick:Be},{default:l(()=>[E(m(e.$t("general.submit")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model"]),t(k)?y("",!0):(i(),h(nt,{key:0})),t(F)&&!t(k)?(i(),w("div",Do,[r("div",Uo,m(e.$t("msg.info.afterFormSubmitted")),1),r("div",Lo,m(e.$t("msg.info.showMessage"))+":",1),d(pe,{value:t(n).success_msg,"onUpdate:value":a[17]||(a[17]=o=>t(n).success_msg=o),rows:3,"hide-details":"",class:"nc-form-after-submit-msg","data-testid":"nc-form-after-submit-msg",onChange:t(C)},null,8,["value","onChange"]),r("div",Vo,[r("div",zo,[P(d(z,{checked:t(n).submit_another_form,"onUpdate:checked":a[18]||(a[18]=o=>t(n).submit_another_form=o),size:"small",class:"nc-form-checkbox-submit-another-form","data-testid":"nc-form-checkbox-submit-another-form",onChange:t(C)},null,8,["checked","onChange"]),[[B,["a:form-view:submit-another-form"]]]),r("span",Bo,m(e.$t("msg.info.submitAnotherForm")),1)]),r("div",No,[P(d(z,{checked:t(n).show_blank_form,"onUpdate:checked":a[19]||(a[19]=o=>t(n).show_blank_form=o),size:"small",class:"nc-form-checkbox-show-blank-form","data-testid":"nc-form-checkbox-show-blank-form",onChange:t(C)},null,8,["checked","onChange"]),[[B,["a:form-view:show-blank-form"]]]),r("span",Po,m(e.$t("msg.info.showBlankForm")),1)]),r("div",jo,[P(d(z,{checked:t(R),"onUpdate:checked":a[20]||(a[20]=o=>Ce(R)?R.value=o:null),size:"small",class:"nc-form-checkbox-send-email","data-testid":"nc-form-checkbox-send-email",onChange:Qe},null,8,["checked"]),[[B,["a:form-view:email-me"]]]),r("span",Ho,[E(m(e.$t("msg.info.emailForm"))+" ",1),r("span",Wo,m((c=t(oe))==null?void 0:c.email),1)])])])])):y("",!0)]}),_:1},8,["body-style"])]),_:1},8,["span"])):y("",!0)]),_:1}))],64))}}});const ts=Yt(Go,[["__scopeId","data-v-d790aef1"]]);export{ts as default};
