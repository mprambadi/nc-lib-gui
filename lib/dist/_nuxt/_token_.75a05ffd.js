import{o as i,c,a as s,f as D,c8 as H,$ as Y,L as J,M as K,r as I,N as Q,i as X,P as Z,w as g,a0 as ee,ca as te,b as r,O as t,t as n,a2 as T,T as p,cl as oe,U as x,d as u,W as se,a1 as ne,D as A,C as ae}from"./entry.5958c07b.js";import{_ as re}from"./nuxt-link.39d6b1ec.js";import{c as ie,e as le}from"./bases.e6c8e3c4.js";import{v as ce}from"./validation.2de04583.js";import{_ as me,a as pe}from"./google-gmail.cc94c761.js";import{_ as ue}from"./warning.385787ad.js";import{v as de}from"./passwordHelpers.1679cef4.js";import"./index.ae235b22.js";import{I as _e}from"./Input.dca3a2bc.js";import{F as ge}from"./index.b06c8b67.js";import{_ as fe}from"./FormItem.0bbf90a3.js";import{_ as he}from"./Password.f52125e7.js";import{_ as ye}from"./index.b076ba21.js";import"./index.0feaca99.js";import"./SearchOutlined.a517903c.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";import"./TextArea.9074ff05.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.ddc65fa5.js";import"./useSize.fad35fe8.js";import"./identity.34c7640e.js";import"./isSymbol.114fe557.js";import"./_flatRest.39582a58.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./toArray.fd74ce6f.js";const be={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ve=s("path",{fill:"currentColor",d:"m5.65 10.025l1.95.825q.35-.7.725-1.35t.825-1.3l-1.4-.275zM9.2 12.1l2.85 2.825q1.05-.4 2.25-1.225t2.25-1.875q1.75-1.75 2.738-3.887T20.15 4q-1.8-.125-3.95.863T12.3 7.6q-1.05 1.05-1.875 2.25T9.2 12.1m4.45-1.625q-.575-.575-.575-1.412t.575-1.413q.575-.575 1.425-.575t1.425.575q.575.575.575 1.413t-.575 1.412q-.575.575-1.425.575t-1.425-.575m.475 8.025l2.1-2.1l-.275-1.4q-.65.45-1.3.812t-1.35.713zM21.95 2.175q.475 3.025-.587 5.888T17.7 13.525L18.2 16q.1.5-.05.975t-.5.825l-4.2 4.2l-2.1-4.925L7.075 12.8L2.15 10.7l4.175-4.2q.35-.35.838-.5t.987-.05l2.475.5q2.6-2.6 5.45-3.675t5.875-.6m-18.025 13.8q.875-.875 2.138-.887t2.137.862q.875.875.863 2.138t-.888 2.137q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.038t1.075-2.087m1.425 1.4q-.25.25-.5.913t-.35 1.337q.675-.1 1.338-.337t.912-.488q.3-.3.325-.725T6.8 17.35q-.3-.3-.725-.288t-.725.313"},null,-1),we=[ve];function ke(h,$){return i(),c("svg",be,[...we])}const qe={name:"material-symbols-rocket-launch-outline",render:ke},xe=ee(()=>ne(()=>import("./NocoIcon.ea7a765e.js"),["./NocoIcon.ea7a765e.js","./NocoIcon.vue.589d8c3d.js","./entry.5958c07b.js","./entry.bdecbb78.css","./256x256-trans.69a212f8.js","./256x256.a76ef214.js"],import.meta.url).then(h=>h.default||h)),$e={class:"md:bg-primary bg-opacity-5 signup h-full min-h-[600px] flex flex-col justify-center items-center"},Ue={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},Ee={class:"prose-2xl font-bold self-center my-4"},Ie={key:0,class:"prose !text-primary font-semibold self-center"},Te={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1","data-testid":"nc-signup-error"},Ae={class:"flex items-center gap-2 justify-center"},Pe={class:"break-words"},Re={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4"},Le={key:0,class:"scaling-btn bg-opacity-100",type:"submit"},Ne={class:"flex items-center gap-2"},Se=["href"],Ce={class:"flex items-center gap-2"},ze={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},Fe=["href"],Me={type:"button",class:"scaling-btn bg-opacity-100"},Ve={class:"flex items-center gap-2"},We={key:3,class:"flex items-center gap-2"},Be={class:"prose-xs text-gray-500"},Ge={class:"text-end prose-sm"},Oe={class:"prose-sm mt-4 text-gray-500"},je={class:"prose-sm !text-gray-500 underline",target:"_blank",href:"https://nocodb.com/policy-nocodb",rel:"noopener"},wt=D({__name:"[[token]]",setup(h){const{$e:$}=ae(),w=H(),{appInfo:l,signIn:P}=Y(),{api:R,isLoading:L,error:y}=J({useGlobalInstance:!0}),{t:k}=K(),{navigateToTable:N}=ie(),{clearWorkspaces:S}=le(),U=I(),b=I(!1),d=Q({email:"",password:""}),E={email:[{required:!0,message:k("msg.error.signUpRules.emailRequired")},{validator:(e,o)=>new Promise((m,a)=>{if(!(o!=null&&o.length)||ce(o))return m();a(new Error(k("msg.error.signUpRules.emailInvalid")))}),message:k("msg.error.signUpRules.emailInvalid")}],password:[{validator:(e,o)=>new Promise((m,a)=>{const{error:_,valid:v}=de(o);if(v)return m();a(new Error(_))})}]};async function C(){if(!U.value.validate())return;q();const e={...d,token:w.params.token};e.ignore_subscribe=!b.value,R.auth.signup(e).then(async o=>{var m;P(o.token),$("a:auth:sign-up");try{const a=o.createdProject,_=(m=a==null?void 0:a.tables)==null?void 0:m[0];if(a&&_)return await N({baseId:a.id,tableId:_.id,workspaceId:"nc"})}catch(a){console.error(a)}await A({path:"/",query:w.query})})}function q(){y.value&&(y.value=null)}function z(){A({path:"/signin",query:w.query})}return X(async()=>{await S()}),(e,o)=>{const m=xe,a=ue,_=_e,v=fe,F=he,M=qe,V=me,W=pe,B=ye,G=re,O=ge,j=te;return i(),Z(j,null,{default:g(()=>[s("div",$e,[s("div",Ue,[r(m,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:t(L)},null,8,["animate"]),s("h1",Ee,n(e.$t("general.signUp"))+" "+n((e._.provides[T]||e.$route).query.redirect_to==="/referral"?"& REFER":"")+" "+n((e._.provides[T]||e.$route).query.redirect_to==="/pricing"?"& BUY":""),1),t(l).firstUser?(i(),c("h2",Ie,n(e.$t("msg.info.signUp.superAdmin")),1)):p("",!0),r(O,{ref_key:"formValidator",ref:U,model:t(d),layout:"vertical","no-style":"",onFinish:C},{default:g(()=>[t(l).disableEmailAuth?p("",!0):(i(),c(x,{key:0},[r(oe,{name:"layout"},{default:g(()=>[t(y)?(i(),c("div",Te,[s("div",Ae,[r(a),s("div",Pe,n(t(y)),1)])])):p("",!0)]),_:1}),r(v,{label:e.$t("labels.email"),name:"email",rules:E.email},{default:g(()=>[r(_,{value:t(d).email,"onUpdate:value":o[0]||(o[0]=f=>t(d).email=f),size:"large",placeholder:e.$t("msg.info.signUp.workEmail"),onFocus:q},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),r(v,{label:e.$t("labels.password"),name:"password",rules:E.password},{default:g(()=>[r(F,{value:t(d).password,"onUpdate:value":o[1]||(o[1]=f=>t(d).password=f),size:"large",class:"password",placeholder:e.$t("msg.info.signUp.enterPassword"),onFocus:q},null,8,["value","placeholder"])]),_:1},8,["label","rules"])],64)),s("div",Re,[t(l).disableEmailAuth?p("",!0):(i(),c("button",Le,[s("span",Ne,[r(M),u(" "+n(e.$t("general.signUp")),1)])])),t(l).googleAuthEnabled?(i(),c("a",{key:1,href:`${t(l).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[s("span",Ce,[r(V),u(" "+n(e.$t("labels.signUpWithProvider",{provider:"Google"})),1)])],8,Se)):p("",!0),t(l).oidcAuthEnabled?(i(),c("div",ze,[s("a",{href:`${t(l).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[s("button",Me,[s("span",Ve,[r(W),t(l).disableEmailAuth?(i(),c(x,{key:1},[u(n(e.$t("general.signUp")),1)],64)):(i(),c(x,{key:0},[u(n(e.$t("labels.signUpWithProvider",{provider:t(l).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,Fe)])):p("",!0),t(l).disableEmailAuth?p("",!0):(i(),c("div",We,[r(B,{checked:t(b),"onUpdate:checked":o[2]||(o[2]=f=>se(b)?b.value=f:null),size:"small",class:"my-1 hover:ring hover:ring-accent hover:ring-opacity-100 !focus:ring !focus:ring-accent focus:ring-opacity-100"},null,8,["checked"]),s("div",Be,n(e.$t("msg.subscribeToOurWeeklyNewsletter")),1)])),s("div",Ge,[u(n(e.$t("msg.info.signUp.alreadyHaveAccount"))+" ",1),r(G,{onClick:z},{default:g(()=>[u(n(e.$t("general.signIn")),1)]),_:1})])])]),_:1},8,["model"])]),s("div",Oe,[u(n(e.$t("msg.bySigningUp"))+" ",1),s("a",je,n(e.$t("title.termsOfService")),1)])])]),_:1})}}});export{wt as default};
