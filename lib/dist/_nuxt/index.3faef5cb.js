import{L as Kt,M as Ct,r as h,bF as He,bb as Ve,bA as Be,aM as lt,g as le,cG as et,cp as ge,X as ve,f8 as Ae,eN as at,Y as yt,eW as ke,C as Ht,o as t,c as n,a,f as Rt,$ as It,ad as Yt,H as Pe,c9 as nt,au as E,S as ne,O as e,b as v,d as W,P as c,w as f,t as I,U as de,V as Ye,cy as tt,T as x,ey as Wt,W as We,cb as ht,bv as Gt,p as Mt,e as St,ag as qt,aF as Ee,c8 as Qt,u as Zt,ba as Ne,gr as Xt,cZ as st,a5 as Jt,i as es,ah as gt,Q as xe,R as ye,cE as bt,eZ as kt,gf as ts,fU as ss,a0 as Fe,a1 as Te}from"./entry.96205fa0.js";import{a as os,_ as Et}from"./Button.vue.02ce6d5b.js";import{_ as Vt}from"./Icon.vue.6d0583a0.js";import{_ as as,a as ns}from"./Menu.vue.55c6ca4d.js";import{_ as ls}from"./Divider.82129fc6.js";import{_ as is}from"./Dropdown.vue.93f98e1e.js";import rs from"./DivDataCell.7110991f.js";import{_ as ds}from"./Tooltip.vue.00c0d0fb.js";import{_ as cs}from"./UserIcon.7f59375b.js";import{u as Dt}from"./config.bc9920dc.js";import{A as us,B as Ke,b as ms,t as ps,j as fs,M as vs,l as _s,F as ws}from"./index.9b87fcff.js";import{e as be,p as xs,r as ys}from"./dataUtils.fb0a3616.js";import{a as hs,f as gs,b as bs}from"./bases.965a49bb.js";import{u as ks}from"./index.e034edbd.js";import{a as Lt}from"./useKanbanViewStore.4bcd49a7.js";import{u as $s}from"./useSmartsheetRowStore.9c7d6fc1.js";import{u as Cs}from"./useSharedView.9e320acb.js";import{I as Rs}from"./iconify.e008aad7.js";import"./index.1431a68b.js";import{I as Is}from"./Input.3f1aaf0c.js";import{_ as zt}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as Ms}from"./Modal.vue.3dac5189.js";import{_ as Ss}from"./DeleteModal.vue.49c1a59b.js";import{u as Es}from"./views.2c163cf7.js";import{u as Vs}from"./useDashboard.0f55d174.js";import{e as ot,d as Ds,h as Ls,c as zs,g as Os}from"./virtualCell.9142cfee.js";import{u as Us}from"./index.a5de28c1.js";import{u as As}from"./useSmartsheetStore.7d51347e.js";import{_ as Fs}from"./Input.553ad305.js";const[Ts,js]=ks((o,J)=>{const{$e:b,$state:T,$api:P}=Ht(),{api:ce,isLoading:De,error:ue}=Kt(),{t:G}=Ct(),O=h(!1),D=h([]),me=h(""),j=h(!0),he=h(0),U=h(new Set),{base:y}=He(hs()),_=h(J.value.rowMeta.new?J.value:{row:{},oldRow:{},rowMeta:{}}),_e=$s(o,_),pe=Ve(us,h()),{sharedView:Le}=Cs(),{addUndo:ie,clone:ee,defineViewScope:N}=gs(),C=Ve(Ke,Be()),{isUIAllowed:te}=lt(),q=le(()=>{var w,u,g,p;if((w=_==null?void 0:_.value)!=null&&w.row){const S=(g=(u=o==null?void 0:o.value)==null?void 0:u.columns)==null?void 0:g.find(m=>m.pv);if(!S)return;const k=(p=_.value.row)==null?void 0:p[S.title],L=S.uidt;if(L===et.Date)return(/^\d+$/.test(k)?ge(+k):ge(k)).format("YYYY-MM-DD");if(L===et.DateTime)return(/^\d+$/.test(k)?ge(+k):ge(k)).format("YYYY-MM-DD HH:mm");if(L===et.Time){let m=ge(k);return m.isValid()||(m=ge(k,"HH:mm:ss")),m.isValid()||(m=ge(`1999-01-01 ${k}`)),m.isValid()?m.format("HH:mm:ss"):k}return k}}),$e=le(()=>be(_.value.row,o.value.columns)),we=async()=>{var u,g;if(!te("commentList")||!_.value)return;const w=be(_.value.row,o.value.columns);w&&(D.value=((g=(u=(await ce.utils.commentList({row_id:w,fk_model_id:o.value.id,comments_only:O.value})).list)==null?void 0:u.reverse)==null?void 0:g.call(u))||[])},Ce=w=>{var u,g;return((g=(u=T.user)==null?void 0:u.value)==null?void 0:g.email)===w},A=async()=>{var w;if(((w=pe.value)==null?void 0:w.type)===at.KANBAN){const{loadKanbanData:u}=Lt();await u()}};return{..._e,commentsOnly:O,loadCommentsAndLogs:we,commentsAndLogs:D,isCommentsLoading:De,commentsError:ue,saveComment:async()=>{var w;try{if(!_.value||!me.value)return;const u=be(_.value.row,o.value.columns);if(!u)return;await ce.utils.commentRow({fk_model_id:(w=o.value)==null?void 0:w.id,row_id:u,description:`The following comment has been created: ${me.value}`}),C==null||C.trigger(),await we(),me.value=""}catch(u){ve.error(u.message)}b("a:row-expand:comment")},comment:me,isYou:Ce,commentsDrawer:j,row:_,deleteRowById:async w=>{try{const u=await P.dbTableRow.delete(Ae,y.value.id,o.value.id,encodeURIComponent(w??be(_.value.row,o.value.columns)));if(u.message)return ve.info(`Record delete failed: ${`Unable to delete record with ID ${w} because of the following:
              
${u.message.join(`
`)}.

              Clear the data first & try again`})}`),!1}catch(u){ve.error(`${G("msg.error.deleteFailed")}: ${await yt(u)}`)}},displayValue:q,save:async(w={},u=!1,{kanbanClbk:g}={})=>{var S,k,L,m;let p;try{const Z=((S=_.value.rowMeta)==null?void 0:S.new)??!1;if(Z){const{getMeta:z}=bs(),{missingRequiredColumns:K,insertObj:H}=await xs({meta:o.value,ltarState:w,getMeta:z,row:_.value.row,throwError:!0});if(K.size)return;if(p=await P.dbTableRow.create("noco",y.value.id,o.value.id,{...H,...w||{}}),Object.assign(_.value,{row:p,rowMeta:{},oldRow:{...p}}),!u){const R=be(p,(k=o.value)==null?void 0:k.columns),d=ys(_.value.row,(L=o.value)==null?void 0:L.columns);ie({redo:{fn:async oe=>{await P.dbTableRow.create("noco",y.value.id,o.value.id,{...d,...oe}),await A(),C==null||C.trigger()},args:[ee(H)]},undo:{fn:async oe=>{var X,F;const ae=await P.dbViewRow.delete("noco",y.value.id,(X=o.value)==null?void 0:X.id,(F=pe.value)==null?void 0:F.id,encodeURIComponent(oe));if(ae.message)throw new Error(ae.message);await A(),C==null||C.trigger()},args:[R]},scope:N({view:pe.value})})}}else{const z=[...U.value].reduce((K,H)=>(K[H]=_.value.row[H],K),{});if(Object.keys(z).length){const K=be(_.value.row,o.value.columns);if(!K)return ve.info("Update not allowed for table which doesn't have primary Key");if(await P.dbTableRow.update(Ae,y.value.id,o.value.id,encodeURIComponent(K),z),!u){const H=[...U.value].reduce((R,d)=>(R[d]=_.value.oldRow[d],R),{});ie({redo:{fn:async(R,d)=>{await P.dbTableRow.update(Ae,y.value.id,o.value.id,encodeURIComponent(R),d),await A(),C==null||C.trigger()},args:[K,ee(z)]},undo:{fn:async(R,d)=>{await P.dbTableRow.update(Ae,y.value.id,o.value.id,encodeURIComponent(R),d),await A(),C==null||C.trigger()},args:[K,ee(H)]},scope:N({view:pe.value})})}j.value&&await we()}else{ve.info(G("msg.info.noColumnsToUpdate"));return}}((m=pe.value)==null?void 0:m.type)===at.KANBAN&&g&&g(_.value,Z),U.value=new Set}catch(Z){console.error(Z),ve.error(`${G("msg.error.rowUpdateFailed")}: ${await yt(Z)}`)}return b("a:row-expand:add"),p},changedColumns:U,loadRow:async(w,u=!1)=>{var p,S,k;let g=await P.dbTableRow.read(Ae,((p=y==null?void 0:y.value)==null?void 0:p.id)||((k=(S=Le.value)==null?void 0:S.view)==null?void 0:k.base_id),o.value.id,encodeURIComponent(w??be(_.value.row,o.value.columns)),{getHiddenColumn:!0});u&&(g={..._.value.row,...o.value.columns.reduce((L,m)=>(ke(m)&&m.title in g&&(L[m.title]=g[m.title]),L),{})}),Object.assign(_.value,{row:g,oldRow:{...g},rowMeta:{}})},primaryKey:$e,saveRowAndStay:he,updateComment:async(w,u)=>await P.utils.commentUpdate(w,u),clearColumns:()=>{U.value=new Set}}},"expanded-form-store");function Ns(){const o=js();if(o==null)throw new Error("Please call `useExpandedFormStore` on the appropriate parent component");return o}const Bs={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ps=a("path",{fill:"currentColor",d:"M13.5 8H12v5l4.28 2.54l.72-1.21l-3.5-2.08zM13 3a9 9 0 0 0-9 9H1l3.96 4.03L9 12H6a7 7 0 0 1 7-7a7 7 0 0 1 7 7a7 7 0 0 1-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.896 8.896 0 0 0 13 21a9 9 0 0 0 9-9a9 9 0 0 0-9-9"},null,-1),Ks=[Ps];function Hs(o,J){return t(),n("svg",Bs,[...Ks])}const Ys={name:"mdi-history",render:Hs},Ws={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Gs=a("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"},null,-1),qs=[Gs];function Qs(o,J){return t(),n("svg",Ws,[...qs])}const Zs={name:"mdi-file-document-outline",render:Qs},Xs={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Js=a("path",{fill:"currentColor",d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H5.2L4 17.2V4h16z"},null,-1),eo=[Js];function to(o,J){return t(),n("svg",Xs,[...eo])}const so={name:"mdi-message-outline",render:to},Ot=o=>(Mt("data-v-fdd0af67"),o=o(),St(),o),oo={class:"flex flex-col h-full w-full"},ao={class:"h-16 bg-white rounded-t-lg border-gray-200 border-b-1"},no={class:"flex flex-row gap-2 m-2 p-1 bg-gray-100 rounded-lg"},lo={class:"tab-title nc-tab"},io=Ot(()=>a("span",{class:"!text-base"}," Coming soon ",-1)),ro={class:"tab-title nc-tab select-none"},co={class:"tab-title nc-tab"},uo={key:0,class:"flex flex-col h-full"},mo={key:1,class:"flex flex-col h-full"},po={key:0,class:"flex flex-col my-1 text-center justify-center h-full"},fo={class:"text-center text-3xl text-gray-700"},vo={class:"font-medium text-center my-6 text-gray-500"},_o={class:"bg-white rounded-xl group border-1 gap-2 border-gray-200"},wo={class:"flex flex-col p-4 gap-3"},xo={class:"flex justify-between"},yo={class:"flex items-center gap-2"},ho={class:"flex flex-col"},go={class:"truncate font-bold max-w-42"},bo={key:0,class:"text-xs font-medium text-gray-500"},ko={key:1,class:"text-sm text-gray-700"},$o={key:2,class:"flex justify-end gap-1"},Co={key:2,class:"p-2 bg-gray-50 gap-2 flex"},Ro={class:"h-14 flex flex-row w-full bg-white py-2.75 px-1.5 items-center rounded-xl border-1 border-gray-200"},Io={key:0,class:"flex flex-col text-center justify-center h-full"},Mo={class:"text-center text-3xl text-gray-600"},So=Ot(()=>a("div",{class:"font-bold text-center my-1 text-gray-600"},"See changes to this record",-1)),Eo={class:"flex flex-col p-4 gap-3"},Vo={class:"flex justify-between"},Do={class:"flex items-center gap-2"},Lo={class:"flex flex-col"},zo={class:"truncate font-bold max-w-50"},Oo={key:0,class:"text-xs font-medium text-gray-500"},Uo={class:"text-sm font-medium"},Ao=Rt({__name:"Comments",props:{loading:{type:Boolean}},setup(o){const J=o,{loadCommentsAndLogs:b,commentsAndLogs:T,saveComment:P,comment:ce,updateComment:De}=Ns(),{isExpandedFormCommentMode:ue}=He(Dt()),G=h(),{user:O,appInfo:D}=It(),me=le(()=>J.loading),j=h("comments"),{isUIAllowed:he}=lt(),U=le(()=>he("commentEdit")),y=h(),_=h(!1),_e=h(!1),pe=r=>!me.value&&(_e.value||ue.value)&&!_.value?(ue.value&&setTimeout(()=>{ue.value=!1},400),r==null?void 0:r.focus()):r,Le=r=>r==null?void 0:r.focus();function ie(r){r.key==="Escape"?N(r):r.key==="Enter"&&ee(r)}function ee(r){r.stopImmediatePropagation(),r.preventDefault(),C()}function N(r){r.stopImmediatePropagation(),r.preventDefault(),te()}async function C(){!_.value||!y.value||(_e.value=!0,await De(y.value.id,{description:y.value.description}),q())}function te(){_.value&&(y.value=void 0,q())}function q(){b(),_.value=!1,y.value=void 0}Yt("Enter",r=>{_.value&&ee(r)});const $e=le(()=>T.value.filter(r=>r.op_type==="COMMENT")),we=le(()=>T.value.filter(r=>r.op_type!=="COMMENT"&&r.details));function Ce(r){y.value=r,_.value=!0}const A=le({get(){var r,M,w,u;return((u=(r=y.value)==null?void 0:r.description)==null?void 0:u.substring(((w=(M=y.value)==null?void 0:M.description)==null?void 0:w.indexOf(":"))+1))??""},set(r){y.value&&(y.value.description=r)}});function fe(){var r;G.value&&(G.value.scrollTop=(r=G.value)==null?void 0:r.scrollHeight)}const se=h(!1),ze=async()=>{if(!se.value){_e.value=!0,se.value=!0;try{await P(),fe()}catch(r){console.error(r)}finally{se.value=!1}}};Pe(G,()=>{fe()});const Q=()=>{D.value.ee||(j.value="audits")};return(r,M)=>{var H,R;const w=so,u=Zs,g=ds,p=os,S=Vt,k=cs,L=Et,m=Is,Z=Ys,z=nt("e"),K=nt("dompurify-html");return t(),n("div",oo,[a("div",ao,[a("div",no,[E((t(),n("div",{class:ne(["tab flex-1 px-4 py-2 transition-all text-gray-600 cursor-pointer rounded-lg",{"bg-white shadow !text-brand-500 !hover:text-brand-500":e(j)==="comments"||e(D).ee}]),onClick:M[0]||(M[0]=d=>j.value="comments")},[a("div",lo,[v(w,{class:"h-4 w-4"}),W(" Comments ")])],2)),[[z,["c:row-expand:comment"]]]),e(D).ee?(t(),c(g,{key:0,class:"tab flex-1"},{title:f(()=>[io]),default:f(()=>[E((t(),n("div",{class:"flex-1 px-4 py-2 transition-all text-gray-400 cursor-not-allowed bg-gray-50 rounded-lg",onClick:Q},[a("div",ro,[v(u,{class:"h-4 w-4"}),W(" Audits ")])])),[[z,["c:row-expand:audit"]]])]),_:1})):E((t(),n("div",{key:1,class:ne(["tab flex-1 px-4 py-2 transition-all text-gray-600 cursor-pointer rounded-lg",{"bg-white shadow !text-brand-500 !hover:text-brand-500":e(j)==="audits"}]),onClick:Q},[a("div",co,[v(u,{class:"h-4 w-4"}),W(" Audits ")])],2)),[[z,["c:row-expand:audit"]]])])]),a("div",{class:ne(["h-[calc(100%-4rem)]",{"pb-1":e(j)!=="comments"&&!e(D).ee}])},[e(me)?(t(),n("div",uo,[v(p,{class:"!mt-16",size:"xlarge"})])):e(j)==="comments"?(t(),n("div",mo,[e($e).length===0?(t(),n("div",po,[a("div",fo,[v(S,{icon:"commentHere"})]),a("div",vo,I(r.$t("activity.startCommenting")),1)])):(t(),n("div",{key:1,ref_key:"commentsWrapperEl",ref:G,class:"flex flex-col h-full py-2 pl-2 pr-1 space-y-2 nc-scrollbar-md"},[(t(!0),n(de,null,Ye(e($e),d=>{var oe,ae,X;return t(),n("div",{key:d.id},[a("div",_o,[a("div",wo,[a("div",xo,[a("div",yo,[v(k,{size:"base",name:d.display_name??d.user,email:d.user},null,8,["name","email"]),a("div",ho,[a("span",go,I(d.display_name??d.user.split("@")[0]??"Shared source"),1),d.id!==((oe=e(y))==null?void 0:oe.id)?(t(),n("div",bo,I(d.created_at!==d.updated_at?`Edited ${e(tt)(d.updated_at)}`:e(tt)(d.created_at)),1)):x("",!0)])]),d.user===e(O).email&&!e(y)?E((t(),c(L,{key:0,type:"secondary",class:"!px-2 opacity-0 group-hover:opacity-100 transition-all",size:"sm",onClick:F=>Ce(d)},{default:f(()=>[v(e(Rs),{class:"iconify text-gray-800",icon:"lucide:pen"})]),_:2},1032,["onClick"])),[[z,["c:row-expand:comment:edit"]]]):x("",!0)]),d.id===((ae=e(y))==null?void 0:ae.id)?E((t(),n("textarea",{key:0,ref_for:!0,ref:Le,"onUpdate:modelValue":M[1]||(M[1]=F=>We(A)?A.value=F:null),rows:"6",class:"px-2 py-1 rounded-lg border-none nc-scrollbar-md bg-white outline-gray-200",onKeydown:M[2]||(M[2]=ht(F=>ie(F),["stop"]))},null,544)),[[Wt,e(A)]]):(t(),n("div",ko,I(d.description.substring(d.description.indexOf(":")+1)),1)),d.id===((X=e(y))==null?void 0:X.id)?(t(),n("div",$o,[v(L,{type:"secondary",size:"sm",onClick:te},{default:f(()=>[W(" Cancel ")]),_:1}),E((t(),c(L,{size:"sm",onClick:C},{default:f(()=>[W(" Save ")]),_:1})),[[z,["a:row-expand:comment:save"]]])])):x("",!0)])])])}),128))],512)),e(U)?(t(),n("div",Co,[a("div",Ro,[v(k,{size:"base",class:"!w-10",email:(H=e(O))==null?void 0:H.email,name:(R=e(O))==null?void 0:R.display_name},null,8,["email","name"]),v(m,{ref:pe,value:e(ce),"onUpdate:value":M[3]||(M[3]=d=>We(ce)?ce.value=d:null),class:"!rounded-lg border-1 bg-white !px-2.5 !py-2 !border-gray-200 nc-comment-box !outline-none",placeholder:"Start typing...","data-testid":"expanded-form-comment-input",bordered:!1,disabled:e(se),onKeyup:Gt(ht(ze,["prevent"]),["enter"])},null,8,["value","disabled","onKeyup"]),E((t(),c(L,{size:"medium",class:"!w-8",loading:e(se),disabled:!e(se)&&!e(ce).length,"icon-only":e(se),onClick:ze},{default:f(()=>[e(se)?x("",!0):(t(),c(S,{key:0,icon:"send"}))]),_:1},8,["loading","disabled","icon-only"])),[[z,["a:row-expand:comment:save"]]])])])):x("",!0)])):x("",!0),e(j)==="audits"?(t(),n("div",{key:2,ref_key:"commentsWrapperEl",ref:G,class:"flex flex-col h-full nc-scrollbar-md !overflow-y-auto"},[e(we).length===0?(t(),n("div",Io,[a("div",Mo,[v(Z)]),So])):x("",!0),(t(!0),n(de,null,Ye(e(we),d=>{var oe;return t(),n("div",{key:d.id,class:"nc-audit-item"},[a("div",Eo,[a("div",Vo,[a("div",Do,[v(k,{size:"base",email:d.user},null,8,["email"]),a("div",Lo,[a("span",zo,I(d.display_name??d.user.split("@")[0].slice(0,2)??"Shared source"),1),d.id!==((oe=e(y))==null?void 0:oe.id)?(t(),n("div",Oo,I(e(tt)(d.created_at)),1)):x("",!0)])])]),E(a("div",Uo,null,512),[[K,d.details]])])])}),128))],512)):x("",!0)],2)])}}});const Fo=zt(Ao,[["__scopeId","data-v-fdd0af67"]]),To={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},jo=a("path",{fill:"currentColor",d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"},null,-1),No=[jo];function Bo(o,J){return t(),n("svg",To,[...No])}const Po={name:"mdi-chevron-up",render:Bo},Ko={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ho=a("path",{fill:"currentColor",d:"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6l-6-6z"},null,-1),Yo=[Ho];function Wo(o,J){return t(),n("svg",Ko,[...Yo])}const $t={name:"mdi-chevron-down",render:Wo},Go=Fe(()=>Te(()=>import("./VirtualCell.8c6452ad.js"),["./VirtualCell.8c6452ad.js","./entry.96205fa0.js","./entry.d09b2482.css","./Tooltip.vue.00c0d0fb.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.8b187915.js","./Icon.vue.6d0583a0.js","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./index.9b87fcff.js","./views.2c163cf7.js","./bases.965a49bb.js","./index.0c5b3837.js","./useSharedView.9e320acb.js","./validation.64563eeb.js","./index.886d43e1.js","./FormItem.9f1f85f2.js","./identity.309e9ead.js","./_getPrototype.459a70cf.js","./Col.b3c5d725.js","./responsiveObserve.358bcfe9.js","./toArray.3561b70e.js","./FormItemContext.b19eb48c.js","./useSize.c98e621d.js","./_flatRest.ce557a88.js","./isPlainObject.631eb8fb.js","./vuedraggable.umd.5a03c14e.js","./v3-infinite-loading.e5e5dc2d.js","./index.6c1d17b6.js","./Dropdown.1dedd322.js","./RightOutlined.3ce786f5.js","./index.1431a68b.js","./Input.3f1aaf0c.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c9794270.js","./TextArea.b81a19ed.js","./Password.803cc3dc.js","./cell.810c4fd3.js","./index.0b4c0f1e.js","./Checkbox.cf2cdba0.js","./createForOfIteratorHelper.f2005dfe.js","./index.b5e393d6.js","./isMobile.e2e89480.js","./useMemo.dbc63a5f.js","./useState.5a301439.js","./CheckOutlined.3b90c20d.js","./EditOrAddProvider.9247d0ff.css","./virtualCell.9142cfee.js","./VirtualCell.ff98befc.css"],import.meta.url).then(o=>o.default||o)),qo=Fe(()=>Te(()=>import("./Cell.378562a9.js"),["./Cell.378562a9.js","./entry.96205fa0.js","./entry.d09b2482.css","./CellIcon.0a028b40.js","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./Tooltip.vue.00c0d0fb.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.8b187915.js","./Icon.vue.6d0583a0.js","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./views.2c163cf7.js","./useSharedView.9e320acb.js","./validation.64563eeb.js","./index.886d43e1.js","./FormItem.9f1f85f2.js","./identity.309e9ead.js","./_getPrototype.459a70cf.js","./Col.b3c5d725.js","./responsiveObserve.358bcfe9.js","./toArray.3561b70e.js","./FormItemContext.b19eb48c.js","./useSize.c98e621d.js","./_flatRest.ce557a88.js","./isPlainObject.631eb8fb.js","./vuedraggable.umd.5a03c14e.js","./v3-infinite-loading.e5e5dc2d.js","./index.6c1d17b6.js","./Dropdown.1dedd322.js","./RightOutlined.3ce786f5.js","./index.1431a68b.js","./Input.3f1aaf0c.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c9794270.js","./TextArea.b81a19ed.js","./Password.803cc3dc.js","./index.0b4c0f1e.js","./Checkbox.cf2cdba0.js","./createForOfIteratorHelper.f2005dfe.js","./index.b5e393d6.js","./isMobile.e2e89480.js","./useMemo.dbc63a5f.js","./useState.5a301439.js","./CheckOutlined.3b90c20d.js","./EditOrAddProvider.9247d0ff.css","./Cell.14116970.css"],import.meta.url).then(o=>o.default||o)),Qo=Fe(()=>Te(()=>import("./VirtualCell.e690dced.js"),["./VirtualCell.e690dced.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./virtualCell.9142cfee.js","./cell.810c4fd3.js"],import.meta.url).then(o=>o.default||o)),Zo=Fe(()=>Te(()=>import("./Cell.a619fa9b.js"),["./Cell.a619fa9b.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./useSmartsheetRowStore.9c7d6fc1.js","./deepCompare.d32ec333.js","./dataUtils.fb0a3616.js","./virtualCell.9142cfee.js","./index.e034edbd.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.f27da8af.css"],import.meta.url).then(o=>o.default||o)),Xo=Fe(()=>Te(()=>import("./DivDataCell.7110991f.js"),["./DivDataCell.7110991f.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./_plugin-vue_export-helper.c27b6911.js","./DivDataCell.1a716a1e.css"],import.meta.url).then(o=>o.default||o)),Ge=o=>(Mt("data-v-5f951422"),o=o(),St(),o),Jo={class:"h-[85vh] xs:max-h-full max-h-215 flex flex-col p-6"},ea={class:"flex h-9.5 flex-shrink-0 w-full items-center nc-expanded-form-header relative mb-4 justify-between"},ta={class:"flex gap-3 w-100"},sa={class:"flex gap-2"},oa={key:0},aa={key:1,class:"flex items-center truncate font-bold text-gray-800 text-xl"},na={key:2,class:"flex items-center font-bold text-gray-800 text-xl w-64"},la={class:"truncate"},ia={class:"flex gap-2"},ra={"data-testid":"nc-expanded-form-copy-url",class:"flex gap-2 items-center"},da={class:"flex gap-2 items-center","data-testid":"nc-expanded-form-reload"},ca={"data-testid":"nc-expanded-form-copy-url",class:"flex gap-2 items-center"},ua={"data-testid":"nc-expanded-form-duplicate",class:"flex gap-2 items-center"},ma={class:"-ml-0.25"},pa={"data-testid":"nc-expanded-form-delete",class:"flex gap-2 items-center"},fa={class:"-ml-0.25"},va={key:1,class:"flex flex-row w-full"},_a={key:1,class:"min-w-10.5"},wa={class:"flex flex-grow justify-center items-center font-semibold text-lg"},xa={key:3,class:"min-w-10.5"},ya=["col-id","data-testid"],ha={class:"flex items-start flex-row sm:gap-x-6 xs:flex-col xs:w-full nc-expanded-cell min-h-10"},ga={class:"w-48 xs:w-full mt-0.25 !h-[35px]"},ba={key:0,class:"!h-8.5 !xs:h-12 !xs:bg-white sm:mr-21 w-60 mt-0.75 !rounded-lg !overflow-hidden"},ka={key:0,class:"flex w-full sm:px-12 xs:px-1 xs:mt-2 items-center py-3"},$a=Ge(()=>a("div",{class:"flex-grow h-px mr-1 bg-gray-100"},null,-1)),Ca=Ge(()=>a("div",{class:"flex-grow h-px ml-1 bg-gray-100"},null,-1)),Ra={key:1,class:"flex flex-col w-full mb-3 items-center"},Ia=["data-testid"],Ma={class:"sm:gap-x-6 flex sm:flex-row xs:flex-col items-start min-h-10"},Sa={class:"sm:w-48 xs:w-full scale-110 !h-[35px]"},Ea={key:0,class:"!h-8.5 !xs:h-9.5 !xs:bg-white sm:mr-21 w-60 mt-0.75 !rounded-lg !overflow-hidden"},Va={key:0,class:"w-full h-16 border-t-1 border-gray-200 bg-white flex items-center justify-end p-3 xs:p-0 xs:mt-4 xs:border-t-0 xs:gap-x-4 xs:justify-between"},Da={class:"flex gap-2 items-center","data-testid":"nc-expanded-form-reload"},La={"data-testid":"nc-expanded-form-delete"},za={class:"flex flex-row gap-x-3"},Oa=Ge(()=>a("div",{class:"px-1"},"Close",-1)),Ua=Ge(()=>a("div",{class:"xs:px-1"},"Save",-1)),Aa={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},Fa={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75 break-keep whitespace-nowrap"},Ta={class:""},ja={class:"flex flex-row items-center gap-x-2 text-base font-bold"},Na={class:"flex font-medium mt-2"},Ba={class:"flex flex-row justify-end gap-x-2 mt-5"},Pa={name:"ExpandedForm"},Ka=Rt({...Pa,props:{modelValue:{type:Boolean},state:{},meta:{},loadRow:{type:Boolean},useMetaFields:{type:Boolean},row:{},rowId:{},view:{},showNextPrevIcons:{type:Boolean},firstRow:{type:Boolean},lastRow:{type:Boolean},closeAfterSave:{type:Boolean},newRecordHeader:{}},emits:["update:modelValue","cancel","next","prev","createdRecord"],setup(o,{emit:J}){const b=o,T=J,{activeView:P}=He(Es()),ce=h(0),De=h(),{dashboardUrl:ue}=Vs(),{copy:G}=qt(),{isMobileMode:O}=It(),{t:D}=Ct(),me=Ee(b,"rowId"),j=Ee(b,"row"),he=Ee(b,"state"),U=Ee(b,"meta"),y=Ee(b,"lastRow"),_=Ee(b,"firstRow"),_e=Qt(),pe=Zt(),Le=Ve(ms,h(!1)),ie=h(!1),ee=h(!1),{isUIAllowed:N}=lt(),C=le(()=>!N("dataEdit")||Le.value),te=h(),q=Ve(Ke,Be()),{addOrEditStackRow:$e}=Lt(),{isExpandedFormCommentMode:we}=He(Dt());Ne(ps,void 0);const Ce=Xt(ws,s=>b.useMetaFields?(U.value.columns??[]).filter(l=>!st(l)):(s==null?void 0:s.value)??[]),A=le(()=>(U.value.columns??[]).filter(s=>{var l;return!((l=Ce.value)!=null&&l.includes(s))}).filter(s=>!st(s))),fe=h(!1),se=()=>{fe.value=!fe.value},ze=Ve(fs,h(!1));Ne(vs,U);const Q=h(!0),{commentsDrawer:r,changedColumns:M,deleteRowById:w,displayValue:u,state:g,isNew:p,loadRow:S,primaryKey:k,saveRowAndStay:L,row:m,save:Z,loadCommentsAndLogs:z,clearColumns:K}=Ts(U,j),H=h(!1);As(h({}),U),Pe(he,()=>{he.value?g.value=he.value:g.value={}},{immediate:!0});const R=Jt(b,"modelValue",T,{defaultValue:!1}),d=()=>{var s,l;M.value.size>0?F.value=!0:((l=(s=m.value)==null?void 0:s.rowMeta)!=null&&l.new&&T("cancel"),R.value=!1)},oe=()=>{H.value=!0,ie.value=!0;const s={...m.value.row};delete s.ncRecordId;const l=Object.assign({},{row:s,oldRow:{},rowMeta:{new:!0}});setTimeout(async()=>{m.value=l,H.value=!1,ve.success(D("msg.success.rowDuplicatedWithoutSavedYet"))},500)},ae=async()=>{var l;let s;((l=P.value)==null?void 0:l.type)===at.KANBAN&&(s=(V,$)=>{$e(V,$)}),p.value?(await Z(g.value,void 0,{kanbanClbk:s}),q==null||q.trigger()):(await Z(void 0,void 0,{kanbanClbk:s}),S(),q==null||q.trigger()),ie.value=!1,b.closeAfterSave&&(R.value=!1),T("createdRecord",m.value.row)},X=h(!1),F=h(!1),Ut=()=>{var s,l,V,$;X.value&&(T("next"),(l=(s=m.value)==null?void 0:s.rowMeta)!=null&&l.new&&T("cancel"),X.value=!1),F.value&&(F.value=!1,($=(V=m.value)==null?void 0:V.rowMeta)!=null&&$.new&&T("cancel"),R.value=!1),K()},qe=async()=>{if(M.value.size>0){X.value=!0;return}T("next")},it=async()=>{var s;await G(encodeURI(`${ue==null?void 0:ue.value}#/${_e.params.typeOrId}/${_e.params.baseId}/${(s=U.value)==null?void 0:s.id}${b.view?`/${b.view.title}`:""}?rowId=${k.value}`)),ee.value=!0},At=async()=>{X.value&&(ie.value=!1,await ae(),T("next"),X.value=!1),F.value&&(F.value=!1,await ae(),R.value=!1)},Qe=Ve(Ke,Be()),B=Be();if(B.on(()=>{Qe==null||Qe.trigger(!1),!p.value&&S(null,!0)}),Ne(Ke,B),ze.value)for(const[s,l]of Object.entries(m.value.row))l&&M.value.add(s);Ne(_s,R);const Ze=h();es(async()=>{var l;ee.value=!1,Q.value=!0;const s=!we.value;if(b.loadRow&&(await S(),await z()),b.rowId)try{await S(b.rowId),await z()}catch(V){if(((l=V.response)==null?void 0:l.status)===404)ve.error(D("msg.noRecordFound")),pe.replace({query:{}});else throw V}Q.value=!1,s&&setTimeout(()=>{var V,$,Ie;(Ie=($=(V=Ze.value)==null?void 0:V.$el)==null?void 0:$.querySelector("input,select,textarea"))==null||Ie.focus()},300)});const Oe=()=>{setTimeout(async()=>{m.value={row:{},oldRow:{},rowMeta:{new:!0}},g.value={},ce.value++,R.value=!0},500)};Us(R,async s=>{var l,V,$;s.altKey&&(s.key==="ArrowLeft"?(s.stopPropagation(),T("prev")):s.key==="ArrowRight"?(s.stopPropagation(),qe()):s.code==="KeyS"?((l=document.activeElement)==null||l.blur(),s.stopPropagation(),p.value?(await Z(g.value),B==null||B.trigger(null)):(await ae(),B==null||B.trigger(null)),L.value||d()):s.code==="KeyN"&&(($=(V=document.activeElement)==null?void 0:V.blur)==null||$.call(V),M.value.size>0?await gt.confirm({title:D("msg.saveChanges"),okText:D("general.save"),cancelText:D("labels.discard"),onOk:async()=>{await ae(),B==null||B.trigger(null),Oe()},onCancel:()=>{Oe()}}):p.value?await gt.confirm({title:"Do you want to save the record?",okText:D("general.save"),cancelText:D("labels.discard"),onOk:async()=>{await Z(g.value),B==null||B.trigger(null),Oe()},onCancel:()=>{Oe()}}):Oe()))},{immediate:!0});const Re=h(!1),rt=()=>{Re.value=!0},Ft=async()=>{Re.value=!1,await w(k.value),ve.success(D("msg.rowDeleted")),q.trigger(),d(),Re.value=!1};Pe(me,async s=>{await S(s),await z()});const Xe=le(()=>!p.value&&r.value&&N("commentList")),je=le({get:()=>F.value||X.value,set:s=>{F.value=s}}),Tt=s=>{let l=!1;document.querySelectorAll(".ant-select-dropdown").forEach(V=>{l=l||V.checkVisibility()}),!l&&(M.value.size===0&&!ie.value||s?R.value=s:je.value=!0)},dt=s=>Ds(s)||ot(s)||Ls(s)||zs(s)||Os(s)||st(s)||ts(s)||ss(s);return Pe([te,Q],()=>{if(!O.value&&te.value&&!Q.value){const s=te.value.scrollHeight;te.value.scrollTop=s,setTimeout(()=>{te.value.scrollTop=0},125)}}),(s,l)=>{const V=Po,$=Et,Ie=Fs,Ue=Vt,Me=as,ct=ls,ut=ns,mt=is,pt=Go,ft=qo,vt=Qo,_t=Zo,jt=rs,Nt=Xo,Bt=Fo,wt=Ms,Pt=Ss,re=nt("e");return t(),n(de,null,[v(wt,{visible:e(R),footer:null,width:(e(r)&&e(N)("commentList"),"min(80vw,1280px)"),"body-style":{padding:0},closable:!1,size:"small",class:ne(["nc-drawer-expanded-form",{active:e(R)}]),"onUpdate:visible":Tt},{default:f(()=>{var Se,xt;return[a("div",Jo,[a("div",ea,[e(O)?(t(),n("div",va,[b.showNextPrevIcons&&!e(_)?E((t(),c($,{key:0,type:"secondary",class:"nc-prev-arrow !w-10",onClick:l[6]||(l[6]=i=>s.$emit("prev"))},{default:f(()=>[v(Ue,{icon:"arrowLeft",class:"text-lg text-gray-700"})]),_:1})),[[re,["c:row-expand:prev"]]]):(t(),n("div",_a)),a("div",wa,[a("div",null,I(e(U).title),1)]),b.showNextPrevIcons&&!e(y)?E((t(),c($,{key:2,type:"secondary",class:"nc-next-arrow !w-10",onClick:qe},{default:f(()=>[v(Ue,{icon:"arrowRight",class:"text-lg text-gray-700"})]),_:1})),[[re,["c:row-expand:next"]]]):(t(),n("div",xa))])):(t(),n(de,{key:0},[a("div",ta,[a("div",sa,[b.showNextPrevIcons?(t(),c($,{key:0,disabled:e(_),type:"secondary",class:"nc-prev-arrow !w-10",onClick:l[0]||(l[0]=i=>s.$emit("prev"))},{default:f(()=>[v(V,{class:"text-md"})]),_:1},8,["disabled"])):x("",!0),b.showNextPrevIcons?(t(),c($,{key:1,disabled:e(y),type:"secondary",class:"nc-next-arrow !w-10",onClick:qe},{default:f(()=>[v(e($t),{class:"text-md"})]),_:1},8,["disabled"])):x("",!0)]),e(Q)?(t(),n("div",oa,[v(Ie,{class:"!h-8 !sm:mr-14 !w-52 mt-1 !rounded-md !overflow-hidden",active:"",size:"small"})])):x("",!0),(Se=e(j).rowMeta)!=null&&Se.new||b.newRecordHeader?(t(),n("div",aa,I(b.newRecordHeader??s.$t("activity.newRecord")),1)):e(u)&&!((xt=e(j).rowMeta)!=null&&xt.new)?(t(),n("div",na,[a("span",la,I(e(u)),1)])):x("",!0)]),a("div",ia,[e(p)?x("",!0):(t(),c($,{key:0,type:"secondary",class:"!xs:hidden text-gray-700",onClick:l[1]||(l[1]=i=>e(p)?()=>{}:it())},{default:f(()=>[E((t(),n("div",ra,[e(ee)?(t(),c(xe(e(ye).check),{key:0,class:"cursor-pointer nc-duplicate-row"})):(t(),c(xe(e(ye).link),{key:1,class:"cursor-pointer nc-duplicate-row"})),W(" "+I(e(ee)?s.$t("labels.copiedRecordURL"):s.$t("labels.copyRecordURL")),1)])),[[re,["c:row-expand:copy-url"]]])]),_:1})),e(p)?x("",!0):(t(),c(mt,{key:1,placement:"bottomRight"},{overlay:f(()=>[v(ut,null,{default:f(()=>[e(p)?x("",!0):(t(),c(Me,{key:0,class:"text-gray-700",onClick:l[2]||(l[2]=i=>e(S)())},{default:f(()=>[E((t(),n("div",da,[(t(),c(xe(e(ye).reload),{class:"cursor-pointer"})),W(" "+I(s.$t("general.reload")),1)])),[[re,["c:row-expand:reload"]]])]),_:1})),!e(p)&&e(O)?(t(),c(Me,{key:1,class:"text-gray-700",onClick:l[3]||(l[3]=i=>e(p)?()=>{}:it())},{default:f(()=>[E((t(),n("div",ca,[(t(),c(xe(e(ye).link),{class:"cursor-pointer nc-duplicate-row"})),W(" "+I(s.$t("labels.copyRecordURL")),1)])),[[re,["c:row-expand:copy-url"]]])]),_:1})):x("",!0),e(N)("dataEdit")&&!e(p)?(t(),c(Me,{key:2,class:"text-gray-700",onClick:l[4]||(l[4]=i=>e(p)?()=>{}:oe())},{default:f(()=>[E((t(),n("div",ua,[(t(),c(xe(e(ye).copy),{class:"cursor-pointer nc-duplicate-row"})),a("span",ma,I(s.$t("labels.duplicateRecord")),1)])),[[re,["c:row-expand:duplicate"]]])]),_:1})):x("",!0),e(N)("dataEdit")&&!e(p)?(t(),c(ct,{key:3})):x("",!0),e(N)("dataEdit")&&!e(p)?(t(),c(Me,{key:4,class:"!text-red-500 !hover:bg-red-50",onClick:l[5]||(l[5]=i=>!e(p)&&rt())},{default:f(()=>[E((t(),n("div",pa,[(t(),c(xe(e(ye).delete),{class:"cursor-pointer nc-delete-row"})),a("span",fa,I(s.$t("activity.deleteRecord")),1)])),[[re,["c:row-expand:delete"]]])]),_:1})):x("",!0)]),_:1})]),default:f(()=>[v($,{type:"secondary",class:"nc-expand-form-more-actions w-10"},{default:f(()=>[v(Ue,{icon:"threeDotVertical",class:"text-md text-gray-700"})]),_:1})]),_:1})),v($,{type:"secondary",class:"nc-expand-form-close-btn w-10","data-testid":"nc-expanded-form-close",onClick:d},{default:f(()=>[v(Ue,{icon:"close",class:"text-md text-gray-700"})]),_:1})])],64))]),a("div",{ref_key:"wrapper",ref:De,class:"flex flex-grow flex-row h-[calc(100%-4rem)] w-full gap-4"},[a("div",{class:ne(["flex xs:w-full flex-col border-1 rounded-xl overflow-hidden border-gray-200 xs:border-0 xs:rounded-none",{"w-full":!e(Xe),"w-2/3":e(Xe)}])},[a("div",{ref_key:"expandedFormScrollWrapper",ref:te,class:"flex flex-col flex-grow mt-2 h-full max-h-full nc-scrollbar-md pb-6 items-center w-full bg-white p-4 xs:p-0"},[(t(!0),n(de,null,Ye(e(Ce),(i,Je)=>E((t(),n("div",{key:i.title,class:ne(["nc-expanded-form-row mt-2 py-2 xs:w-full",`nc-expand-col-${i.title}`]),"col-id":i.id,"data-testid":`nc-expand-col-${i.title}`},[a("div",ha,[a("div",ga,[e(ke)(i)?(t(),c(pt,{key:0,class:"nc-expanded-cell-header h-full",column:i},null,8,["column"])):(t(),c(ft,{key:1,class:"nc-expanded-cell-header",column:i},null,8,["column"]))]),e(Q)?(t(),n(de,{key:0},[e(O)?(t(),n("div",ba)):(t(),c(Ie,{key:1,class:"!h-8.5 !xs:h-9.5 !xs:bg-white sm:mr-21 !w-60 mt-0.75 !rounded-lg !overflow-hidden",active:"",size:"small"}))],64)):(t(),n(de,{key:1},[i.title?(t(),c(jt,{key:0,ref_for:!0,ref:Je?null:Y=>Ze.value=Y,class:ne(["bg-white w-80 xs:w-full px-1 sm:min-h-[35px] xs:min-h-13 flex items-center relative",{"!bg-gray-50 !px-0 !select-text nc-system-field":dt(i)}])},{default:f(()=>[e(ke)(i)?(t(),c(vt,{key:0,modelValue:e(m).row[i.title],"onUpdate:modelValue":Y=>e(m).row[i.title]=Y,row:e(m),column:i,class:ne({"px-1":dt(i)}),"read-only":e(C)},null,8,["modelValue","onUpdate:modelValue","row","column","class","read-only"])):(t(),c(_t,{key:1,modelValue:e(m).row[i.title],"onUpdate:modelValue":[Y=>e(m).row[i.title]=Y,Y=>e(M).add(i.title)],column:i,"edit-enabled":!0,active:!0,"read-only":e(C)},null,8,["modelValue","onUpdate:modelValue","column","read-only"]))]),_:2},1032,["class"])):x("",!0)],64))])],10,ya)),[[bt,("isFormula"in s?s.isFormula:e(ot))(i)||!e(ke)(i)||!e(p)||e(kt)(i)]])),128)),e(A).length>0?(t(),n("div",ka,[$a,v($,{type:"secondary",size:e(O)?"medium":"small",class:"flex-shrink-1 !text-sm",onClick:se},{default:f(()=>[W(I(e(fe)?`Hide ${e(A).length} hidden`:`Show ${e(A).length} hidden`)+" "+I(e(A).length>1?"fields":"field")+" ",1),v(e($t),{class:ne(["ml-1",e(fe)?"transform rotate-180":""])},null,8,["class"])]),_:1},8,["size"]),Ca])):x("",!0),e(A).length>0&&e(fe)?(t(),n("div",Ra,[(t(!0),n(de,null,Ye(e(A),(i,Je)=>E((t(),n("div",{key:i.title,class:ne(["sm:mt-2 py-2 xs:w-full",`nc-expand-col-${i.title}`]),"data-testid":`nc-expand-col-${i.title}`},[a("div",Ma,[a("div",Sa,[e(ke)(i)?(t(),c(pt,{key:0,column:i,class:"nc-expanded-cell-header"},null,8,["column"])):(t(),c(ft,{key:1,class:"nc-expanded-cell-header",column:i},null,8,["column"]))]),e(Q)?(t(),n(de,{key:0},[e(O)?(t(),n("div",Ea)):(t(),c(Ie,{key:1,class:"!h-8.5 !xs:h-12 !xs:bg-white sm:mr-21 w-60 mt-0.75 !rounded-lg !overflow-hidden",active:"",size:"small"}))],64)):(t(),n(de,{key:1},[i.title?(t(),c(Nt,{key:0,ref_for:!0,ref:Je?null:Y=>Ze.value=Y,class:"bg-white rounded-lg w-80 border-1 overflow-hidden border-gray-200 px-1 sm:min-h-[35px] xs:min-h-13 flex items-center relative"},{default:f(()=>[e(ke)(i)?(t(),c(vt,{key:0,modelValue:e(m).row[i.title],"onUpdate:modelValue":Y=>e(m).row[i.title]=Y,row:e(m),column:i,"read-only":e(C)},null,8,["modelValue","onUpdate:modelValue","row","column","read-only"])):(t(),c(_t,{key:1,modelValue:e(m).row[i.title],"onUpdate:modelValue":[Y=>e(m).row[i.title]=Y,Y=>e(M).add(i.title)],column:i,"edit-enabled":!0,active:!0,"read-only":e(C)},null,8,["modelValue","onUpdate:modelValue","column","read-only"]))]),_:2},1536)):x("",!0)],64))])],10,Ia)),[[bt,("isFormula"in s?s.isFormula:e(ot))(i)||!e(ke)(i)||!e(p)||e(kt)(i)]])),128))])):x("",!0)],512),e(N)("dataEdit")?(t(),n("div",Va,[!e(p)&&e(O)?(t(),c(mt,{key:0,placement:"bottomRight"},{overlay:f(()=>[v(ut,null,{default:f(()=>[e(p)?x("",!0):(t(),c(Me,{key:0,class:"text-gray-700",onClick:l[7]||(l[7]=i=>e(S)())},{default:f(()=>[E((t(),n("div",Da,[(t(),c(xe(e(ye).reload),{class:"cursor-pointer"})),W(" "+I(s.$t("general.reload")),1)])),[[re,["c:row-expand:reload"]]])]),_:1})),v(ct),e(N)("dataEdit")&&!e(p)?E((t(),c(Me,{key:1,class:"!text-red-500 !hover:bg-red-50",onClick:l[8]||(l[8]=i=>!e(p)&&rt())},{default:f(()=>[a("div",La,[(t(),c(xe(e(ye).delete),{class:"cursor-pointer nc-delete-row"})),W(" Delete record ")])]),_:1})),[[re,["c:row-expand:delete"]]]):x("",!0)]),_:1})]),default:f(()=>[v($,{type:"secondary",class:"nc-expand-form-more-actions w-10"},{default:f(()=>[v(Ue,{icon:"threeDotVertical",class:"text-md text-gray-700"})]),_:1})]),_:1})):x("",!0),a("div",za,[e(O)?(t(),c($,{key:0,type:"secondary",size:"medium","data-testid":"nc-expanded-form-save",class:"nc-expand-form-save-btn !xs:text-base",onClick:d},{default:f(()=>[Oa]),_:1})):x("",!0),E((t(),c($,{"data-testid":"nc-expanded-form-save",type:"primary",size:"medium",class:"nc-expand-form-save-btn !xs:text-base",disabled:e(M).size===0&&!e(ie),onClick:ae},{default:f(()=>[Ua]),_:1},8,["disabled"])),[[re,["c:row-expand:save"]]])])])):x("",!0)],2),e(Xe)?(t(),n("div",{key:0,class:ne(["nc-comments-drawer border-1 relative border-gray-200 w-1/3 max-w-125 bg-gray-50 rounded-xl min-w-0 overflow-hidden h-full xs:hidden",{active:e(r)&&e(N)("commentList")}])},[v(Bt,{loading:e(Q)},null,8,["loading"])],2)):x("",!0)],512)])]}),_:1},8,["visible","width","class"]),v(Pt,{visible:e(Re),"onUpdate:visible":l[9]||(l[9]=Se=>We(Re)?Re.value=Se:null),"entity-name":"Record","on-delete":()=>Ft()},{"entity-preview":f(()=>[a("span",null,[a("div",Aa,[a("div",Fa,I(e(u)),1)])])]),_:1},8,["visible","on-delete"]),v(wt,{visible:e(je),"onUpdate:visible":l[10]||(l[10]=Se=>We(je)?je.value=Se:null),size:"small"},{default:f(()=>[a("div",Ta,[a("div",ja,I(s.$t("tooltip.saveChanges")),1),a("div",Na,I(s.$t("activity.doYouWantToSaveTheChanges")),1),a("div",Ba,[v($,{type:"secondary",onClick:Ut},{default:f(()=>[W(I(s.$t("labels.discard")),1)]),_:1}),v($,{key:"submit",type:"primary",label:"Rename Table","loading-label":"Renaming Table",onClick:At},{default:f(()=>[W(I(s.$t("tooltip.saveChanges")),1)]),_:1})])])]),_:1},8,["visible"])],64)}}});const Ha=zt(Ka,[["__scopeId","data-v-5f951422"]]),bn=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));export{so as _,Ha as a,bn as i};
