import{b0 as Ae,bl as Le,bm as he,bn as Ce,bo as Se,aZ as qe,aQ as xe,r as Me,O as K,N as We,bi as Te,H as ae,bp as re,ak as z,a7 as _e,bk as me,bq as Ee,av as ie,f as Ne,br as Re,ai as He,g as q,bs as De,ap as $e,aj as te,b as ze,am as oe,as as ge,bt as ue,aw as Ue}from"./entry.5958c07b.js";import{c as Ye,g as Ge,b as Ke,a as se,v as Qe,d as Ve,_ as Xe,u as Ze,e as pe,t as le,f as Fe,h as Be}from"./FormItem.0bbf90a3.js";import{u as Je}from"./useSize.fad35fe8.js";import{e as ve,d as er,c as rr,f as ke,t as tr}from"./identity.34c7640e.js";import{s as nr,o as ar,f as ir}from"./_flatRest.39582a58.js";import{d as lr}from"./debounce.7c24f171.js";import{i as or}from"./isPlainObject.ccda79fe.js";import{u as ur,F as ce}from"./FormItemContext.ddc65fa5.js";function sr(e,r,t){var l=-1,n=e.length;r<0&&(r=-r>n?0:n+r),t=t>n?n:t,t<0&&(t+=n),n=r>t?0:t-r>>>0,r>>>=0;for(var a=Array(n);++l<n;)a[l]=e[l+r];return a}function je(e){var r=!1,t=e.length,l=[];return e.length?new Promise(function(n,a){e.forEach(function(c,y){c.catch(function(P){return r=!0,P}).then(function(P){t-=1,l[y]=P,!(t>0)&&(r&&a(l),n(l))})})}):Promise.resolve([])}function be(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function ye(e,r){return(!r||e!=="hidden")&&e!=="visible"&&e!=="clip"}function fe(e,r){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return ye(t.overflowY,r)||ye(t.overflowX,r)||function(l){var n=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(l);return!!n&&(n.clientHeight<l.scrollHeight||n.clientWidth<l.scrollWidth)}(e)}return!1}function ne(e,r,t,l,n,a,c,y){return a<e&&c>r||a>e&&c<r?0:a<=e&&y<=t||c>=r&&y>=t?a-e-l:c>r&&y<t||a<e&&y>t?c-r+n:0}var we=function(e,r){var t=window,l=r.scrollMode,n=r.block,a=r.inline,c=r.boundary,y=r.skipOverflowHiddenElements,P=typeof c=="function"?c:function(ee){return ee!==c};if(!be(e))throw new TypeError("Invalid target");for(var j,I,L=document.scrollingElement||document.documentElement,C=[],p=e;be(p)&&P(p);){if((p=(I=(j=p).parentElement)==null?j.getRootNode().host||null:I)===L){C.push(p);break}p!=null&&p===document.body&&fe(p)&&!fe(document.documentElement)||p!=null&&fe(p,y)&&C.push(p)}for(var M=t.visualViewport?t.visualViewport.width:innerWidth,x=t.visualViewport?t.visualViewport.height:innerHeight,$=window.scrollX||pageXOffset,W=window.scrollY||pageYOffset,D=e.getBoundingClientRect(),w=D.height,i=D.width,u=D.top,m=D.right,g=D.bottom,F=D.left,f=n==="start"||n==="nearest"?u:n==="end"?g:u+w/2,b=a==="center"?F+i/2:a==="end"?m:F,T=[],E=0;E<C.length;E++){var h=C[E],V=h.getBoundingClientRect(),k=V.height,_=V.width,s=V.top,o=V.right,d=V.bottom,v=V.left;if(l==="if-needed"&&u>=0&&F>=0&&g<=x&&m<=M&&u>=s&&g<=d&&F>=v&&m<=o)return T;var O=getComputedStyle(h),S=parseInt(O.borderLeftWidth,10),H=parseInt(O.borderTopWidth,10),Y=parseInt(O.borderRightWidth,10),N=parseInt(O.borderBottomWidth,10),R=0,A=0,X="offsetWidth"in h?h.offsetWidth-h.clientWidth-S-Y:0,Z="offsetHeight"in h?h.offsetHeight-h.clientHeight-H-N:0,U="offsetWidth"in h?h.offsetWidth===0?0:_/h.offsetWidth:0,G="offsetHeight"in h?h.offsetHeight===0?0:k/h.offsetHeight:0;if(L===h)R=n==="start"?f:n==="end"?f-x:n==="nearest"?ne(W,W+x,x,H,N,W+f,W+f+w,w):f-x/2,A=a==="start"?b:a==="center"?b-M/2:a==="end"?b-M:ne($,$+M,M,S,Y,$+b,$+b+i,i),R=Math.max(0,R+W),A=Math.max(0,A+$);else{R=n==="start"?f-s-H:n==="end"?f-d+N+Z:n==="nearest"?ne(s,d,k,H,N+Z,f,f+w,w):f-(s+k/2)+Z/2,A=a==="start"?b-v-S:a==="center"?b-(v+_/2)+X/2:a==="end"?b-o+Y+X:ne(v,o,_,S,Y+X,b,b+i,i);var B=h.scrollLeft,J=h.scrollTop;f+=J-(R=Math.max(0,Math.min(J+R/G,h.scrollHeight-k/G+Z))),b+=B-(A=Math.max(0,Math.min(B+A/U,h.scrollWidth-_/U+X)))}T.push({el:h,top:R,left:A})}return T};function Ie(e){return e===Object(e)&&Object.keys(e).length!==0}function fr(e,r){r===void 0&&(r="auto");var t="scrollBehavior"in document.body.style;e.forEach(function(l){var n=l.el,a=l.top,c=l.left;n.scroll&&t?n.scroll({top:a,left:c,behavior:r}):(n.scrollTop=a,n.scrollLeft=c)})}function dr(e){return e===!1?{block:"end",inline:"nearest"}:Ie(e)?e:{block:"start",inline:"nearest"}}function cr(e,r){var t=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Ie(r)&&typeof r.behavior=="function")return r.behavior(t?we(e,r):[]);if(t){var l=dr(r);return fr(we(e,l),l.behavior)}}var vr=Math.min;function hr(e,r,t){for(var l=t?Ce:Se,n=e[0].length,a=e.length,c=a,y=Array(a),P=1/0,j=[];c--;){var I=e[c];c&&r&&(I=ve(I,Ae(r))),P=vr(I.length,P),y[c]=!t&&(r||n>=120&&I.length>=120)?new Le(c&&I):void 0}I=e[0];var L=-1,C=y[0];e:for(;++L<n&&j.length<P;){var p=I[L],M=r?r(p):p;if(p=t||p!==0?p:0,!(C?he(C,M):l(j,M,t))){for(c=a;--c;){var x=y[c];if(!(x?he(x,M):l(e[c],M,t)))continue e}C&&C.push(M),j.push(p)}}return j}function mr(e,r){return nr(ar(e,r,er),e+"")}function gr(e){return qe(e)&&xe(e)}function pr(e){return gr(e)?e:[]}var Fr=mr(function(e){var r=ve(e,pr);return r.length&&r[0]===e[0]?hr(r):[]});const br=Fr;function yr(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}function wr(e,r){return r.length<2?e:rr(e,sr(r,0,-1))}function Or(e,r){return r=ke(r,e),e=wr(e,r),e==null||delete e[tr(yr(r))]}function Pr(e){return or(e)?void 0:e}var Mr=1,Er=2,Vr=4,kr=ir(function(e,r){var t={};if(e==null)return t;var l=!1;r=ve(r,function(a){return a=ke(a,e),l||(l=a.length>1),a}),Ye(e,Ge(e),t),l&&(t=Ke(t,Mr|Er|Vr,Pr));for(var n=r.length;n--;)Or(t,r[n]);return t});const jr=kr;function Oe(e){var r=!1;return e&&e.length&&e.every(function(t){return t.required?(r=!0,!1):!0}),r}function Pe(e){return e==null?[]:Array.isArray(e)?e:[e]}function de(e,r,t){var l=e;r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,"");for(var n=r.split("."),a=0,c=n.length;a<c-1&&!(!l&&!t);++a){var y=n[a];if(y in l)l=l[y];else{if(t)throw new Error("please transfer a valid name path to validate!");break}}return{o:l,k:n[a],v:l?l[n[a]]:null,isValid:l&&n[a]in l}}function Ir(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me({}),t=arguments.length>2?arguments[2]:void 0,l=se(K(e)),n=We({}),a=Te([]),c=function(i){re(K(e),z(z({},se(l)),i)),_e(function(){Object.keys(n).forEach(function(u){n[u]={autoLink:!1,required:Oe(K(r)[u])}})})},y=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],u=arguments.length>1?arguments[1]:void 0;return u.length?i.filter(function(m){var g=Pe(m.trigger||"change");return br(g,u).length}):i},P=null,j=function(i){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2?arguments[2]:void 0,g=[],F={},f=function(){var k=i[b],_=de(K(e),k,m);if(!_.isValid)return"continue";F[k]=_.v;var s=y(K(r)[k],Pe(u&&u.trigger));s.length&&g.push(I(k,_.v,s,u||{}).then(function(){return{name:k,errors:[],warnings:[]}}).catch(function(o){var d=[],v=[];return o.forEach(function(O){var S=O.rule.warningOnly,H=O.errors;S?v.push.apply(v,ie(H)):d.push.apply(d,ie(H))}),d.length?Promise.reject({name:k,errors:d,warnings:v}):{name:k,errors:d,warnings:v}}))},b=0;b<i.length;b++)var T=f();var E=je(g);P=E;var h=E.then(function(){return P===E?Promise.resolve(F):Promise.reject([])}).catch(function(V){var k=V.filter(function(_){return _&&_.errors.length});return Promise.reject({values:F,errorFields:k,outOfDate:P!==E})});return h.catch(function(V){return V}),h},I=function(i,u,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},F=Qe([i],u,m,z({validateMessages:Ve},g),!!g.validateFirst);return n[i]?(n[i].validateStatus="validating",F.catch(function(f){return f}).then(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n[i].validateStatus==="validating"){var b,T=f.filter(function(E){return E&&E.errors.length});n[i].validateStatus=T.length?"error":"success",n[i].help=T.length?T.map(function(E){return E.errors}):null,t==null||(b=t.onValidate)===null||b===void 0||b.call(t,i,!T.length,T.length?me(n[i].help[0]):null)}}),F):F.catch(function(f){return f})},L=function(i,u){var m=[],g=!0;i?Array.isArray(i)?m=i:m=[i]:(g=!1,m=a.value);var F=j(m,u||{},g);return F.catch(function(f){return f}),F},C=function(i){var u=[];i?Array.isArray(i)?u=i:u=[i]:u=a.value,u.forEach(function(m){n[m]&&re(n[m],{validateStatus:"",help:null})})},p=function(i){for(var u={autoLink:!1},m=[],g=Array.isArray(i)?i:[i],F=0;F<g.length;F++){var f=g[F];(f==null?void 0:f.validateStatus)==="error"&&(u.validateStatus="error",f.help&&m.push(f.help)),u.required=u.required||(f==null?void 0:f.required)}return u.help=m,u},M=l,x=!0,$=function(i){var u=[];a.value.forEach(function(m){var g=de(i,m,!1),F=de(M,m,!1),f=x&&(t==null?void 0:t.immediate)&&g.isValid;(f||!Ee(g.v,F.v))&&u.push(m)}),L(u,{trigger:"change"}),x=!1,M=se(me(i))},W=t==null?void 0:t.debounce,D=!0;return ae(r,function(){a.value=r?Object.keys(K(r)):[],!D&&t&&t.validateOnRuleChange&&L(),D=!1},{deep:!0,immediate:!0}),ae(a,function(){var w={};a.value.forEach(function(u){w[u]=re({},n[u],{autoLink:!1,required:Oe(K(r)[u])}),delete n[u]});for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];re(n,w)},{immediate:!0}),ae(e,W&&W.wait?lr($,W.wait,jr(W,["wait"])):$,{immediate:t&&!!t.immediate,deep:!0}),{modelRef:e,rulesRef:r,initialModel:l,validateInfos:n,resetFields:c,validate:L,validateField:I,mergeValidateInfo:p,clearValidate:C}}var Ar=function(){return{layout:oe.oneOf(ge("horizontal","inline","vertical")),labelCol:{type:Object},wrapperCol:{type:Object},colon:{type:Boolean,default:void 0},labelAlign:oe.oneOf(ge("left","right")),labelWrap:{type:Boolean,default:void 0},prefixCls:String,requiredMark:{type:[String,Boolean],default:void 0},hideRequiredMark:{type:Boolean,default:void 0},model:oe.object,rules:{type:Object},validateMessages:{type:Object,default:void 0},validateOnRuleChange:{type:Boolean,default:void 0},scrollToFirstError:{type:[Boolean,Object]},onSubmit:Function,name:String,validateTrigger:{type:[String,Array]},size:{type:String},onValuesChange:{type:Function},onFieldsChange:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function}}};function Lr(e,r){return Ee(le(e),le(r))}var Cr=Ne({compatConfig:{MODE:3},name:"AForm",inheritAttrs:!1,props:Re(Ar(),{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:Xe,useForm:Ir,setup:function(r,t){var l=t.emit,n=t.slots,a=t.expose,c=t.attrs,y=Je(r),P=He("form",r),j=P.prefixCls,I=P.direction,L=P.form,C=q(function(){return r.requiredMark===""||r.requiredMark}),p=q(function(){var s;return C.value!==void 0?C.value:L&&((s=L.value)===null||s===void 0?void 0:s.requiredMark)!==void 0?L.value.requiredMark:!r.hideRequiredMark}),M=q(function(){var s,o;return(s=r.colon)!==null&&s!==void 0?s:(o=L.value)===null||o===void 0?void 0:o.colon}),x=De(),$=x.validateMessages,W=q(function(){return z(z(z({},Ve),$.value),r.validateMessages)}),D=q(function(){var s;return $e(j.value,(s={},te(s,"".concat(j.value,"-").concat(r.layout),!0),te(s,"".concat(j.value,"-hide-required-mark"),p.value===!1),te(s,"".concat(j.value,"-rtl"),I.value==="rtl"),te(s,"".concat(j.value,"-").concat(y.value),y.value),s))}),w=Me(),i={},u=function(o,d){i[o]=d},m=function(o){delete i[o]},g=function(o){var d=!!o,v=d?le(o).map(Fe):[];return d?Object.values(i).filter(function(O){return v.findIndex(function(S){return Lr(S,O.fieldName.value)})>-1}):Object.values(i)},F=function(o){if(!r.model){ue(!1,"Form","model is required for resetFields to work.");return}g(o).forEach(function(d){d.resetField()})},f=function(o){g(o).forEach(function(d){d.clearValidate()})},b=function(o){var d=r.scrollToFirstError;if(l("finishFailed",o),d&&o.errorFields.length){var v={};Ue(d)==="object"&&(v=d),E(o.errorFields[0].name,v)}},T=function(){return k.apply(void 0,arguments)},E=function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=g(o?[o]:void 0);if(v.length){var O=v[0].fieldId.value,S=O?document.getElementById(O):null;S&&cr(S,z({scrollMode:"if-needed",block:"nearest"},d))}},h=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(o===!0){var d=[];return Object.values(i).forEach(function(v){var O=v.namePath;d.push(O.value)}),pe(r.model,d)}else return pe(r.model,o)},V=function(o,d){if(ue(!(o instanceof Function),"Form","validateFields/validateField/validate not support callback, please use promise instead"),!r.model)return ue(!1,"Form","model is required for validateFields to work."),Promise.reject("Form `model` is required for validateFields to work.");var v=!!o,O=v?le(o).map(Fe):[],S=[];Object.values(i).forEach(function(N){var R;if(v||O.push(N.namePath.value),!!((R=N.rules)!==null&&R!==void 0&&R.value.length)){var A=N.namePath.value;if(!v||Be(O,A)){var X=N.validateRules(z({validateMessages:W.value},d));S.push(X.then(function(){return{name:A,errors:[],warnings:[]}}).catch(function(Z){var U=[],G=[];return Z.forEach(function(B){var J=B.rule.warningOnly,ee=B.errors;J?G.push.apply(G,ie(ee)):U.push.apply(U,ie(ee))}),U.length?Promise.reject({name:A,errors:U,warnings:G}):{name:A,errors:U,warnings:G}}))}}});var H=je(S);w.value=H;var Y=H.then(function(){return w.value===H?Promise.resolve(h(O)):Promise.reject([])}).catch(function(N){var R=N.filter(function(A){return A&&A.errors.length});return Promise.reject({values:h(O),errorFields:R,outOfDate:w.value!==H})});return Y.catch(function(N){return N}),Y},k=function(){return V.apply(void 0,arguments)},_=function(o){if(o.preventDefault(),o.stopPropagation(),l("submit",o),r.model){var d=V();d.then(function(v){l("finish",v)}).catch(function(v){b(v)})}};return a({resetFields:F,clearValidate:f,validateFields:V,getFieldsValue:h,validate:T,scrollToField:E}),Ze({model:q(function(){return r.model}),name:q(function(){return r.name}),labelAlign:q(function(){return r.labelAlign}),labelCol:q(function(){return r.labelCol}),labelWrap:q(function(){return r.labelWrap}),wrapperCol:q(function(){return r.wrapperCol}),vertical:q(function(){return r.layout==="vertical"}),colon:M,requiredMark:p,validateTrigger:q(function(){return r.validateTrigger}),rules:q(function(){return r.rules}),addField:u,removeField:m,onValidate:function(o,d,v){l("validate",o,d,v)},validateMessages:W}),ae(function(){return r.rules},function(){r.validateOnRuleChange&&V()}),function(){var s;return ze("form",z(z({},c),{},{onSubmit:_,class:[D.value,c.class]}),[(s=n.default)===null||s===void 0?void 0:s.call(n)])}}});const Q=Cr;Q.useInjectFormItemContext=ur;Q.ItemRest=ce;Q.install=function(e){return e.component(Q.name,Q),e.component(Q.Item.name,Q.Item),e.component(ce.name,ce),e};export{Q as F};
