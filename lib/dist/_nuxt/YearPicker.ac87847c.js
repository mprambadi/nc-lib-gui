import{f as x,$ as I,bb as u,r as o,M as P,g as m,cp as $,H as E,cg as j,o as O,P as h,w as S,O as e,W as M,S as _,bv as B}from"./entry.5958c07b.js";import{i as D,m as K,E as F,r as R,l as U}from"./index.9b87fcff.js";import{u as q}from"./index.c35df397.js";import{D as z}from"./dayjs.d5bc2934.js";import{_ as A}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.07afd4b8.js";import"./createForOfIteratorHelper.33de41ba.js";import"./index.27219acd.js";import"./useState.b891c8bb.js";import"./useMemo.1dd071d8.js";import"./FormItemContext.ddc65fa5.js";const G=x({__name:"YearPicker",props:{modelValue:{},isPk:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:C}){const f=C,{showNull:v}=I(),p=u(D,o(!1)),i=u(K,o(!1)),d=u(F,o(!1)),k=u(R,o(!1)),y=u(U,o(!1)),b=o(!1),{t:c}=P(),s=m({get(){if(!n.modelValue)return;const a=$(n.modelValue.toString(),"YYYY");if(!a.isValid()){b.value=!0;return}return a},set(a){if(!a){f("update:modelValue",null);return}a!=null&&a.isValid()&&f("update:modelValue",a.format("YYYY"))}}),l=o(!1),w=`picker_${Math.floor(Math.random()*99999)}`;E(l,a=>{a?j(document.querySelector(`.${w}`),()=>l.value=!1):d.value=!1},{flush:"post"});const V=m(()=>k.value&&(n.modelValue===""||n.modelValue===null)?c("labels.optional"):n.modelValue===null&&v.value?c("general.null").toUpperCase():b.value?c("msg.invalidTime"):""),Y=m(()=>p.value||(p.value||s.value&&n.isPk)&&!i.value&&!d.value?!1:l.value);return q(i,a=>{switch(a.key){case"Enter":a.stopPropagation(),l.value=!0;break;case"Escape":l.value&&(a.stopPropagation(),l.value=!1);break}}),(a,t)=>{const g=z;return O(),h(g,{value:e(s),"onUpdate:value":t[0]||(t[0]=r=>M(s)?s.value=r:null),tabindex:0,picker:"year",bordered:!1,class:_(["!w-full !py-1 !border-none !text-current",{"nc-null":a.modelValue===null&&e(v),"!px-2":e(y),"!px-0":!e(y)}]),placeholder:e(V),"allow-clear":!e(p)&&!e(s)&&!a.isPk||e(k),"input-read-only":!0,open:e(Y),"dropdown-class-name":`${w} nc-picker-year children:border-1 children:border-gray-200 ${e(l)?"active":""}`,onClick:t[1]||(t[1]=r=>l.value=(e(i)||e(d))&&!e(l)),onChange:t[2]||(t[2]=r=>l.value=(e(i)||e(d))&&!e(l)),onOk:t[3]||(t[3]=r=>l.value=!e(l)),onKeydown:t[4]||(t[4]=B(r=>l.value=!e(l),["enter"]))},{suffixIcon:S(()=>[]),_:1},8,["value","class","placeholder","allow-clear","open","dropdown-class-name"])}}});const le=A(G,[["__scopeId","data-v-89048e55"]]);export{le as default};
