import{f as ae,M as ne,aF as N,$ as ie,r as d,bb as h,ba as se,aM as re,g as c,ge as ue,o as f,c as E,O as l,P as T,T as k,b as P,w,d as pe,t as z,a as F,gf as me,U as de,W as H,cb as V,a0 as J,a1 as Q,p as ce,e as ve}from"./entry.5958c07b.js";import{_ as _e}from"./Tooltip.vue.971897f4.js";import{_ as fe}from"./EditOrAddProvider.vue.31035ffc.js";import{f as be,C as ye,M as ke,c as Ce,l as Ie}from"./index.9b87fcff.js";import{b as U,a as q,i as W,d as G,c as K,e as $e}from"./virtualCell.427fa223.js";import{b as he}from"./bases.e6c8e3c4.js";import{D as we}from"./index.dc13a4d6.js";import{_ as Me}from"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.vue.129448d5.js";import"./Button.vue.c3ca0e8f.js";import"./index.55641318.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./isSymbol.114fe557.js";import"./views.4281cbf1.js";import"./useSharedView.e8f68616.js";import"./validation.2de04583.js";import"./index.0feaca99.js";import"./index.b06c8b67.js";import"./FormItem.0bbf90a3.js";import"./identity.34c7640e.js";import"./_getPrototype.c1f3bae2.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./toArray.fd74ce6f.js";import"./FormItemContext.ddc65fa5.js";import"./useSize.fad35fe8.js";import"./_flatRest.39582a58.js";import"./isPlainObject.ccda79fe.js";import"./vuedraggable.umd.00f5fccc.js";import"./v3-infinite-loading.660bd977.js";import"./index.ae235b22.js";import"./Input.dca3a2bc.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.a517903c.js";import"./TextArea.9074ff05.js";import"./Password.f52125e7.js";import"./cell.165313cd.js";import"./index.5e1434a7.js";import"./Checkbox.2e7b0035.js";import"./createForOfIteratorHelper.33de41ba.js";import"./index.5c6e4286.js";import"./isMobile.e2e89480.js";import"./useMemo.1dd071d8.js";import"./useState.b891c8bb.js";import"./CheckOutlined.1fe5f230.js";import"./Dropdown.041b2468.js";import"./RightOutlined.7161c742.js";const Oe=J(()=>Q(()=>import("./VirtualCellIcon.aeca9423.js"),["./VirtualCellIcon.aeca9423.js","./index.9b87fcff.js","./entry.5958c07b.js","./entry.bdecbb78.css","./virtualCell.427fa223.js"],import.meta.url).then(n=>n.default||n)),xe=J(()=>Q(()=>import("./Menu.005dabcb.js"),["./Menu.005dabcb.js","./Icon.vue.129448d5.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Menu.vue.6c65c050.js","./_plugin-vue_export-helper.c27b6911.js","./Menu.eff4a609.css","./CellIcon.b1340151.js","./index.9b87fcff.js","./cell.165313cd.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./DeleteModal.vue.0320a9db.js","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./Button.ff10bcb0.css","./Modal.vue.ee5af191.js","./DeleteModal.7ab6f524.css","./useSmartsheetStore.f1a70558.js","./views.4281cbf1.js","./useSharedView.e8f68616.js","./index.e61e381a.js","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./FormItemContext.ddc65fa5.js","./createForOfIteratorHelper.33de41ba.js","./index.07078df6.js","./useViewSorts.a16054fa.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./Menu.476baf6e.css"],import.meta.url).then(n=>n.default||n)),X=n=>(ce("data-v-03ebd1c0"),n=n(),ve(),n),ge=["data-test-id"],De={key:1,class:"text-red-500"},Ee=X(()=>F("div",{class:"flex-1"},null,-1)),Te=X(()=>F("div",null,null,-1)),Ve=ae({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean}},setup(n){const M=n,{t:O}=ne(),e=N(M,"column"),Y=N(M,"hideMenu"),{isMobileMode:A}=ie(),r=d(!1),b=d(!1),B=h(be,d(!1));se(ye,e);const{metas:Z}=he(),{isUIAllowed:x}=re(),s=h(ke,d()),g=h(Ce,d(!1)),D=h(Ie,d(!1)),R=c(()=>{var o;return(o=e.value)==null?void 0:o.colOptions}),S=c(()=>{var o;return(o=s==null?void 0:s.value)==null?void 0:o.title}),L=c(()=>{var o,t,a,i,u,p;return U(e.value)||q(e.value)||W(e.value)?(o=e.value)==null?void 0:o.colOptions:(a=(t=e==null?void 0:e.value)==null?void 0:t.colOptions)!=null&&a.fk_relation_column_id?(p=(u=(i=s==null?void 0:s.value)==null?void 0:i.columns)==null?void 0:u.find(v=>{var _,m;return v.id===((m=(_=e==null?void 0:e.value)==null?void 0:_.colOptions)==null?void 0:m.fk_relation_column_id)}))==null?void 0:p.colOptions:null}),C=c(()=>{var o,t,a;return((o=L.value)==null?void 0:o.fk_related_model_id)&&((a=Z.value)==null?void 0:a[(t=L.value)==null?void 0:t.fk_related_model_id])}),y=c(()=>{var o;return(o=C.value)==null?void 0:o.title}),I=c(()=>{var o,t,a;if((o=C.value)!=null&&o.columns){if(G(e.value))return(t=C.value)==null?void 0:t.columns.find(i=>i.id===R.value.fk_rollup_column_id);if(K(e.value))return(a=C.value)==null?void 0:a.columns.find(i=>i.id===R.value.fk_lookup_column_id)}return""}),ee=c(()=>{var o,t,a,i,u,p,v;return e.value?q(e.value)?`'${S.value}' ${O("labels.hasMany")} '${y.value}'`:U(e.value)?`'${S.value}' & '${y.value}' ${O("labels.manyToMany")}`:W(e.value)?`'${(o=e==null?void 0:e.value)==null?void 0:o.title}' ${O("labels.belongsTo")} '${y.value}'`:K(e.value)?`'${I.value.title}' from '${y.value}' (${I.value.uidt})`:$e(e.value)?`Formula - ${ue((a=(t=e.value)==null?void 0:t.colOptions)==null?void 0:a.formula,(i=s==null?void 0:s.value)==null?void 0:i.columns,(p=(u=e.value)==null?void 0:u.colOptions)==null?void 0:p.formula_raw)}`:G(e.value)?`'${I.value.title}' of '${y.value}' (${I.value.uidt})`:((v=e==null?void 0:e.value)==null?void 0:v.title)||"":""}),$=d(null),oe=async o=>{$.value=o,r.value=!0},j=()=>{$.value=null,r.value=!1},te=()=>{B.value||!g.value&&!D.value&&x("fieldEdit")&&!A.value&&(r.value=!0)},le=o=>{B.value||g.value||D.value||!x("fieldEdit")&&!A.value||(o.preventDefault(),o.stopPropagation(),b.value=!b.value)};return(o,t)=>{var _;const a=Oe,i=_e,u=xe,p=fe,v=we;return f(),E("div",{class:"flex items-center w-full h-full text-xs text-gray-500 font-weight-medium",onDblclick:te,onContextmenu:V(le,["right"])},[l(e)&&!M.hideIcon?(f(),T(a,{key:0})):k("",!0),P(i,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":""},{title:w(()=>[pe(z(l(ee)),1)]),default:w(()=>[F("span",{"data-test-id":l(e).title},z(l(e).title),9,ge)]),_:1}),l(me)(l(e),((_=l(s))==null?void 0:_.columns)||[])||o.required?(f(),E("span",De,"Â *")):k("",!0),l(Y)?k("",!0):(f(),E(de,{key:2},[Ee,!l(g)&&l(x)("fieldEdit")&&!l(D)?(f(),T(u,{key:0,"is-open":l(b),"onUpdate:isOpen":t[0]||(t[0]=m=>H(b)?b.value=m:null),virtual:!0,onAddColumn:oe,onEdit:t[1]||(t[1]=m=>r.value=!0)},null,8,["is-open"])):k("",!0)],64)),P(v,{visible:l(r),"onUpdate:visible":t[4]||(t[4]=m=>H(r)?r.value=m:null),class:"h-full",trigger:["click"],placement:"bottomRight","overlay-class-name":"nc-dropdown-edit-column"},{overlay:w(()=>[l(r)?(f(),T(p,{key:0,column:l($)?null:l(e),"column-position":l($),class:"w-full",onSubmit:j,onCancel:j,onClick:t[2]||(t[2]=V(()=>{},["stop"])),onKeydown:t[3]||(t[3]=V(()=>{},["stop"]))},null,8,["column","column-position"])):k("",!0)]),default:w(()=>[Te]),_:1},8,["visible"])],32)}}});const go=Me(Ve,[["__scopeId","data-v-03ebd1c0"]]);export{go as default};
