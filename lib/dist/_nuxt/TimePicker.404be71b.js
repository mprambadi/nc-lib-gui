import{ak as l,f as H,cj as D,r as p,b as j,aq as N,bp as U,$ as A,bb as P,M as q,g as w,cp as O,H as G,cg as W,o as z,P as K,w as L,O as d,W as Z,S as J}from"./entry.5958c07b.js";import{i as Q,m as X,E as ee,r as ne,C as ae,l as oe}from"./index.9b87fcff.js";import{a as te}from"./bases.e6c8e3c4.js";import{u as re}from"./index.c35df397.js";import{g as le,c as S,d as ie,r as ue,a as se}from"./index.07afd4b8.js";import{u as M}from"./FormItemContext.ddc65fa5.js";import{_ as de}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.0feaca99.js";import"./createForOfIteratorHelper.33de41ba.js";import"./index.27219acd.js";import"./useState.b891c8bb.js";import"./useMemo.1dd071d8.js";var R=function(){return{format:String,showNow:{type:Boolean,default:void 0},showHour:{type:Boolean,default:void 0},showMinute:{type:Boolean,default:void 0},showSecond:{type:Boolean,default:void 0},use12Hours:{type:Boolean,default:void 0},hourStep:Number,minuteStep:Number,secondStep:Number,hideDisabledOptions:{type:Boolean,default:void 0},popupClassName:String}};function ce(c){var v=le(c,l(l({},R()),{},{order:{type:Boolean,default:!0}})),I=v.TimePicker,$=v.RangePicker,B=H({name:"ATimePicker",inheritAttrs:!1,props:l(l(l(l({},S()),ie()),R()),{},{addon:{type:Function}}),slot:["addon","renderExtraFooter","suffixIcon","clearIcon"],setup:function(u,m){var k=m.slots,g=m.expose,o=m.emit,x=m.attrs,f=M();D(!(k.addon||u.addon),"TimePicker","`addon` is deprecated. Please use `v-slot:renderExtraFooter` instead.");var s=p();g({focus:function(){var e;(e=s.value)===null||e===void 0||e.focus()},blur:function(){var e;(e=s.value)===null||e===void 0||e.blur()}});var i=function(e,r){o("update:value",e),o("change",e,r),f.onFieldChange()},C=function(e){o("update:open",e),o("openChange",e)},T=function(e){o("focus",e)},y=function(e){o("blur",e),f.onFieldBlur()},a=function(e){o("ok",e)};return function(){var t=u.id,e=t===void 0?f.id.value:t;return j(I,l(l(l({},x),N(u,["onUpdate:value","onUpdate:open"])),{},{id:e,dropdownClassName:u.popupClassName,mode:void 0,ref:s,renderExtraFooter:u.addon||k.addon||u.renderExtraFooter||k.renderExtraFooter,onChange:i,onOpenChange:C,onFocus:T,onBlur:y,onOk:a}),k)}}}),h=H({name:"ATimeRangePicker",inheritAttrs:!1,props:l(l(l(l({},S()),ue()),R()),{},{order:{type:Boolean,default:!0}}),slot:["renderExtraFooter","suffixIcon","clearIcon"],setup:function(u,m){var k=m.slots,g=m.expose,o=m.emit,x=m.attrs,f=p(),s=M();g({focus:function(){var n;(n=f.value)===null||n===void 0||n.focus()},blur:function(){var n;(n=f.value)===null||n===void 0||n.blur()}});var i=function(n,F){o("update:value",n),o("change",n,F),s.onFieldChange()},C=function(n){o("update:open",n),o("openChange",n)},T=function(n){o("focus",n)},y=function(n){o("blur",n),s.onFieldBlur()},a=function(n,F){o("panelChange",n,F)},t=function(n){o("ok",n)},e=function(n,F,_){o("calendarChange",n,F,_)};return function(){var r=u.id,n=r===void 0?s.id.value:r;return j($,l(l(l({},x),N(u,["onUpdate:open","onUpdate:value"])),{},{id:n,dropdownClassName:u.popupClassName,picker:"time",mode:void 0,ref:f,onChange:i,onOpenChange:C,onFocus:T,onBlur:y,onPanelChange:a,onOk:t,onCalendarChange:e}),k)}}});return{TimePicker:B,TimeRangePicker:h}}var Y=ce(se),V=Y.TimePicker,E=Y.TimeRangePicker;const me=U(V,{TimePicker:V,TimeRangePicker:E,install:function(v){return v.component(V.name,V),v.component(E.name,E),v}}),fe=H({__name:"TimePicker",props:{modelValue:{},isPk:{type:Boolean}},emits:["update:modelValue"],setup(c,{emit:v}){const I=v,{isMysql:$}=te(),{showNull:B}=A(),h=P(Q,p(!1)),b=P(X,p(!1)),u=P(ee,p(!1)),m=P(ne,p(!1)),k=P(ae),g=P(oe,p(!1)),o=p(!1),x=$(k.value.source_id)?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ssZ",{t:f}=q(),s=w({get(){if(!c.modelValue)return;let a=O(c.modelValue);if(a.isValid()||(a=O(c.modelValue,"HH:mm:ss")),a.isValid()||(a=O(`1999-01-01 ${c.modelValue}`)),!a.isValid()){o.value=!0;return}return a},set(a){if(!a){I("update:modelValue",null);return}if(a.isValid()){const t=a.format("HH:mm"),e=O(`1999-01-01 ${t}:00`);I("update:modelValue",e.format(x))}}}),i=p(!1),C=`picker_${Math.floor(Math.random()*99999)}`;G(i,a=>{a?W(document.querySelector(`.${C}`),()=>i.value=!1):u.value=!1},{flush:"post"});const T=w(()=>m.value&&(c.modelValue===""||c.modelValue===null)?f("labels.optional"):c.modelValue===null&&B.value?f("general.null").toUpperCase():o.value?f("msg.invalidTime"):""),y=w(()=>h.value||(h.value||s.value&&c.isPk)&&!b.value&&!u.value?!1:i.value);return re(b,a=>{switch(a.key){case"Enter":a.stopPropagation(),i.value=!0;break;case"Escape":i.value&&(a.stopPropagation(),i.value=!1);break}}),(a,t)=>{const e=me;return z(),K(e,{value:d(s),"onUpdate:value":t[0]||(t[0]=r=>Z(s)?s.value=r:null),"show-time":!0,bordered:!1,"use12-hours":"",format:"HH:mm",class:J(["!w-full !py-1 !border-none !text-current",{"nc-null":a.modelValue===null&&d(B),"!px-2":d(g),"!px-0":!d(g)}]),placeholder:d(T),"allow-clear":!d(h)&&!d(s)&&!a.isPk,"input-read-only":!0,open:d(y),"popup-class-name":`${C} nc-picker-time children:border-1 children:border-gray-200 ${d(i)?"active":""}`,onClick:t[1]||(t[1]=r=>i.value=(d(b)||d(u))&&!d(i)),onOk:t[2]||(t[2]=r=>i.value=!d(i))},{suffixIcon:L(()=>[]),_:1},8,["value","class","placeholder","allow-clear","open","popup-class-name"])}}});const Ie=de(fe,[["__scopeId","data-v-46f61e1a"]]);export{Ie as default};
