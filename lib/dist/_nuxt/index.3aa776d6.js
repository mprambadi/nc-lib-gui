import{o as t,c as g,dz as zs,f as ie,bF as X,$ as xe,g as oe,c9 as Te,O as e,b as s,w as o,d as A,t as h,au as G,P as b,a as n,S as te,T as U,M as bt,a5 as ze,fi as ns,fj as et,r as S,H as Pe,a7 as Mt,W as ne,X as re,Y as Ie,aM as Ee,a9 as Pt,cS as Gs,N as ds,F as us,c_ as Fs,c$ as Ws,bv as vt,bH as ps,C as je,L as yt,ad as gt,cE as ms,d1 as tt,i as lt,aF as Re,bb as Se,cG as Hs,cZ as qs,n as _s,co as Ks,D as Xe,cb as ge,eN as ye,p as Et,e as Nt,ba as Je,fk as Js,ce as Ys,a0 as st,a1 as at,U as me,V as xt,fl as Qs,cf as Zs,c8 as Xs,Q as ea,R as ta,fm as sa,fn as ls,fo as aa,a3 as oa,u as Bt,fp as na,dy as la,ey as ia,fq as is,af as fs,a8 as ra,a6 as rs,bz as ca,eR as da,fr as ua,bR as pa,fs as ma,ca as _a,cd as fa}from"./entry.5958c07b.js";import{_ as Le}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as Ve}from"./Icon.vue.129448d5.js";import{_ as Ce,a as Lt}from"./Button.vue.c3ca0e8f.js";import{_ as wt}from"./Tooltip.vue.971897f4.js";import{e as Ye,c as we,u as Ae,a as Ne,b as ht,d as Qe,f as vs,p as va}from"./bases.e6c8e3c4.js";import{u as kt}from"./sidebar.f5d81718.js";import{u as Be}from"./views.4281cbf1.js";import{_ as bs}from"./Input.8209df88.js";import"./index.36af7517.js";import{_ as $t}from"./ProjectIcon.07026955.js";import{_ as ys}from"./Modal.vue.0f13e4cb.js";import{d as ba,c as ya}from"./validation.2de04583.js";import"./index.ae235b22.js";import{I as Ot}from"./Input.dca3a2bc.js";import{F as Vt}from"./index.b06c8b67.js";import{_ as gs}from"./FormItem.0bbf90a3.js";import{u as ot}from"./tab.09fe72b2.js";import{_ as ga,a as xa,u as cs,b as xs,c as wa}from"./AirtableImport.vue.788302cf.js";import{_ as it}from"./Modal.vue.ee5af191.js";import{C as Ut}from"./index.5e1434a7.js";import{_ as Rt}from"./index.07078df6.js";import{_ as ha}from"./View.vue.611b527c.js";import{_ as rt,a as It}from"./Menu.vue.6c65c050.js";import{_ as ws}from"./Divider.7b1fba82.js";import{_ as ka,a as hs,b as $a,c as Ia}from"./ViewActionMenu.ee837fe7.js";import{P as Dt,d as At,e as ct,A as Da,M as Sa,f as Ta,g as zt,a as ks}from"./index.9b87fcff.js";import{u as Me}from"./index.d36047f6.js";import{_ as dt}from"./Dropdown.vue.0d2ed10f.js";import{S as $s}from"./sortable.esm.85e2743d.js";import{_ as ja}from"./TableIcon.vue.694329e0.js";import{_ as Is}from"./DeleteModal.vue.0320a9db.js";import{_ as Ds}from"./ViewIcon.vue.64eaa04d.js";import{i as Ke}from"./index.025c8e21.js";import{o as Ca}from"./urlUtils.18c797fa.js";import{u as Ss}from"./useCopy.0241e728.js";import{S as Va}from"./index.55641318.js";import{_ as Ma,C as Pa}from"./index.0c7dde5a.js";import{I as Ea}from"./inbox.954d1e59.js";import{_ as Na}from"./UserIcon.74e37fbe.js";import{_ as Ba}from"./nuxt-link.39d6b1ec.js";import{u as La}from"./users.a4c19485.js";import{_ as Oa}from"./index.9c85d421.js";import{_ as Ua}from"./Select.vue.8e3ebbe2.js";import{u as Ts}from"./useCopySharedBase.98b2da90.js";import"./index.0feaca99.js";import"./useSharedView.e8f68616.js";import"./Element.a1e4f356.js";import"./Image.c63a7a56.js";import"./SearchOutlined.a517903c.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";import"./TextArea.9074ff05.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.ddc65fa5.js";import"./Password.f52125e7.js";import"./useSize.fad35fe8.js";import"./identity.34c7640e.js";import"./isSymbol.114fe557.js";import"./_flatRest.39582a58.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./toArray.fd74ce6f.js";import"./workerUtils.cf9cb0a4.js";import"./index.44969945.js";import"./CheckOutlined.1fe5f230.js";import"./useRefs.40c81887.js";import"./useState.b891c8bb.js";import"./index.912f77e8.js";import"./Dropdown.041b2468.js";import"./isMobile.e2e89480.js";import"./index.97da8ac6.js";import"./index.5c6e4286.js";import"./useMemo.1dd071d8.js";import"./index.357e1bba.js";import"./index.f98c1d80.js";import"./Checkbox.2e7b0035.js";import"./createForOfIteratorHelper.33de41ba.js";import"./Overlay.df272e53.js";import"./index.dc13a4d6.js";import"./RightOutlined.7161c742.js";import"./iconify.e2b5aaa4.js";const Ra=""+new URL("nocodb.807b2403.png",import.meta.url).href;const Aa={},za={class:"flex flex-row flex-grow pl-0.5 pr-1 py-0.5 rounded-md w-full",style:{"max-width":"calc(100% - 2.5rem)"}},Ga=zs('<div class="flex-grow min-w-20" data-v-22d00884><div data-testid="nc-workspace-menu" class="flex items-center nc-workspace-menu overflow-hidden py-1.25 pr-0.25 justify-center w-full ml-2" data-v-22d00884><a class="transition-all duration-200 transform w-24 min-w-10" href="https://github.com/nocodb/nocodb" target="_blank" rel="noopener noreferrer" data-v-22d00884><img alt="NocoDB" src="'+Ra+'" data-v-22d00884></a><div class="flex flex-grow" data-v-22d00884></div></div></div>',1),Fa=[Ga];function Wa(_,L){return t(),g("div",za,Fa)}const Ha=Le(Aa,[["render",Wa],["__scopeId","data-v-22d00884"]]),qa=["data-workspace-title"],Ka={key:0,class:"flex flex-row items-center w-full"},Ja=n("div",{class:"flex flex-grow min-w-1"},null,-1),Ya={class:"flex items-center text-inherit"},Qa={key:1,class:"flex flex-row items-center w-full mt-0.25 ml-2.5 gap-x-3"},Za=ie({__name:"Header",setup(_){const L=Ye(),{isLeftSidebarOpen:m}=X(kt()),{activeWorkspace:c,isWorkspaceLoading:l}=X(L),{activeViewTitleOrId:T}=X(Be()),{activeTableId:B}=X(we()),{isMobileMode:j}=xe(),I=oe(()=>!(j.value&&!T.value&&!B.value));return(k,a)=>{var w;const x=Ha,$=Ve,D=Ce,O=wt,d=bs,r=Te("e");return t(),g("div",{class:"flex items-center nc-sidebar-header w-full border-b-1 border-gray-200 group md:px-2 md:py-1.2 xs:px-1 xs:py-1","data-workspace-title":(w=e(c))==null?void 0:w.title,style:{height:"var(--topbar-height)"}},[e(l)?(t(),g("div",Qa,[s(d,{active:!0,class:"!w-6 !h-6 !rounded overflow-hidden"}),s(d,{active:!0,class:"!w-40 !h-6 !rounded overflow-hidden"})])):(t(),g("div",Ka,[s(x),Ja,s(O,{class:te(["flex",{"!opacity-100":!e(m)}]),placement:"bottom","hide-on-click":""},{title:o(()=>[A(h(e(m)?`${k.$t("title.hideSidebar")}`:`${k.$t("title.showSidebar")}`),1)]),default:o(()=>[e(I)?G((t(),b(D,{key:0,type:e(j)?"secondary":"text",size:e(j)?"medium":"small",class:"nc-sidebar-left-toggle-icon !text-gray-700 !hover:text-gray-800 !xs:h-10.5 !xs:max-h-10.5 !xs:max-w-10.5 !md:hover:bg-gray-200",onClick:a[0]||(a[0]=u=>m.value=!e(m))},{default:o(()=>[n("div",Ya,[e(j)?(t(),b($,{key:0,icon:"close"})):(t(),b($,{key:1,icon:"doubleLeftArrow",class:te(["duration-150 transition-all !text-lg -mt-0.5",{"transform rotate-180":!e(m)}])},null,8,["class"]))])]),_:1},8,["type","size"])),[[r,["c:leftSidebar:hideToggle"]]]):U("",!0)]),_:1},8,["class"])]))],8,qa)}}}),Xa={};function eo(_,L){return t(),g("span")}const to=Le(Xa,[["render",eo]]),so={class:"flex flex-row items-center"},ao={class:"mt-3"},oo={class:"flex flex-row justify-end mt-7 gap-x-2"},no=ie({__name:"CreateProjectDlg",props:{modelValue:{type:Boolean},type:{}},emits:["update:modelValue"],setup(_,{emit:L}){const m=_,c=L,{t:l}=bt(),T=ze(m,"modelValue",c),B=ns(()=>m.type??et.DB),j=Ae(),{createProject:I}=j,{navigateToProject:k}=xe(),a=[{required:!0,message:l("msg.info.dbNameRequired")},ba],x=S(),$=S({title:""}),D=S(!1),O=async()=>{D.value=!0;try{const w=await I({type:B.value,title:$.value.title});k({baseId:w.id,type:B.value,workspaceId:"nc"}),T.value=!1}catch(w){re.error(await Ie(w))}finally{setTimeout(()=>{D.value=!1},500)}},d=S();Pe(T,async(w,u)=>{w===u&&!w||setTimeout(async()=>{var p,f,y,i,v;(p=x.value)==null||p.resetFields(),$.value={title:"Base"},await Mt(),(y=(f=d.value)==null?void 0:f.$el)==null||y.focus(),(v=(i=d.value)==null?void 0:i.$el)==null||v.select()},5)});const r=ns(()=>{switch(B.value){case et.DB:default:return"Base"}});return(w,u)=>{const p=$t,f=Ot,y=gs,i=Vt,v=Ce,M=ys,F=Te("e");return t(),b(M,{visible:e(T),"onUpdate:visible":u[2]||(u[2]=V=>ne(T)?T.value=V:null),size:"small"},{header:o(()=>[n("div",so,[s(p,{type:e(B),class:"mr-2.5 !text-lg !h-4"},null,8,["type"]),A(" "+h(w.$t("general.createEntity",{entity:e(r)})),1)])]),default:o(()=>[n("div",ao,[s(i,{ref_key:"form",ref:x,model:e($),name:"basic",layout:"vertical",class:"w-full !mx-auto","no-style":"",autocomplete:"off",onFinish:O},{default:o(()=>[s(y,{name:"title",rules:a,class:"m-10"},{default:o(()=>[s(f,{ref_key:"input",ref:d,value:e($).title,"onUpdate:value":u[0]||(u[0]=V=>e($).title=V),name:"title",class:"nc-metadb-base-name nc-input-md",placeholder:"Title"},null,8,["value"])]),_:1})]),_:1},8,["model"]),n("div",oo,[s(v,{type:"secondary",onClick:u[1]||(u[1]=V=>T.value=!1)},{default:o(()=>[A(h(w.$t("general.cancel")),1)]),_:1}),G((t(),b(v,{"data-testid":"docs-create-proj-dlg-create-btn",loading:e(D),type:"primary",label:`${w.$t("general.create")} ${e(r)}`,"loading-label":`${w.$t("general.creating")} ${e(r)}`,onClick:O},{loading:o(()=>[A(h(w.$t("general.creatingEntity",{entity:e(r)})),1)]),default:o(()=>[A(h(w.$t("general.createEntity",{entity:e(r)}))+" ",1)]),_:1},8,["loading","label","loading-label"])),[[F,["a:base:create"]]])])])]),_:1},8,["visible"])}}});const Gt=Le(no,[["__scopeId","data-v-77837997"]]),lo=ie({__name:"CreateProjectBtn",props:{activeWorkspaceId:{},modal:{type:Boolean},type:{},isOpen:{type:Boolean},size:{},centered:{type:Boolean}},setup(_){const L=_,{isUIAllowed:m}=Ee(),{orgRoles:c,workspaceRoles:l}=Ee(),T=Ne(),{isSharedBase:B}=X(T),j=Ye();X(j);const I=S(!1),k=oe(()=>L.size||"small"),a=oe(()=>L.centered??!0);return(x,$)=>{const D=Gt,O=Ce,d=Te("e");return e(m)("baseCreate",{roles:e(l)??e(c)})&&!e(B)?G((t(),b(O,{key:0,type:"text",size:e(k),centered:e(a),onClick:$[1]||($[1]=r=>I.value=!0)},{default:o(()=>[Pt(x.$slots,"default"),s(D,{modelValue:e(I),"onUpdate:modelValue":$[0]||($[0]=r=>ne(I)?I.value=r:null)},null,8,["modelValue"])]),_:3},8,["size","centered"])),[[d,["c:base:create"]]]):U("",!0)}}}),io={key:0,class:"flex flex-col w-full gap-y-3.75 ml-3 mt-3.75"},ro={key:0,class:"flex flex-row items-center w-full gap-x-3"},co={class:"flex flex-row items-center w-full gap-x-3"},uo={class:"flex flex-row items-center w-full gap-x-3"},po={key:1,class:"xs:hidden flex flex-col p-1 gap-y-0.5 mt-0.25 mb-0.5 truncate"},mo={class:"flex items-center gap-2"},_o={class:"gap-x-2 flex flex-row w-full items-center !font-normal"},fo={class:"flex"},vo=ie({__name:"TopSection",setup(_){const L=Ye(),m=Ne(),{isUIAllowed:c}=Ee(),{appInfo:l}=xe(),{isWorkspaceLoading:T,isWorkspaceSettingsPageOpened:B}=X(L),{navigateToWorkspaceSettings:j}=L,{isSharedBase:I}=X(m),k=S(!1),a=()=>{j()};return(x,$)=>{const D=bs,O=to,d=Ve,r=Ce,w=lo,u=Te("e");return e(T)?(t(),g("div",io,[e(l).ee?(t(),g("div",ro,[s(D,{active:!0,class:"!w-4 !h-4 !rounded overflow-hidden"}),s(D,{active:!0,class:"!w-40 !h-4 !rounded overflow-hidden"})])):U("",!0),n("div",co,[s(D,{active:!0,class:"!w-4 !h-4 !rounded overflow-hidden"}),s(D,{active:!0,class:"!w-40 !h-4 !rounded overflow-hidden"})]),n("div",uo,[s(D,{active:!0,class:"!w-4 !h-4 !rounded overflow-hidden"}),s(D,{active:!0,class:"!w-40 !h-4 !rounded overflow-hidden"})])])):e(I)?U("",!0):(t(),g("div",po,[s(O),e(c)("workspaceSettings")?G((t(),b(r,{key:0,type:"text",size:"small",class:te(["nc-sidebar-top-button !xs:hidden",{"!text-brand-500 !bg-brand-50 !hover:bg-brand-50":e(B),"!hover:bg-gray-200":!e(B)}]),"data-testid":"nc-sidebar-team-settings-btn",centered:!1,onClick:a},{default:o(()=>[n("div",mo,[s(d,{icon:"settings",class:"!h-4"}),n("div",null,h(x.$t("title.teamAndSettings")),1)])]),_:1},8,["class"])),[[u,["c:team:settings"]]]):U("",!0),s(w,{"is-open":e(k),"onUpdate:isOpen":$[0]||($[0]=p=>ne(k)?k.value=p:null),modal:"",type:"text",class:"nc-sidebar-top-button !hover:bg-gray-200 !xs:hidden","data-testid":"nc-sidebar-create-base-btn"},{default:o(()=>[n("div",_o,[s(d,{icon:"plus"}),n("div",fo,h(x.$t("title.createBase")),1)])]),_:1},8,["is-open"])]))}}});const bo=Le(vo,[["__scopeId","data-v-2ae405ea"]]),yo={class:"flex flex-row items-center gap-x-2"},go={class:"mt-2"},xo={class:"flex flex-row justify-end gap-x-2 mt-6"},wo=ie({__name:"TableRename",props:{modelValue:{type:Boolean},tableMeta:{},sourceId:{}},emits:["update:modelValue","updated"],setup(_,{emit:L}){const m=Gs(_,["tableMeta","sourceId"]),c=L,{$e:l,$api:T}=je(),{setMeta:B}=ht(),j=ze(m,"modelValue",c),{updateTab:I}=ot(),{loadProjectTables:k}=we(),a=Ne(),{loadTables:x,isMysql:$,isMssql:D,isPg:O}=a,{tables:d,base:r}=X(a),{allRecentViews:w}=X(Be()),{refreshCommandPalette:u}=Qe(),{addUndo:p,defineProjectScope:f}=vs(),y=S(),i=S(!1),v=Vt.useForm,M=ds({title:""}),F=oe(()=>({title:[ya,{validator:(W,R)=>new Promise((E,Q)=>{var z;let H=255;if($(_.sourceId)?H=64:O(_.sourceId)?H=63:D(_.sourceId)&&(H=128),((((z=r==null?void 0:r.value)==null?void 0:z.prefix)||"")+R).length>H)return Q(new Error(`Table name exceeds ${H} characters`));E()})},{validator:(W,R)=>new Promise((E,Q)=>{if(/^\s+|\s+$/.test(R))return Q(new Error("Leading or trailing whitespace not allowed in table name"));if(!((d==null?void 0:d.value)||[]).every(H=>H.id===_.tableMeta.id||H.title.toLowerCase()!==(R||"").toLowerCase()))return Q(new Error("Duplicate table alias"));E()})}]})),{validateInfos:V}=v(M,F);us(()=>{var W;(W=_.tableMeta)!=null&&W.title&&(M.title=`${_.tableMeta.title}`),Mt(()=>{var E;const R=(E=y.value)==null?void 0:E.$el;R&&(R.setSelectionRange(0,M.title.length),R.focus())})},{flush:"post"});const Y=async(W=!1,R)=>{var E;if(_.tableMeta&&!(M.title===_.tableMeta.title&&!R)){i.value=!0;try{await T.dbTable.update(_.tableMeta.id,{base_id:_.tableMeta.base_id,table_name:M.title,title:M.title}),j.value=!1,await k(_.tableMeta.base_id,!0),W||p({redo:{fn:H=>{M.title=H,Y(!0,!0)},args:[M.title]},undo:{fn:H=>{M.title=H,Y(!0,!0)},args:[_.tableMeta.title]},scope:f({model:_.tableMeta})}),await x(),w.value=w.value.map(H=>(H.tableID===_.tableMeta.id&&H.isDefault&&(H.viewName=M.title),H));const Q=await T.dbTable.read(_.tableMeta.id);await B(Q),I({id:_.tableMeta.id},{title:Q.title}),u(),l("a:table:rename"),ps(`${(E=r.value)==null?void 0:E.title}: ${Q==null?void 0:Q.title}`),j.value=!1}catch(Q){re.error(await Ie(Q))}i.value=!1}};return(W,R)=>{const E=Ve,Q=Ot,H=gs,q=Vt,z=Ce,ue=ys;return t(),b(ue,{visible:e(j),"onUpdate:visible":R[4]||(R[4]=ve=>ne(j)?j.value=ve:null),size:"small"},{header:o(()=>[n("div",yo,[s(E,{icon:"table"}),A(" "+h(W.$t("activity.renameTable")),1)])]),default:o(()=>[n("div",go,[s(q,{model:e(M),name:"create-new-table-form"},{default:o(()=>[s(H,Fs(Ws(e(V).title)),{default:o(()=>[s(Q,{ref_key:"inputEl",ref:y,value:e(M).title,"onUpdate:value":R[0]||(R[0]=ve=>e(M).title=ve),class:"nc-input-md","hide-details":"",size:"large",placeholder:W.$t("msg.info.enterTableName"),onKeydown:R[1]||(R[1]=vt(()=>Y(),["enter"]))},null,8,["value","placeholder"])]),_:1},16)]),_:1},8,["model"]),n("div",xo,[s(z,{type:"secondary",onClick:R[2]||(R[2]=ve=>j.value=!1)},{default:o(()=>[A(h(W.$t("general.cancel")),1)]),_:1}),s(z,{key:"submit",type:"primary",disabled:e(V).title.validateStatus==="error"||e(M).title===W.tableMeta.title,label:"Rename Table","loading-label":"Renaming Table",loading:e(i),onClick:R[3]||(R[3]=()=>Y())},{loading:o(()=>[A(h(W.$t("title.renamingTable")),1)]),default:o(()=>[A(h(W.$t("title.renameTable"))+" ",1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["visible"])}}}),ho={class:"mt-4"},ko={class:"prose-md self-center text-gray-500 mt-4"},$o={class:"text-xs p-2"},Io={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Do=ie({__name:"TableDuplicate",props:{modelValue:{type:Boolean},table:{}},emits:["update:modelValue"],setup(_,{emit:L}){const m=_,c=L,{api:l}=yt(),T=ze(m,"modelValue",c),{addTab:B}=ot(),{$e:j,$poller:I}=je();Ae();const{openTable:k}=we(),a=Ne(),{loadTables:x}=a,{tables:$}=X(a),{t:D}=bt();X(we());const{refreshCommandPalette:O}=Qe(),d=S({includeData:!0,includeViews:!0,includeHooks:!0}),r=oe(()=>{const{includeData:f,includeViews:y,includeHooks:i}=d.value;return{excludeData:!f,excludeViews:!y,excludeHooks:!i}}),w=S(!1),u=async()=>{try{w.value=!0;const f=await l.dbTable.duplicate(m.table.base_id,m.table.id,{options:r.value});I.subscribe({id:f.id},async y=>{if(y.status!=="close")if(y.status===tt.COMPLETED){await x(),O();const i=$.value.find(v=>{var M,F;return v.id===((F=(M=y==null?void 0:y.data)==null?void 0:M.result)==null?void 0:F.id)});i&&B({title:i.title,id:i.id,type:i.type}),k(i),w.value=!1,T.value=!1}else y.status===tt.FAILED&&(re.error(D("msg.error.failedToDuplicateTable")),await x(),w.value=!1,T.value=!1)}),j("a:table:duplicate")}catch(f){re.error(await Ie(f)),w.value=!1,T.value=!1}};gt("Enter",()=>{T.value&&u()});const p=S(!1);return(f,y)=>{const i=Rt,v=Ut,M=Ce,F=it,V=Te("e");return t(),b(F,{visible:e(T),"onUpdate:visible":y[5]||(y[5]=Y=>ne(T)?T.value=Y:null),class:te([{active:e(T)},"!w-[30rem]"]),closable:!e(w),"mask-closable":!e(w),keyboard:!e(w),centered:"","wrap-class-name":"nc-modal-table-duplicate",footer:null,onKeydown:y[6]||(y[6]=vt(Y=>T.value=!1,["esc"]))},{default:o(()=>[n("div",null,[n("div",{class:"prose-xl font-bold self-center",onDblclick:y[0]||(y[0]=Y=>p.value=!e(p))},h(f.$t("general.duplicate"))+" "+h(f.$t("objects.table")),33),n("div",ho,h(f.$t("msg.warning.duplicateProject")),1),n("div",ko,h(f.$t("title.advancedSettings")),1),s(i,{class:"!m-0 !p-0 !my-2"}),n("div",$o,[s(v,{checked:e(d).includeData,"onUpdate:checked":y[1]||(y[1]=Y=>e(d).includeData=Y),disabled:e(w)},{default:o(()=>[A(h(f.$t("labels.includeData")),1)]),_:1},8,["checked","disabled"]),s(v,{checked:e(d).includeViews,"onUpdate:checked":y[2]||(y[2]=Y=>e(d).includeViews=Y),disabled:e(w)},{default:o(()=>[A(h(f.$t("labels.includeView")),1)]),_:1},8,["checked","disabled"]),G(s(v,{checked:e(d).includeHooks,"onUpdate:checked":y[3]||(y[3]=Y=>e(d).includeHooks=Y),disabled:e(w)},{default:o(()=>[A(h(f.$t("labels.includeWebhook")),1)]),_:1},8,["checked","disabled"]),[[ms,e(p)]])])]),n("div",Io,[e(w)?U("",!0):(t(),b(M,{key:"back",type:"secondary",onClick:y[4]||(y[4]=Y=>T.value=!1)},{default:o(()=>[A(h(f.$t("general.cancel")),1)]),_:1})),G((t(),b(M,{key:"submit",type:"primary",loading:e(w),onClick:u},{default:o(()=>[A(h(f.$t("general.confirm")),1)]),_:1},8,["loading"])),[[V,["a:table:duplicate"]]])])]),_:1},8,["visible","class","closable","mask-closable","keyboard"])}}}),So={class:"h-[80vh]"},To=ie({__name:"ProjectErd",props:{baseId:{},sourceId:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(_,{emit:L}){const m=_,l=ze(m,"modelValue",L),T=oe(()=>m.sourceId),{openedProject:B}=X(Ae()),{baseTables:j}=X(we()),{loadProjectTables:I}=we(),k=S(!0),{getMeta:a}=ht(),x=oe(()=>{var $;return m.baseId||(($=B.value)==null?void 0:$.id)});return lt(async()=>{if(x.value&&j.value.get(x.value))return k.value=!1;try{await I(x.value),await Promise.all(j.value.get(x.value).map(async $=>{await a($.id,!1,!1,x.value)}))}catch($){console.error($)}finally{k.value=!1}}),($,D)=>{const O=ha,d=it;return t(),b(d,{visible:e(l),"onUpdate:visible":D[0]||(D[0]=r=>ne(l)?l.value=r:null),size:"large"},{default:o(()=>[n("div",So,[e(k)?U("",!0):(t(),b(O,{key:0,"source-id":e(T),"base-id":e(x),"show-all-columns":!1},null,8,["source-id","base-id"]))])]),_:1},8,["visible"])}}}),jo={class:"flex gap-2 items-center"},Co={class:"ml-0.5"},Vo={class:"flex gap-2 items-center"},Mo={class:"flex gap-2 items-center"},Po={class:"flex gap-2 items-center"},Eo=ie({__name:"BaseOptions",props:{source:{},base:{}},setup(_){const m=Re(_,"source"),{isUIAllowed:c}=Ee(),l=Se(Dt),{$e:T}=je();function B(I,k){if(!I||!k)return;T("a:actions:import-airtable");const a=S(!0),{close:x}=Me(ga,{modelValue:a,baseId:I,sourceId:k,"onUpdate:modelValue":$});function $(){a.value=!1,x(1e3)}}function j(I){var $;if(!(($=m.value)!=null&&$.id))return;T(`a:actions:import-${I}`);const k=S(!0),{close:a}=Me(xa,{modelValue:k,importType:I,sourceId:m.value.id,"onUpdate:modelValue":x});function x(){k.value=!1,a(1e3)}}return(I,k)=>{const a=Ve,x=rt,$=ka,D=Te("e");return t(),b($,{class:"py-0","data-testid":"nc-sidebar-base-import"},{title:o(()=>[s(a,{icon:"download"}),A(" "+h(I.$t("labels.importData")),1)]),expandIcon:o(()=>[]),default:o(()=>[e(c)("airtableImport",{roles:e(l)})?(t(),b(x,{key:"quick-import-airtable",onClick:k[0]||(k[0]=O=>B(e(m).base_id,e(m).id))},{default:o(()=>[G((t(),g("div",jo,[s(a,{icon:"airtable",class:"max-w-3.75 group-hover:text-black"}),n("div",Co,h(I.$t("labels.airtable")),1)])),[[D,["c:import:airtable"]]])]),_:1})):U("",!0),e(c)("csvImport",{roles:e(l)})?(t(),b(x,{key:"quick-import-csv",onClick:k[1]||(k[1]=O=>j("csv"))},{default:o(()=>[G((t(),g("div",Vo,[s(a,{icon:"csv",class:"w-4 group-hover:text-black"}),A(" "+h(I.$t("labels.csvFile")),1)])),[[D,["c:import:csv"]]])]),_:1})):U("",!0),e(c)("jsonImport",{roles:e(l)})?(t(),b(x,{key:"quick-import-json",onClick:k[2]||(k[2]=O=>j("json"))},{default:o(()=>[G((t(),g("div",Mo,[s(a,{icon:"code",class:"w-4 group-hover:text-black"}),A(" "+h(I.$t("labels.jsonFile")),1)])),[[D,["c:import:json"]]])]),_:1})):U("",!0),e(c)("excelImport",{roles:e(l)})?(t(),b(x,{key:"quick-import-excel",onClick:k[3]||(k[3]=O=>j("excel"))},{default:o(()=>[G((t(),g("div",Po,[s(a,{icon:"excel",class:"max-w-4 group-hover:text-black"}),A(" "+h(I.$t("labels.microsoftExcel")),1)])),[[D,["c:import:excel"]]])]),_:1})):U("",!0)]),_:1})}}}),No={key:0,class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},Bo={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},js=ie({__name:"TableDelete",props:{visible:{type:Boolean},tableId:{},baseId:{}},emits:["update:visible"],setup(_,{emit:L}){const m=_,l=ze(m,"visible",L),{$e:T,$api:B}=je(),{closeTab:j}=ot(),{getMeta:I,removeMeta:k}=ht(),{loadTables:a,baseUrl:x,isXcdbBase:$}=Ne(),{refreshCommandPalette:D}=Qe(),{removeFromRecentViews:O}=Be(),{baseTables:d,activeTable:r}=X(we()),{openTable:w}=we(),u=oe(()=>d.value.get(m.baseId)??[]),p=oe(()=>u.value.find(i=>i.id===m.tableId)),f=S(!1),y=async()=>{var M,F;if(!p.value)return;const i=JSON.parse(JSON.stringify(p.value)),v=(M=r.value)==null?void 0:M.id;f.value=!0;try{const V=await I(i.id,!0),Y=(F=V==null?void 0:V.columns)==null?void 0:F.filter(R=>R.uidt===Hs.LinkToAnotherRecord&&!qs(R));if(Y!=null&&Y.length&&!$(i.source_id)){const R=await Promise.all(Y.map(async(E,Q)=>{var q;const H=await I((q=E==null?void 0:E.colOptions)==null?void 0:q.fk_related_model_id);return`${Q+1}. ${E.title} is a LinkToAnotherRecord of ${H&&H.title||E.title}`}));re.info(_s("div",{innerHTML:`<div style="padding:10px 4px">Unable to delete tables because of the following.
              <br><br>${R.join("<br>")}<br><br>
              Delete them & try again</div>`}));return}await B.dbTable.delete(i.id),await j({type:Ks.TABLE,id:i.id,title:i.title}),await a(),O({baseId:m.baseId,tableId:i.id}),k(i.id),D(),T("a:table:delete"),v===i.id&&(u.value.length===0?await Xe(x({id:m.baseId,type:"database"})):await w(u.value[0]));const W=u.value.findIndex(R=>R.id===i.id);W>-1&&u.value.splice(W,1),l.value=!1}catch(V){re.error(await Ie(V))}finally{f.value=!1}};return(i,v)=>{const M=ja,F=Is;return t(),b(F,{visible:e(l),"onUpdate:visible":v[0]||(v[0]=V=>ne(l)?l.value=V:null),"entity-name":i.$t("objects.table"),"on-delete":y},{"entity-preview":o(()=>[e(p)?(t(),g("div",No,[s(M,{meta:e(p),class:"nc-view-icon"},null,8,["meta"]),n("div",Bo,h(e(p).title),1)])):U("",!0)]),_:1},8,["visible","entity-name"])}}}),St=_=>(Et("data-v-d51a8eca"),_=_(),Nt(),_),Lo={class:"item","data-testid":"sidebar-view-create-grid"},Oo={class:"item-inner"},Uo=St(()=>n("div",null,"Grid",-1)),Ro={class:"item","data-testid":"sidebar-view-create-form"},Ao={class:"item-inner"},zo=St(()=>n("div",null,"Form",-1)),Go={class:"item","data-testid":"sidebar-view-create-gallery"},Fo={class:"item-inner"},Wo=St(()=>n("div",null,"Gallery",-1)),Ho={class:"item"},qo={class:"item-inner"},Ko=St(()=>n("div",null,"Kanban",-1)),Jo=ie({__name:"CreateViewBtn",props:{alignLeftLevel:{}},setup(_){const L=_,{$e:m}=je(),c=Re(L,"alignLeftLevel"),{refreshCommandPalette:l}=Qe(),T=Be(),{loadViews:B,navigateToView:j}=T,I=Se(At),k=Se(ct),a=S(!1),x=S(),$=S(!1),D=oe(()=>c.value===1?"nc-view-create-dropdown nc-view-create-dropdown-left-1":c.value===2?"nc-view-create-dropdown nc-view-create-dropdown-left-2":"nc-view-create-dropdown");async function O({title:d="",type:r,copyViewId:w,groupingFieldColumnId:u}){if(a.value)return;x.value=r,a.value=!0,await B({tableId:I.value.id}),$.value=!1,a.value=!1;const p=S(!0),{close:f}=Me(hs,{modelValue:p,title:d,type:r,tableId:I.value.id,selectedViewId:w,groupingFieldColumnId:u,"onUpdate:modelValue":y,onCreated:async i=>{y(),l(),await B({tableId:I.value.id,force:!0}),I.value.meta={...I.value.meta,hasNonDefaultViews:!0},j({view:i,tableId:I.value.id,baseId:k.value.id,doNotSwitchTab:!0}),m("a:view:create",{view:i.type})}});function y(){$.value=!1,p.value=!1,f(1e3)}}return(d,r)=>{const w=Ds,u=Lt,p=Ve,f=rt,y=It,i=dt;return t(),b(i,{visible:e($),"onUpdate:visible":r[4]||(r[4]=v=>ne($)?$.value=v:null),"destroy-popup-on-hide":"","overlay-class-name":e(D),onClick:r[5]||(r[5]=ge(v=>$.value=!0,["stop"]))},{overlay:o(()=>[s(y,{class:"max-w-48"},{default:o(()=>[s(f,{onClick:r[0]||(r[0]=ge(v=>O({type:e(ye).GRID}),["stop"]))},{default:o(()=>[n("div",Lo,[n("div",Oo,[s(w,{meta:{type:e(ye).GRID}},null,8,["meta"]),Uo]),e(x)===e(ye).GRID&&e(a)?(t(),b(u,{key:0})):(t(),b(p,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(f,{onClick:r[1]||(r[1]=v=>O({type:e(ye).FORM}))},{default:o(()=>[n("div",Ro,[n("div",Ao,[s(w,{meta:{type:e(ye).FORM}},null,8,["meta"]),zo]),e(x)===e(ye).FORM&&e(a)?(t(),b(u,{key:0})):(t(),b(p,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(f,{onClick:r[2]||(r[2]=v=>O({type:e(ye).GALLERY}))},{default:o(()=>[n("div",Go,[n("div",Fo,[s(w,{meta:{type:e(ye).GALLERY}},null,8,["meta"]),Wo]),e(x)===e(ye).GALLERY&&e(a)?(t(),b(u,{key:0})):(t(),b(p,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(f,{"data-testid":"sidebar-view-create-kanban",onClick:r[3]||(r[3]=v=>O({type:e(ye).KANBAN}))},{default:o(()=>[n("div",Ho,[n("div",qo,[s(w,{meta:{type:e(ye).KANBAN}},null,8,["meta"]),Ko]),e(x)===e(ye).KANBAN&&e(a)?(t(),b(u,{key:0})):(t(),b(p,{key:1,class:"plus",icon:"plus"}))])]),_:1})]),_:1})]),default:o(()=>[Pt(d.$slots,"default",{},void 0,!0)]),_:3},8,["visible","overlay-class-name"])}}});const Yo=Le(Jo,[["__scopeId","data-v-d51a8eca"]]),Cs=_=>_.is_meta,Qo=st(()=>at(()=>import("./EmojiPicker.ad242dd9.js"),["./EmojiPicker.ad242dd9.js","./entry.5958c07b.js","./entry.bdecbb78.css","./iconify.e2b5aaa4.js","./_plugin-vue_export-helper.c27b6911.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./EmojiPicker.9b8b75ab.css"],import.meta.url).then(_=>_.default||_)),Zo={class:"text-sm flex items-center w-full gap-1","data-testid":"view-item"},Xo=["data-testid"],en=n("div",{class:"flex-1"},null,-1),tn=ie({__name:"ViewsNode",props:{view:{},table:{},onValidate:{type:Function}},emits:["update:view","selectIcon","changeView","rename","delete","openModal"],setup(_,{emit:L}){const m=_,c=L,l=ze(m,"view",c),{$e:T}=je(),{isMobileMode:B}=xe(),{isUIAllowed:j}=Ee(),I=Se(ct,S()),{activeView:k}=X(Be()),{getMeta:a}=ht(),x=oe(()=>m.table),$=S(x.value);Je(Da,l),Je(Sa,$);const D=Se(Ta,S(!1)),O=oe(()=>{var Q,H;const E=(H=(Q=I.value)==null?void 0:Q.sources)==null?void 0:H.find(q=>q.id===l.value.source_id);return E?Cs(E):!1}),d=S(!1),r=S(!1),w=S(!1),u=S(),p=Js(()=>{r.value||w.value||c("changeView",l.value)},250);function f(){var E;B.value||j("viewCreateOrEdit")&&(r.value||(r.value=!0,u.value=l.value.title,T("c:view:rename",{view:(E=l.value)==null?void 0:E.type})))}function y(E){E.key==="Escape"?v(E):E.key==="Enter"&&i(E)}function i(E){E.stopImmediatePropagation(),E.preventDefault(),V()}function v(E){E.stopImmediatePropagation(),E.preventDefault(),Y()}gt("Enter",E=>{r.value&&i(E)});const M=()=>{var E;B.value||!j("viewCreateOrEdit")||r.value||(r.value=!0,u.value=l.value.title,T("c:view:rename",{view:(E=l.value)==null?void 0:E.type}))},F=E=>E==null?void 0:E.focus();async function V(){if(d.value=!1,!r.value)return;const E=m.onValidate({...l.value,title:u.value});if(E!==!0){re.error(E),Y();return}if(l.value.title===""||l.value.title===u.value){Y();return}const Q=l.value.title;l.value.title=u.value||"",c("rename",l.value,Q),W()}function Y(){r.value&&W()}function W(){w.value=!0,r.value=!1,u.value="",setTimeout(()=>{w.value=!1},250)}const R=()=>{d.value=!1,c("delete",l.value)};return Pe(d,async()=>{d.value&&($.value=await a(x.value.id))}),(E,Q)=>{const H=Ds,q=Qo,z=Ot,ue=wt,ve=Ve,We=Ce,Ge=$a,P=dt,se=Ys,ae=Te("e");return t(),b(se,{class:te(["nc-sidebar-node !min-h-7 !max-h-7 !mb-0.25 select-none group text-gray-700 !flex !items-center !mt-0 !hover:bg-gray-200 !hover:text-gray-900 cursor-pointer",{"!pl-18 !xs:pl-19.75":e(O),"!pl-23.5 !xs:pl-27":!e(O)}]),"data-testid":`view-sidebar-view-${e(l).alias||e(l).title}`,onDblclick:ge(f,["stop"]),onClick:e(p)},{default:o(()=>{var Z,de,ce;return[G((t(),g("div",Zo,[G((t(),g("div",{class:"flex min-w-6","data-testid":`view-sidebar-drag-handle-${e(l).alias||e(l).title}`},[s(q,{class:"nc-table-icon",emoji:(de=(Z=m.view)==null?void 0:Z.meta)==null?void 0:de.icon,size:"small",clearable:!0,readonly:e(B),onEmojiSelected:Q[0]||(Q[0]=ee=>c("selectIcon",ee))},{default:o(()=>[s(H,{meta:m.view,class:"nc-view-icon"},null,8,["meta"])]),_:1},8,["emoji","readonly"])],8,Xo)),[[ae,["c:view:emoji-picker"]]]),e(r)?(t(),b(z,{key:0,ref:F,value:e(u),"onUpdate:value":Q[1]||(Q[1]=ee=>ne(u)?u.value=ee:null),class:te(["!bg-transparent !border-0 !ring-0 !outline-transparent !border-transparent",{"font-medium":((ce=e(k))==null?void 0:ce.id)===e(l).id}]),onBlur:V,onKeydown:Q[2]||(Q[2]=ge(ee=>y(ee),["stop"]))},null,8,["value","class"])):(t(),b(ue,{key:1,class:"nc-sidebar-node-title text-ellipsis overflow-hidden select-none w-full","show-on-truncate-only":""},{title:o(()=>[A(h(e(l).alias||e(l).title),1)]),default:o(()=>{var ee;return[n("div",{"data-testid":"sidebar-view-title",class:te({"font-medium":((ee=e(k))==null?void 0:ee.id)===e(l).id}),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},h(e(l).alias||e(l).title),3)]}),_:1})),en,!e(r)&&!e(D)&&e(j)("viewCreateOrEdit")?(t(),b(P,{key:2,visible:e(d),"onUpdate:visible":Q[5]||(Q[5]=ee=>ne(d)?d.value=ee:null),"overlay-class-name":"!rounded-lg"},{overlay:o(()=>[s(Ge,{"data-testid":`view-sidebar-view-actions-${e(l).alias||e(l).title}`,view:e(l),table:e(x),"in-sidebar":"",onCloseModal:Q[4]||(Q[4]=ee=>d.value=!1),onRename:M,onDelete:R},null,8,["data-testid","view","table"])]),default:o(()=>[G((t(),b(We,{type:"text",size:"xxsmall",class:te(["nc-sidebar-node-btn invisible !group-hover:visible nc-sidebar-view-node-context-btn",{"!visible":e(d)}]),onClick:Q[3]||(Q[3]=ge(ee=>d.value=!e(d),["stop"]))},{default:o(()=>[s(ve,{icon:"threeDotHorizontal",class:"text-xl w-4.75"})]),_:1},8,["class"])),[[ae,["c:view:option"]]])]),_:1},8,["visible"])):U("",!0)])),[[ae,["a:view:open",{view:e(l).type}]]])]}),_:1},8,["class","data-testid","onClick"])}}}),sn={class:"flex flex-row items-center pl-1.25 !py-1.5 text-inherit"},an={class:"pl-1.75"},on=ie({__name:"ViewsList",emits:["openModal","deleted"],setup(_,{emit:L}){const m=L,c=Se(ct),l=Se(At),{isLeftSidebarOpen:T}=X(kt()),{activeTableId:B}=X(we()),{isUIAllowed:j}=Ee(),{isMobileMode:I}=xe(),{$e:k}=je(),{t:a}=bt(),{viewsByTable:x,activeView:$,allRecentViews:D}=X(Be()),{navigateToTable:O}=we(),d=oe(()=>{var P;return((P=x.value.get(l.value.id))==null?void 0:P.filter(se=>!se.is_default))??[]}),{api:r}=yt(),{refreshCommandPalette:w}=Qe(),{addUndo:u,defineModelScope:p}=vs(),{navigateToView:f,loadViews:y,removeFromRecentViews:i}=Be(),v=S([]),M=S(!1),F=S(),V=S(!1);Pe($,P=>{P&&P.id&&(v.value=[P.id])});function Y(P){V.value=P,setTimeout(()=>{V.value=!1},300)}const W=oe(()=>{var se,ae;const P=(ae=(se=c.value)==null?void 0:se.sources)==null?void 0:ae.find(Z=>Z.id===l.value.source_id);return P?Cs(P):!1});function R(P){return!P.title||P.title.trim().length<0?a("msg.error.viewNameRequired"):d.value.some(se=>se.title===P.title&&se.id!==P.id)?a("msg.error.viewNameDuplicate"):!0}let E;function Q(P){P.stopImmediatePropagation(),P.preventDefault(),M.value=!0}async function H(P,se=!1){if(se||(P.stopImmediatePropagation(),P.preventDefault(),M.value=!1),d.value.length<2)return;const{newIndex:ae=0,oldIndex:Z=0}=P;if(ae===Z)return;se||u({redo:{fn:async()=>{const le=E.toArray(),Oe=le.splice(Z,1);le.splice(ae,0,Oe[0]),E.sort(le),await H(P,!0)},args:[]},undo:{fn:async()=>{const le=E.toArray(),Oe=le.splice(ae,1);le.splice(Z,0,Oe[0]),E.sort(le),await H({...P,oldIndex:ae,newIndex:Z},!0)},args:[]},scope:p({view:$.value})});const de=P.to.children,ce=de[ae-1],ee=de[ae+1],pe=d.value.find(le=>le.id===P.item.id);if(!pe||!pe.id)return;const he=ce?d.value.find(le=>le.id===ce.id):{},Fe=ee?d.value.find(le=>le.id===ee.id):{};let ke;d.value.length-1===ae?ke=parseFloat(String(he.order))+1:ae===0?ke=parseFloat(String(Fe.order))/2:ke=(parseFloat(String(he.order))+parseFloat(String(Fe.order)))/2;const He=isNaN(Number(ke))?Z:ke;pe.order=He,await r.dbView.update(pe.id,{order:He}),Y(pe.id),k("a:view:reorder")}const q=P=>{E&&E.destroy(),!I.value&&(E=new $s(P,{ghostClass:"ghost",onStart:Q,onEnd:H}))};lt(()=>F.value&&q(F.value.$el));async function z(P){await f({view:P,tableId:l.value.id,baseId:c.value.id,hardReload:P.type===ye.FORM&&v.value[0]===P.id,doNotSwitchTab:!0}),I.value&&(T.value=!1)}async function ue(P,se,ae=!1){try{await r.dbView.update(P.id,{title:P.title,order:P.order}),f({view:P,tableId:l.value.id,baseId:c.value.id,hardReload:P.type===ye.FORM&&v.value[0]===P.id}),w(),ae||u({redo:{fn:(Z,de)=>{const ce=Z.title;Z.title=de,ue(Z,ce,!0)},args:[P,P.title]},undo:{fn:(Z,de)=>{const ce=Z.title;Z.title=de,ue(Z,ce,!0)},args:[P,se]},scope:p({view:$.value})}),D.value=D.value.map(Z=>(Z.viewId===P.id&&Z.tableID===P.fk_model_id&&(Z.viewName=P.title),Z))}catch(Z){re.error(await Ie(Z))}}function ve(P){const se=S(!0),{close:ae}=Me(Ia,{modelValue:se,view:P,"onUpdate:modelValue":Z,onDeleted:async()=>{var ce,ee;Z(),m("deleted"),i({viewId:P.id,tableId:P.fk_model_id,baseId:c.value.id}),w(),((ce=$.value)==null?void 0:ce.id)===P.id&&O({tableId:l.value.id,baseId:c.value.id}),await y({tableId:l.value.id,force:!0});const de=((ee=x.value.get(l.value.id))==null?void 0:ee.filter(pe=>!pe.is_default))??[];l.value.meta={...l.value.meta,hasNonDefaultViews:de.length>1}}});function Z(){se.value=!1,ae(1e3)}}const We=async(P,se)=>{try{se.meta={...va(se.meta),icon:P},r.dbView.update(se.id,{meta:se.meta}),k("a:view:icon:sidebar",{icon:P})}catch(ae){re.error(await Ie(ae))}};function Ge({title:P="",type:se,copyViewId:ae,groupingFieldColumnId:Z}){const de=S(!0),{close:ce}=Me(hs,{modelValue:de,title:P,type:se,tableId:l.value.id,selectedViewId:ae,groupingFieldColumnId:Z,views:d,"onUpdate:modelValue":ee,onCreated:async pe=>{ee(),w(),await y({force:!0,tableId:l.value.id}),f({view:pe,tableId:l.value.id,baseId:c.value.id,hardReload:pe.type===ye.FORM&&v.value[0]===pe.id}),k("a:view:create",{view:pe.type})}});function ee(){de.value=!1,ce(1e3)}}return(P,se)=>{const ae=Ve,Z=Yo,de=tn,ce=Zs;return t(),b(ce,{ref_key:"menuRef",ref:F,class:te([{dragging:e(M)},"nc-views-menu flex flex-col w-full !border-r-0 !bg-inherit"]),"selected-keys":e(v)},{default:o(()=>[e(j)("viewCreateOrEdit")?(t(),b(Z,{key:0,class:te({"!pl-18 !xs:pl-19.75":e(W),"!pl-23.5 !xs:pl-27":!e(W)}),"align-left-level":e(W)?1:2},{default:o(()=>[n("div",{role:"button",class:te(["nc-create-view-btn flex flex-row items-center cursor-pointer rounded-md w-full",{"text-brand-500 hover:text-brand-600":e(B)===e(l).id,"text-gray-500 hover:text-brand-500":e(B)!==e(l).id}])},[n("div",sn,[s(ae,{icon:"plus"}),n("div",an,h(P.$t("general.createEntity",{entity:P.$t("objects.view")})),1)])],2)]),_:1},8,["class","align-left-level"])):U("",!0),e(d).length?(t(!0),g(me,{key:1},xt(e(d),ee=>{var pe;return t(),b(de,{id:ee.id,key:ee.id,view:ee,"on-validate":R,table:e(l),class:te(["nc-view-item !rounded-md !px-0.75 !py-0.5 w-full transition-all ease-in duration-100",{"bg-gray-200":e(V)===ee.id,active:((pe=e($))==null?void 0:pe.id)===ee.id,[`nc-${ee.type?e(Qs)[ee.type]:ee.type}-view-item`]:!0}]),"data-view-id":ee.id,onChangeView:z,onOpenModal:Ge,onDelete:ve,onRename:ue,onSelectIcon:he=>We(he,ee)},null,8,["id","view","table","class","data-view-id","onSelectIcon"])}),128)):U("",!0)]),_:1},8,["class","selected-keys"])}}});const nn={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ln=n("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1),rn=[ln];function cn(_,L){return t(),g("svg",nn,[...rn])}const dn={name:"mdi-eye",render:cn},un=st(()=>at(()=>import("./EmojiPicker.ad242dd9.js"),["./EmojiPicker.ad242dd9.js","./entry.5958c07b.js","./entry.bdecbb78.css","./iconify.e2b5aaa4.js","./_plugin-vue_export-helper.c27b6911.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./EmojiPicker.9b8b75ab.css"],import.meta.url).then(_=>_.default||_)),pn=_=>(Et("data-v-8a630489"),_=_(),Nt(),_),mn=["data-order","data-id","data-table-id","data-active"],_n=["data-testid"],fn={class:"flex flex-row h-full items-center"},vn=["data-testid"],bn=["data-testid"],yn=pn(()=>n("div",{class:"flex flex-grow h-full"},null,-1)),gn={class:"flex flex-row items-center"},xn={key:0},wn={class:"flex gap-2 items-center"},hn={class:"flex gap-2 items-center"},kn={class:"flex gap-2 items-center"},$n=ie({__name:"TableNode",props:{base:{},table:{},sourceIndex:{default:0}},setup(_){const L=_,m=Re(L,"base"),c=Re(L,"table"),l=Re(L,"sourceIndex"),{openTable:T}=cs({baseId:m.value.id}),B=Xs(),{isUIAllowed:j}=Ee(),{isMobileMode:I}=xe(),k=ot(),{updateTab:a}=k,{$e:x,$api:$}=je();cs({baseId:m.value.id});const D=Se(Dt);Je(At,c);const{setMenuContext:O,openRenameTableDialog:d,duplicateTable:r}=Se(zt),{loadViews:w}=Be(),{activeView:u,activeViewTitleOrId:p}=X(Be()),{isLeftSidebarOpen:f}=X(kt()),{baseTables:y}=X(we()),i=oe(()=>y.value.get(m.value.id)??[]),v=oe(()=>B.params.viewId),M=S(!1),F=async(q,z)=>{try{z.meta={...z.meta||{},icon:q},i.value.splice(i.value.indexOf(z),1,{...z}),a({id:z.id},{meta:z.meta}),await $.dbTable.update(z.id,{meta:z.meta}),x("a:table:icon:navdraw",{icon:q})}catch(ue){re.error(await Ie(ue))}},{isSharedBase:V}=Ne(),Y=oe(()=>j("tableIconEdit",{roles:D==null?void 0:D.value})),W=S(!1),R=S(!1),E=async()=>{if(W.value){W.value=!1;return}R.value=!0;try{await w({tableId:c.value.id,ignoreLoading:!0})}catch(q){re.error(await Ie(q))}finally{R.value=!1,W.value=!0}},Q=async()=>{R.value=!0;try{await T(c.value),I.value&&(f.value=!1)}catch(q){re.error(await Ie(q))}finally{R.value=!1,W.value=!0}};Pe(()=>{var q;return(q=u.value)==null?void 0:q.id},()=>{var q,z;u.value&&((q=u.value)==null?void 0:q.fk_model_id)===((z=c.value)==null?void 0:z.id)&&(W.value=!0)},{immediate:!0});const H=oe(()=>{var q,z;return v.value===((q=c.value)==null?void 0:q.id)&&(((z=u.value)==null?void 0:z.is_default)||!p.value)});return(q,z)=>{var Fe,ke,He;const ue=Lt,ve=Ve,We=Ce,Ge=dn,P=wt,se=un,ae=sa,Z=rt,de=It,ce=dt,ee=js,pe=on,he=Te("e");return t(),g("div",{class:te(["nc-tree-item nc-table-node-wrapper text-sm select-none w-full",[`nc-base-tree-tbl nc-base-tree-tbl-${e(c).title}`]]),"data-order":e(c).order,"data-id":e(c).id,"data-table-id":e(c).id,"data-active":e(v)===e(c).id},[G((t(),g("div",{class:te(["table-context flex items-center gap-1 h-full nc-tree-item-inner nc-sidebar-node pl-11 pr-0.75 mb-0.25 rounded-md h-7.1 w-full group cursor-pointer hover:bg-gray-200",{"hover:bg-gray-200":e(v)!==e(c).id,"pl-12 xs:pl-14":e(l)!==0,"pl-6.5":e(l)===0,"!bg-primary-selected":e(H)}]),"data-testid":`nc-tbl-side-node-${e(c).title}`,onContextmenu:z[6]||(z[6]=le=>e(O)("table",e(c))),onClick:Q},[n("div",fn,[G((t(),b(We,{type:"text",size:"xxsmall",class:"nc-sidebar-node-btn nc-sidebar-expand",onClick:ge(E,["stop"])},{default:o(()=>[e(c).isViewsLoading?(t(),b(ue,{key:0,class:te(["flex w-4 h-4 !text-gray-600 !mt-0.75",{"!visible":!e(W)}])},null,8,["class"])):(t(),b(ve,{key:1,icon:"triangleFill",class:te(["nc-sidebar-source-node-btns group-hover:visible invisible cursor-pointer transform transition-transform duration-500 h-1.5 w-1.5 !text-gray-600 rotate-90",{"!rotate-180":e(W)}])},null,8,["class"]))]),_:1})),[[he,["c:table:toggle-expand"]]]),n("div",{class:"flex w-auto","data-testid":`tree-view-table-draggable-handle-${e(c).title}`},[G((t(),g("div",{class:te(["flex items-center nc-table-icon",{"pointer-events-none":!e(Y)}]),onClick:z[1]||(z[1]=ge(()=>{},["stop"]))},[(t(),b(se,{key:(Fe=e(c).meta)==null?void 0:Fe.icon,emoji:(ke=e(c).meta)==null?void 0:ke.icon,size:"small",readonly:!e(Y)||e(I),onEmojiSelected:z[0]||(z[0]=le=>F(le,e(c)))},{default:o(()=>[s(P,{class:"flex",placement:"topLeft","hide-on-click":"",disabled:!e(Y)},{title:o(()=>[A(h(q.$t("general.changeIcon")),1)]),default:o(()=>[e(c).type==="table"?(t(),b(ea(("iconMap"in q?q.iconMap:e(ta)).table),{key:0,class:te(["flex w-5 !text-gray-500 text-sm",{"group-hover:text-gray-500":e(j)("tableSort",{roles:e(D)}),"!text-black":e(v)===e(c).id}])},null,8,["class"])):(t(),b(Ge,{key:1,class:te(["flex w-5 !text-gray-500 text-sm",{"group-hover:text-gray-500":e(j)("tableSort",{roles:e(D)}),"!text-black":e(v)===e(c).id}])},null,8,["class"]))]),_:1},8,["disabled"])]),_:1},8,["emoji","readonly"]))],2)),[[he,["c:table:emoji-picker"]]])],8,vn)]),s(P,{class:"nc-tbl-title nc-sidebar-node-title text-ellipsis w-full overflow-hidden select-none","show-on-truncate-only":""},{title:o(()=>[A(h(e(c).title),1)]),default:o(()=>[n("span",{class:te({"text-black !font-medium":e(H)}),"data-testid":`nc-tbl-title-${e(c).title}`,style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},h(e(c).title),11,bn)]),_:1}),yn,n("div",gn,[!e(V)&&(e(j)("tableRename",{roles:e(D)})||e(j)("tableDelete",{roles:e(D)}))?G((t(),g("div",xn,[s(ce,{trigger:["click"],class:"nc-sidebar-node-btn",onClick:z[5]||(z[5]=ge(()=>{},["stop"]))},{overlay:o(()=>[s(de,null,{default:o(()=>{var le;return[e(j)("tableRename",{roles:e(D)})?(t(),b(Z,{key:0,"data-testid":`sidebar-table-rename-${e(c).title}`,onClick:z[2]||(z[2]=Oe=>e(d)(e(c),e(m).sources[e(l)].id))},{default:o(()=>[G((t(),g("div",wn,[s(ve,{icon:"edit",class:"text-gray-700"}),A(" "+h(q.$t("general.rename")),1)])),[[he,["c:table:rename"]]])]),_:1},8,["data-testid"])):U("",!0),e(j)("tableDuplicate")&&((le=e(m).sources)!=null&&le[e(l)])&&(e(m).sources[e(l)].is_meta||e(m).sources[e(l)].is_local)?(t(),b(Z,{key:1,"data-testid":`sidebar-table-duplicate-${e(c).title}`,onClick:z[3]||(z[3]=Oe=>e(r)(e(c)))},{default:o(()=>[G((t(),g("div",hn,[s(ve,{icon:"duplicate",class:"text-gray-700"}),A(" "+h(q.$t("general.duplicate")),1)])),[[he,["c:table:duplicate"]]])]),_:1},8,["data-testid"])):U("",!0),e(j)("tableDelete",{roles:e(D)})?(t(),b(Z,{key:2,"data-testid":`sidebar-table-delete-${e(c).title}`,class:"!text-red-500 !hover:bg-red-50",onClick:z[4]||(z[4]=Oe=>M.value=!0)},{default:o(()=>[G((t(),g("div",kn,[s(ve,{icon:"delete"}),A(" "+h(q.$t("general.delete")),1)])),[[he,["c:table:delete"]]])]),_:1},8,["data-testid"])):U("",!0)]}),_:1})]),default:o(()=>[s(ae,{"data-testid":"nc-sidebar-table-context-menu",class:"min-w-5.75 min-h-5.75 mt-0.2 mr-0.25 px-0.5 !text-gray-600 transition-opacity opacity-0 group-hover:opacity-100 nc-tbl-context-menu outline-0 rounded-md hover:bg-gray-500 hover:bg-opacity-15 !hover:text-black"})]),_:1})])),[[he,["c:table:option"]]]):U("",!0)])],42,_n)),[[he,["a:table:open"]]]),e(c).id&&((He=e(m))!=null&&He.id)?(t(),b(ee,{key:0,visible:e(M),"onUpdate:visible":z[7]||(z[7]=le=>ne(M)?M.value=le:null),"table-id":e(c).id,"base-id":e(m).id},null,8,["visible","table-id","base-id"])):U("",!0),e(W)?(t(),b(pe,{key:1,"table-id":e(c).id,"base-id":e(m).id},null,8,["table-id","base-id"])):U("",!0)],10,mn)}}});const In=Le($n,[["__scopeId","data-v-8a630489"]]),Dn={class:"border-none sortable-list"},Sn=["nc-source"],Tn=ie({__name:"TableList",props:{base:{},sourceIndex:{default:0}},setup(_){const L=_,m=Re(L,"base"),c=Re(L,"sourceIndex"),l=oe(()=>{var d,r;return(r=(d=m.value)==null?void 0:d.sources)==null?void 0:r[c.value]}),{isMobileMode:T}=xe(),{baseTables:B}=X(we()),j=oe(()=>B.value.get(m.value.id)??[]),{$api:I}=je(),k=oe(()=>j.value.reduce((d,r)=>(d[r.id]=r,d),{})),a=S({}),x=S(),$={},D=d=>{const r=d.getAttribute("nc-source");r&&(T.value||($[r]&&$[r].destroy(),$s.create(d,{onEnd:async w=>{var W,R;const u=j.value.findIndex(E=>E.source_id===r),{newIndex:p=0,oldIndex:f=0}=w;if(p===f)return;const y=w.item,i=k.value[y.dataset.id],v=w.to.children;if(v.length<2)return;const M=v[p-1],F=v[p+1],V=M&&k.value[M.dataset.id],Y=F&&k.value[F.dataset.id];v.length-1===w.newIndex?i.order=V.order+1:p===0?i.order=Y.order/2:i.order=(V.order+Y.order)/2,(R=j.value)==null||R.splice(p+u,0,...(W=j.value)==null?void 0:W.splice(f+u,1)),a.value[r]?a.value[r]=a.value[r]+1:a.value[r]=1,await I.dbTable.reorder(i.id,{order:i.order})},animation:150,setData(w,u){w.setData("text/json",JSON.stringify({id:u.dataset.id,title:u.dataset.title,type:u.dataset.type,sourceId:u.dataset.sourceId}))},revertOnSpill:!0})))};us(()=>{x.value&&(x.value instanceof HTMLElement?D(x.value):x.value.forEach(d=>D(d)))});const O=oe(()=>j.value.filter(d=>{var r,w;return d.source_id===((w=(r=m.value)==null?void 0:r.sources)==null?void 0:w[c.value].id)}));return(d,r)=>{var w,u,p,f,y,i;return t(),g("div",Dn,[e(m)?(t(),g(me,{key:0},[e(O).length===0?(t(),g("div",{key:0,class:te(["py-0.5 text-gray-500",{"ml-13.55":e(c)===0,"ml-19.25":e(c)!==0}])},h(d.$t("general.empty")),3)):U("",!0),(w=e(m).sources)!=null&&w[e(c)]&&e(m).sources[e(c)].enabled?(t(),g("div",{ref_key:"menuRefs",ref:x,key:`sortable-${(u=e(l))==null?void 0:u.id}-${(p=e(l))!=null&&p.id&&((f=e(l))==null?void 0:f.id)in e(a)?e(a)[(y=e(l))==null?void 0:y.id]:"0"}`,"nc-source":(i=e(l))==null?void 0:i.id},[(t(!0),g(me,null,xt(e(O),v=>{var M;return t(),b(In,{key:v.id,class:"nc-tree-item text-sm","data-order":v.order,"data-id":v.id,table:v,base:e(m),"source-index":e(c),"data-title":v.title,"data-source-id":(M=e(l))==null?void 0:M.id,"data-type":v.type},null,8,["data-order","data-id","table","base","source-index","data-title","data-source-id","data-type"])}),128))],8,Sn)):U("",!0)],64)):U("",!0)])}}}),jn={key:0,class:"flex flex-row items-center py-2 px-2.25 bg-gray-50 rounded-lg text-gray-700 mb-4"},Cn={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Vn=ie({__name:"ProjectDelete",props:{visible:{type:Boolean},baseId:{}},emits:["update:visible"],setup(_,{emit:L}){const m=_,l=ze(m,"visible",L),{closeTab:T}=ot(),B=Ae(),{deleteProject:j,navigateToFirstProjectOrHome:I}=B,{bases:k}=X(B),{removeFromRecentViews:a}=Be(),{refreshCommandPalette:x}=Qe(),$=oe(()=>k.value.get(m.baseId)),D=S(!1),O=async()=>{if(!$.value)return;const d=JSON.parse(JSON.stringify($.value));D.value=!0;try{await j(d.id),await T(d.id),x(),l.value=!1,d.id===B.activeProjectId&&await I()}catch(r){re.error(await Ie(r))}finally{D.value=!1,a({baseId:d.id})}};return(d,r)=>{const w=$t,u=Is;return t(),b(u,{visible:e(l),"onUpdate:visible":r[0]||(r[0]=p=>ne(l)?l.value=p:null),"entity-name":d.$t("objects.project"),"on-delete":O},{"entity-preview":o(()=>[e($)?(t(),g("div",jn,[s(w,{type:e($).type,class:"nc-view-icon px-1.5 w-10"},null,8,["type"]),n("div",Cn,h(e($).title),1)])):U("",!0)]),_:1},8,["visible","entity-name"])}}}),Mn={class:"mt-4"},Pn={class:"prose-md self-center text-gray-500 mt-4"},En={class:"text-xs p-2"},Nn={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Bn=ie({__name:"ProjectDuplicate",props:{modelValue:{type:Boolean},base:{}},emits:["update:modelValue"],setup(_,{emit:L}){const m=_,c=L,{refreshCommandPalette:l}=Qe(),{api:T}=yt(),{$e:B,$poller:j}=je(),I=Ae(),{loadProjects:k,createProject:a}=I,{bases:x}=X(I),{navigateToProject:$}=xe(),D=ze(m,"modelValue",c),O=S({includeData:!0,includeViews:!0,includeHooks:!0}),d=oe(()=>{const{includeData:p,includeViews:f,includeHooks:y}=O.value;return{excludeData:!p,excludeViews:!f,excludeHooks:!y}}),r=S(!1),w=async()=>{try{r.value=!0;const p=ls[Math.floor(Math.random()*1e3)%ls.length],y=aa(p).complement(),i=await T.base.duplicate(m.base.id,{options:d.value,base:{fk_workspace_id:m.base.fk_workspace_id,type:m.base.type,color:p,meta:JSON.stringify({theme:{primaryColor:p,accentColor:y.toHex8String()}})}});j.subscribe({id:i.id},async v=>{if(v.status!=="close")if(v.status===tt.COMPLETED){await k("workspace");const M=x.value.get(i.base_id);M&&await $({workspaceId:Ke?M.fk_workspace_id:void 0,baseId:M.id,type:M.type}),l(),r.value=!1,D.value=!1}else v.status===tt.FAILED&&(re.error("Failed to duplicate project"),await k("workspace"),l(),r.value=!1,D.value=!1)}),B("a:base:duplicate")}catch(p){re.error(await Ie(p)),r.value=!1,D.value=!1}};gt("Enter",()=>{D.value&&w()});const u=S(!1);return(p,f)=>{const y=Rt,i=Ut,v=Ce,M=it,F=Te("e");return p.base?(t(),b(M,{key:0,visible:e(D),"onUpdate:visible":f[5]||(f[5]=V=>ne(D)?D.value=V:null),closable:!e(r),"mask-closable":!e(r),keyboard:!e(r),class:"!w-[30rem]","wrap-class-name":"nc-modal-base-duplicate"},{default:o(()=>[n("div",null,[n("div",{class:"prose-xl font-bold self-center",onDblclick:f[0]||(f[0]=V=>u.value=!e(u))},h(p.$t("general.duplicate"))+" "+h(p.$t("objects.project")),33),n("div",Mn,h(p.$t("msg.warning.duplicateProject")),1),n("div",Pn,h(p.$t("title.advancedSettings")),1),s(y,{class:"!m-0 !p-0 !my-2"}),n("div",En,[s(i,{checked:e(O).includeData,"onUpdate:checked":f[1]||(f[1]=V=>e(O).includeData=V),disabled:e(r)},{default:o(()=>[A(h(p.$t("labels.includeData")),1)]),_:1},8,["checked","disabled"]),s(i,{checked:e(O).includeViews,"onUpdate:checked":f[2]||(f[2]=V=>e(O).includeViews=V),disabled:e(r)},{default:o(()=>[A(h(p.$t("labels.includeView")),1)]),_:1},8,["checked","disabled"]),G(s(i,{checked:e(O).includeHooks,"onUpdate:checked":f[3]||(f[3]=V=>e(O).includeHooks=V),disabled:e(r)},{default:o(()=>[A(h(p.$t("labels.includeWebhook")),1)]),_:1},8,["checked","disabled"]),[[ms,e(u)]])])]),n("div",Nn,[e(r)?U("",!0):(t(),b(v,{key:"back",type:"secondary",onClick:f[4]||(f[4]=V=>D.value=!1)},{default:o(()=>[A(h(p.$t("general.cancel")),1)]),_:1})),G((t(),b(v,{key:"submit",loading:e(r),onClick:w},{default:o(()=>[A(h(p.$t("general.confirm")),1)]),_:1},8,["loading"])),[[F,["a:base:duplicate"]]])])]),_:1},8,["visible","closable","mask-closable","keyboard"])):U("",!0)}}}),Ln=st(()=>at(()=>import("./EmojiPicker.ad242dd9.js"),["./EmojiPicker.ad242dd9.js","./entry.5958c07b.js","./entry.bdecbb78.css","./iconify.e2b5aaa4.js","./_plugin-vue_export-helper.c27b6911.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./EmojiPicker.9b8b75ab.css"],import.meta.url).then(_=>_.default||_)),On=st(()=>at(()=>import("./Erd.a74f9dce.js"),["./Erd.a74f9dce.js","./View.vue.611b527c.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Overlay.df272e53.js","./_plugin-vue_export-helper.c27b6911.js","./Overlay.09be8605.css","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./FormItemContext.ddc65fa5.js","./createForOfIteratorHelper.33de41ba.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./View.5176b468.css"],import.meta.url).then(_=>_.default||_)),Un=["data-testid","data-base-id"],Rn=["data-testid"],An={class:"flex items-center select-none w-6 h-full"},zn={class:"flex gap-2 items-center"},Gn={class:"flex gap-2 items-center"},Fn={class:"flex gap-2 items-center"},Wn={class:"flex gap-2 items-center"},Hn={class:"flex gap-2 items-center"},qn={class:"flex gap-2 items-center"},Kn={class:"flex gap-2 items-center"},Jn={key:0,class:"flex-1"},Yn={class:"transition-height duration-200"},Qn={key:1,class:"transition-height duration-200"},Zn={class:"border-none sortable-list"},Xn={class:"nc-sidebar-expand nc-sidebar-node-btn flex flex-row items-center -mt-2 xs:mt-3 xs:border-1 xs:border-gray-200 xs:px-2.25 xs:py-0.5 xs:rounded-md !xs:mr-0.25"},el={class:"nc-sidebar-node min-w-20 w-full flex flex-row group py-0.25"},tl=["onContextmenu"],sl=["onContextmenu"],al=["data-testid"],ol={class:"flex flex-row items-center gap-x-0.25 w-12.25"},nl={class:"flex gap-2 items-center"},ll=["nc-source"],il={class:"nc-base-option-item flex gap-2 items-center"},rl={class:"nc-base-option-item flex gap-2 items-center"},cl={class:"nc-base-option-item flex gap-2 items-center text-red-600"},dl={class:"h-[80vh]"},ul=ie({__name:"ProjectNode",setup(_,{expose:L}){const m=_s(oa,{class:"!text-gray-400",style:{fontSize:"0.85rem"},spin:!0}),l=Bt().currentRoute,{isSharedBase:T}=X(Ne()),{setMenuContext:B,openRenameTableDialog:j,duplicateTable:I,contextMenuTarget:k}=Se(zt),a=Se(ct),x=Ae(),{isMobileMode:$}=xe(),{createProject:D,updateProject:O,getProjectMetaInfo:d}=x,{bases:r}=X(x),{loadProjectTables:w}=we(),{activeTable:u}=X(we()),{appInfo:p}=xe(),{orgRoles:f,isUIAllowed:y}=Ee();ot();const i=S(!1),v=S(""),M=S(""),F=S(!1),{t:V}=bt(),Y=S(),W=Se(Dt),{activeProjectId:R}=X(Ae()),{baseUrl:E}=Ne(),Q=Se(ks,()=>{}),{$e:H}=je(),q=S(!1),z=S({}),ue=S([]),[ve]=na(),We=S(""),Ge=S({}),P=S(!1),se=S(!1),ae=oe(()=>{var K;const N=String((K=l.value)==null?void 0:K.name).split("baseId-index-index");if(N.length<=1)return!1;const C=N[N.length-1];return C.split("-").length===2||C.split("-").length===1}),Z=oe(()=>["airtableImport","csvImport","jsonImport","excelImport"].some(N=>y(N))),de=()=>{i.value=!0,v.value=a.value.title,Mt(()=>{var N,C,K;(N=Y.value)==null||N.focus(),(C=Y.value)==null||C.select(),(K=Y.value)==null||K.scrollIntoView()})},ce=async()=>{var N;if(v.value)try{await O(a.value.id,{title:v.value}),i.value=!1,v.value="",H("a:base:rename"),ps(`${(N=a.value)==null?void 0:N.title}`)}catch(C){re.error(await Ie(C))}},{copy:ee}=Ss(!0),pe=async()=>{try{await ee(Object.entries(await d(a.value.id)).map(([N,C])=>`${N}: **${C}**`).join(`
`))&&re.info(V("msg.info.copiedToClipboard"))}catch(N){console.error(N),re.error(N.message)}};L({enableEditMode:de});const he=async(N,C)=>{try{const K={...C.meta||{},icon:N};x.updateProject(C.id,{meta:JSON.stringify(K)}),H("a:base:icon:navdraw",{icon:N})}catch(K){re.error(await Ie(K))}};function Fe(N){var pt,mt,_t;const C=S(!0);let K=(pt=a.value.sources)==null?void 0:pt[0].id;if(typeof N=="number"&&(K=(mt=a.value.sources)==null?void 0:mt[N].id),!K||!((_t=a.value)!=null&&_t.id))return;const{close:be}=Me(xs,{modelValue:C,sourceId:K,baseId:a.value.id,onCreate:Ze,"onUpdate:modelValue":()=>Ze()});function Ze($e){C.value=!1,$e&&(a.value.isExpanded=!0,(!ue.value||!ue.value.includes(`collapse-${K}`))&&ue.value.push(`collapse-${K}`),setTimeout(()=>{const Ue=document.querySelector(`[data-table-id="${$e.id}"]`);Ue&&(Ue==null||Ue.scrollIntoView({behavior:"smooth",block:"nearest"}))},1e3),be(1e3))}}const ke=S(!1);async function He(){if(ke.value)return;ke.value=!0,!x.isProjectPopulated(a.value.id)&&a.value.type===et.DB&&w(a.value.id);try{Fe(),!a.value.isExpanded&&a.value.type!==et.DB&&(a.value.isExpanded=!0)}finally{ke.value=!1}}const le=async(N,C,K)=>{if(!N)return;K||H("c:base:open"),C=$.value||C,K=$.value||K,K?N.isExpanded=!N.isExpanded:N.isExpanded=!0;const be=x.isProjectPopulated(N.id);if(be||(N.isLoading=!0),C||await Xe(E({id:N.id,type:"database",isSharedBase:T.value})),be||await w(N.id),!be){const Ze=r.value.get(N.id);Ze.isLoading=!1}};function Oe(N){H("c:project:relation");const C=S(!0),{close:K}=Me(To,{modelValue:C,sourceId:N.id,"onUpdate:modelValue":()=>be(),baseId:a.value.id});function be(){C.value=!1,K(1e3)}}const Ft=oe(()=>{var N,C;if(k.type==="source")return k.value;if(k.type==="table"){const K=(C=(N=a.value)==null?void 0:N.sources)==null?void 0:C.find(be=>be.id===k.value.source_id);if(K)return K}return null});Pe(()=>{var N;return(N=u.value)==null?void 0:N.id},async()=>{if(!u.value)return;const N=u.value.source_id;N&&(ue.value.includes(`collapse-${N}`)||ue.value.push(`collapse-${N}`))},{immediate:!0}),gt("Escape",()=>{q.value&&(q.value=!1);for(const N of Object.keys(z.value))z.value[N]=!1});const ut=S(!1),Tt=S(),Vs=N=>{Tt.value=N,ut.value=!0},Ms=()=>{P.value=!0,H("c:table:delete")},Ps=()=>{se.value=!0,H("c:project:delete")};return(N,C)=>{var Kt,Jt,Yt,Qt,Zt;const K=Ve,be=Ce,Ze=Va,pt=$t,mt=Ln,_t=wt,$e=rt,Ue=ws,Wt=Eo,jt=It,Ct=dt,Ht=Tn,qt=wa,Es=fs,Ns=Ma,Bs=Pa,Ls=js,Os=Vn,Us=Bn,Rs=On,As=it,_e=Te("e");return t(),g(me,null,[s(Ct,{trigger:["contextmenu"],"overlay-class-name":"nc-dropdown-tree-view-context-menu"},la({default:o(()=>{var De,nt,ft,Xt,es,ts,ss,as,os;return[n("div",{class:te(["mx-1 nc-base-sub-menu rounded-md",{active:e(a).isExpanded}]),"data-testid":`nc-sidebar-base-${e(a).title}`,"data-base-id":e(a).id},[n("div",{class:"flex items-center gap-0.75 py-0.25 cursor-pointer",onContextmenu:C[15]||(C[15]=J=>e(B)("base",e(a)))},[n("div",{ref:"baseNodeRefs",class:te([{"bg-primary-selected active":e(R)===e(a).id&&e(ae)&&!e($),"hover:bg-gray-200":!(e(R)===e(a).id&&e(ae))},"nc-sidebar-node base-title-node h-7.25 flex-grow rounded-md group flex items-center w-full pr-1"]),"data-testid":`nc-sidebar-base-title-${e(a).title}`},[G((t(),b(be,{type:"text",size:"xxsmall",class:"nc-sidebar-node-btn nc-sidebar-expand ml-0.75 !xs:visible",onClick:C[0]||(C[0]=J=>le(e(a),!0,!0))},{default:o(()=>[s(K,{icon:"triangleFill",class:te(["group-hover:visible cursor-pointer transform transition-transform duration-500 h-1.5 w-1.75 rotate-90 !xs:visible",{"!rotate-180":e(a).isExpanded,"!visible":e(q)}])},null,8,["class"])]),_:1})),[[_e,["c:base:expand"]]]),n("div",{class:"flex items-center mr-1",onClick:C[2]||(C[2]=J=>le(e(a)))},[G((t(),g("div",An,[e(a).isLoading?(t(),b(Ze,{key:0,class:"!ml-1.25 !flex !flex-row !items-center !my-0.5 w-8",indicator:e(m)},null,8,["indicator"])):(t(),b(mt,{key:(De=e(a).meta)==null?void 0:De.icon,emoji:(nt=e(a).meta)==null?void 0:nt.icon,readonly:!0,size:"small",onEmojiSelected:C[1]||(C[1]=J=>he(J,e(a)))},{default:o(()=>[s(pt,{type:e(a).type},null,8,["type"])]),_:1},8,["emoji"]))])),[[_e,["c:base:emojiSelect"]]])]),e(i)?G((t(),g("input",{key:0,ref_key:"input",ref:Y,"onUpdate:modelValue":C[3]||(C[3]=J=>ne(v)?v.value=J:null),class:te(["flex-grow leading-1 outline-0 ring-none capitalize !text-inherit !bg-transparent w-4/5",{"text-black font-semibold":e(R)===e(a).id&&e(ae)&&!e($)}]),onClick:C[4]||(C[4]=ge(()=>{},["stop"])),onKeyup:[vt(ce,["enter"]),vt(ce,["esc"])],onBlur:ce},null,34)),[[ia,e(v)]]):(t(),b(_t,{key:1,class:te(["nc-sidebar-node-title capitalize text-ellipsis overflow-hidden select-none",{"text-black font-semibold":e(R)===e(a).id&&e(ae)}]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},"show-on-truncate-only":""},{title:o(()=>[A(h(e(a).title),1)]),default:o(()=>[n("span",{onClick:C[5]||(C[5]=J=>le(e(a)))},h(e(a).title),1)]),_:1},8,["class"])),n("div",{class:te({"flex flex-grow h-full":!e(i)}),onClick:C[6]||(C[6]=J=>le(e(a)))},null,2),e(T)?U("",!0):(t(),b(Ct,{key:2,visible:e(q),"onUpdate:visible":C[14]||(C[14]=J=>ne(q)?q.value=J:null),trigger:["click"]},{overlay:o(()=>[s(jt,{class:"nc-scrollbar-md",style:{maxHeight:"70vh",overflow:"overlay"},"data-testid":`nc-sidebar-base-${e(a).title}-options`,onClick:C[13]||(C[13]=J=>q.value=!1)},{default:o(()=>[e(T)?U("",!0):(t(),g(me,{key:0},[e(y)("baseRename")?(t(),b($e,{key:0,"data-testid":"nc-sidebar-project-rename",onClick:de},{default:o(()=>[G((t(),g("div",zn,[s(K,{icon:"edit",class:"group-hover:text-black"}),A(" "+h(N.$t("general.rename")),1)])),[[_e,["c:base:rename"]]])]),_:1})):U("",!0),e(y)("baseDuplicate",{roles:[e(is)(e(f)),e(W)].join()})?(t(),b($e,{key:1,"data-testid":"nc-sidebar-base-duplicate",onClick:C[8]||(C[8]=J=>Vs(e(a)))},{default:o(()=>[G((t(),g("div",Gn,[s(K,{icon:"duplicate",class:"text-gray-700"}),A(" "+h(N.$t("general.duplicate")),1)])),[[_e,["c:base:duplicate"]]])]),_:1})):U("",!0),["baseDuplicate","baseRename"].some(J=>e(y)(J))?(t(),b(Ue,{key:2})):U("",!0),("isEeUI"in N?N.isEeUI:e(Ke))?U("",!0):(t(),b($e,{key:"copy","data-testid":"nc-sidebar-base-copy-base-info",onClick:ge(pe,["stop"])},{default:o(()=>[G((t(),g("div",Fn,[s(K,{icon:"copy",class:"group-hover:text-black"}),A(" "+h(N.$t("activity.account.projInfo")),1)])),[[_e,["c:base:copy-proj-info"]]])]),_:1})),s($e,{key:"erd","data-testid":"nc-sidebar-base-relations",onClick:C[9]||(C[9]=J=>{var qe,fe;return Oe((fe=(qe=e(a))==null?void 0:qe.sources)==null?void 0:fe[0])})},{default:o(()=>[G((t(),g("div",Wn,[s(K,{icon:"erd"}),A(" "+h(N.$t("title.relations")),1)])),[[_e,["c:base:erd"]]])]),_:1}),e(y)("apiDocs")?(t(),b($e,{key:"api","data-testid":"nc-sidebar-base-rest-apis",onClick:C[10]||(C[10]=ge(()=>{e(H)("c:base:api-docs"),e(Ca)(`/api/v2/meta/bases/${e(a).id}/swagger`,e(p).ncSiteUrl)},["stop"]))},{default:o(()=>[G((t(),g("div",Hn,[s(K,{icon:"snippet",class:"group-hover:text-black !max-w-3.9"}),A(" "+h(N.$t("activity.account.swagger")),1)])),[[_e,["c:base:api-docs"]]])]),_:1})):U("",!0)],64)),e(a).sources&&e(a).sources[0]&&e(Z)?(t(),g(me,{key:1},[s(Ue),s(Wt,{base:e(a),"onUpdate:base":C[11]||(C[11]=J=>ne(a)?a.value=J:null),source:e(a).sources[0]},null,8,["base","source"])],64)):U("",!0),["baseMiscSettings","baseDelete"].some(J=>e(y)(J))?(t(),b(Ue,{key:2})):U("",!0),e(y)("baseMiscSettings")?(t(),b($e,{key:"teamAndSettings","data-testid":"nc-sidebar-base-settings",class:"nc-sidebar-base-base-settings",onClick:C[12]||(C[12]=J=>e(Q)(!0,"teamAndAuth",void 0,e(a).id))},{default:o(()=>[G((t(),g("div",qn,[s(K,{icon:"settings",class:"group-hover:text-black"}),A(" "+h(N.$t("activity.settings")),1)])),[[_e,["c:base:settings"]]])]),_:1})):U("",!0),e(y)("baseDelete",{roles:[e(is)(e(f)),e(W)].join()})?(t(),b($e,{key:4,"data-testid":"nc-sidebar-base-delete",class:"!text-red-500 !hover:bg-red-50",onClick:Ps},{default:o(()=>[n("div",Kn,[s(K,{icon:"delete",class:"w-4"}),A(" "+h(N.$t("general.delete")),1)])]),_:1})):U("",!0)]),_:1},8,["data-testid"])]),default:o(()=>[G((t(),b(be,{class:te(["nc-sidebar-node-btn",{"!text-black !opacity-100":e(q)}]),"data-testid":"nc-sidebar-context-menu",type:"text",size:"xxsmall",onClick:C[7]||(C[7]=ge(()=>{},["stop"]))},{default:o(()=>[s(K,{icon:"threeDotHorizontal",class:"text-xl w-4.75"})]),_:1},8,["class"])),[[_e,["c:base:options"]]])]),_:1},8,["visible"])),e(y)("tableCreate",{roles:e(W)})?G((t(),b(be,{key:3,class:te(["nc-sidebar-node-btn",{"!text-black !visible":e(ke),"!visible":e(q)}]),size:"xxsmall",type:"text","data-testid":"nc-sidebar-add-base-entity",loading:e(ke),onClick:ge(He,["stop"])},{default:o(()=>[s(K,{icon:"plus",class:"text-xl leading-5",style:{"-webkit-text-stroke":"0.15px"}})]),_:1},8,["class","loading"])),[[_e,["c:base:create-table"]]]):U("",!0)],10,Rn)],32),e(a).id&&!e(a).isLoading?(t(),g("div",{key:"g1",class:te(["overflow-x-hidden transition-max-height",{"max-h-0":!e(a).isExpanded}])},[e(a)&&((ft=e(a))!=null&&ft.sources)?(t(),g("div",{key:0,class:te(["flex-1 overflow-y-auto overflow-x-hidden flex flex-col",{"mb-[20px]":e(T)}])},[(ts=(es=(Xt=e(a))==null?void 0:Xt.sources)==null?void 0:es[0])!=null&&ts.enabled?(t(),g("div",Jn,[n("div",Yn,[s(Ht,{base:e(a),"source-index":0},null,8,["base"])])])):U("",!0),(os=(as=(ss=e(a))==null?void 0:ss.sources)==null?void 0:as.slice(1).filter(J=>J.enabled))!=null&&os.length?(t(),g("div",Qn,[n("div",Zn,[(t(!0),g(me,null,xt(e(a).sources,(J,qe)=>(t(),g("div",{key:`source-${J.id}`},[qe===0?(t(),g(me,{key:0},[],64)):J&&J.enabled?G((t(),b(Bs,{key:1,activeKey:e(ue),"onUpdate:activeKey":C[17]||(C[17]=fe=>ne(ue)?ue.value=fe:null),class:te(["!mx-0 !px-0 nc-sidebar-source-node",[{hidden:e(ve)&&!!e(We)}]]),"expand-icon-position":"left",bordered:!1,ghost:""},{expandIcon:o(({isActive:fe})=>[n("div",Xn,[s(K,{icon:"triangleFill",class:te(["nc-sidebar-source-node-btns -mt-0.75 invisible xs:visible cursor-pointer transform transition-transform duration-500 h-1.5 w-1.5 text-gray-500 rotate-90",{"!rotate-180":fe}])},null,8,["class"])])]),default:o(()=>[(t(),b(Ns,{key:`collapse-${J.id}`},{header:o(()=>[n("div",el,[qe===0?(t(),g("div",{key:0,class:"source-context flex items-center gap-2 text-gray-800 nc-sidebar-node-title",onContextmenu:fe=>e(B)("source",J)},[s(qt,{class:"min-w-4 !xs:min-w-4.25 !xs:w-4.25 !xs:text-sm"}),A(" "+h(N.$t("general.default")),1)],40,tl)):(t(),g("div",{key:1,class:"source-context flex flex-grow items-center gap-1.75 text-gray-800 min-w-1/20 max-w-full",onContextmenu:fe=>e(B)("source",J)},[s(qt,{class:"min-w-4 !xs:min-w-4.25 !xs:w-4.25 !xs:text-sm"}),n("div",{"data-testid":`nc-sidebar-base-${J.alias}`,class:"nc-sidebar-node-title flex capitalize text-ellipsis overflow-hidden select-none",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},h(J.alias||""),9,al),s(Es,{class:"xs:hidden"},{title:o(()=>[A(h(N.$t("objects.externalDb")),1)]),default:o(()=>[n("div",null,[s(K,{icon:"info",class:"text-gray-400 -mt-0.5 hover:text-gray-700 mr-1"})])]),_:1})],40,sl)),n("div",ol,[s(Ct,{visible:e(z)[J.id],trigger:["click"],"onUpdate:visible":fe=>e(z)[J.id]=fe},{overlay:o(()=>[s(jt,{class:"nc-scrollbar-md",style:{maxHeight:"70vh",overflow:"overlay"},onClick:fe=>e(z)[J.id]=!1},{default:o(()=>[s($e,{key:"erd",onClick:fe=>Oe(J)},{default:o(()=>[G((t(),g("div",nl,[s(K,{icon:"erd"}),A(" "+h(N.$t("title.relations")),1)])),[[_e,["c:source:erd"]]])]),_:2},1032,["onClick"]),e(Z)?(t(),b(Wt,{key:0,base:e(a),"onUpdate:base":C[16]||(C[16]=fe=>ne(a)?a.value=fe:null),source:J},null,8,["base","source"])):U("",!0)]),_:2},1032,["onClick"])]),default:o(()=>[G((t(),b(be,{class:te(["nc-sidebar-node-btn",{"!text-black !opacity-100":e(z)[J.id]}]),type:"text",size:"xxsmall",onClick:ge(fe=>e(z)[J.id]=!e(z)[J.id],["stop"])},{default:o(()=>[s(K,{icon:"threeDotHorizontal",class:"text-xl w-4.75"})]),_:2},1032,["class","onClick"])),[[_e,["c:source:options"]]])]),_:2},1032,["visible","onUpdate:visible"]),e(y)("tableCreate",{roles:e(W)})?G((t(),b(be,{key:0,type:"text",size:"xxsmall",class:"nc-sidebar-node-btn",onClick:ge(fe=>Fe(qe),["stop"])},{default:o(()=>[s(K,{icon:"plus",class:"text-xl leading-5",style:{"-webkit-text-stroke":"0.15px"}})]),_:2},1032,["onClick"])),[[_e,["c:source:add-table"]]]):U("",!0)])])]),default:o(()=>[(t(),g("div",{ref_for:!0,ref:"menuRefs",key:`sortable-${J.id}-${J.id&&J.id in e(Ge)?e(Ge)[J.id]:"0"}`,"nc-source":J.id},[s(Ht,{base:e(a),"source-index":qe},null,8,["base","source-index"])],8,ll))]),_:2},1024))]),_:2},1032,["activeKey","class"])),[[_e,["c:source:toggle-expand"]]]):U("",!0)]))),128))])])):U("",!0)],2)):U("",!0)],2)):U("",!0)],10,Un)]}),_:2},[e(T)?void 0:{name:"overlay",fn:o(()=>[s(jt,{class:"!py-0 rounded text-sm"},{default:o(()=>{var De,nt;return[e(k).type==="base"&&e(a).type==="database"?(t(),g(me,{key:0},[],64)):e(k).type==="source"?(t(),g(me,{key:1},[],64)):e(k).type==="table"?(t(),g(me,{key:2},[e(y)("tableRename")?(t(),b($e,{key:0,onClick:C[18]||(C[18]=ft=>e(j)(e(k).value,!0))},{default:o(()=>[G((t(),g("div",il,[s(K,{icon:"edit",class:"text-gray-700"}),A(" "+h(N.$t("general.rename")),1)])),[[_e,["c:table:rename"]]])]),_:1})):U("",!0),e(y)("tableDuplicate")&&((De=e(Ft))!=null&&De.is_meta||(nt=e(Ft))!=null&&nt.is_local)?(t(),b($e,{key:1,onClick:C[19]||(C[19]=ft=>e(I)(e(k).value))},{default:o(()=>[G((t(),g("div",rl,[s(K,{icon:"duplicate",class:"text-gray-700"}),A(" "+h(N.$t("general.duplicate")),1)])),[[_e,["c:table:duplicate"]]])]),_:1})):U("",!0),s(Ue),e(y)("table-delete")?(t(),b($e,{key:2,class:"!hover:bg-red-50",onClick:Ms},{default:o(()=>[n("div",cl,[s(K,{icon:"delete"}),A(" "+h(N.$t("general.delete")),1)])]),_:1})):U("",!0)],64)):U("",!0)]}),_:1})]),key:"0"}]),1024),(Kt=e(k).value)!=null&&Kt.id&&((Jt=e(a))!=null&&Jt.id)?(t(),b(Ls,{key:0,visible:e(P),"onUpdate:visible":C[20]||(C[20]=De=>ne(P)?P.value=De:null),"table-id":(Yt=e(k).value)==null?void 0:Yt.id,"base-id":(Qt=e(a))==null?void 0:Qt.id},null,8,["visible","table-id","base-id"])):U("",!0),s(Os,{visible:e(se),"onUpdate:visible":C[21]||(C[21]=De=>ne(se)?se.value=De:null),"base-id":(Zt=e(a))==null?void 0:Zt.id},null,8,["visible","base-id"]),e(Tt)?(t(),b(Us,{key:1,modelValue:e(ut),"onUpdate:modelValue":C[22]||(C[22]=De=>ne(ut)?ut.value=De:null),base:e(Tt)},null,8,["modelValue","base"])):U("",!0),s(As,{visible:e(F),"onUpdate:visible":C[23]||(C[23]=De=>ne(F)?F.value=De:null),size:"large"},{default:o(()=>[n("div",dl,[s(Rs,{"source-id":e(M)},null,8,["source-id"])])]),_:1},8,["visible"])],64)}}});const pl=Le(ul,[["__scopeId","data-v-d6f95a2b"]]),ml={class:"flex items-center justify-center mt-8"},_l={class:"flex flex-col gap-4 items-center text-gray-500"},fl=n("div",{class:"font-weight-medium"},"No Projects",-1),vl=n("div",{class:"text-xs"},"Create Base",-1),bl={class:"flex gap-2 justify mt-1"},yl={class:"flex gap-2 items-center justify-center text-xs"},gl=ie({__name:"EmptyPlaceholder",props:{buttons:{type:Boolean}},setup(_){const L=_,m=S(!1),c=S(),l=T=>{c.value=T,m.value=!0};return(T,B)=>{const j=Ea,I=$t,k=ra,a=Gt;return t(),g("div",ml,[n("div",_l,[s(j),fl,L.buttons?(t(),g(me,{key:0},[vl,n("div",bl,[s(k,{class:"flex-1 nc-btn",onClick:B[0]||(B[0]=x=>l(e(et).DB))},{default:o(()=>[n("div",yl,[s(I,{type:e(et).DB,class:"text-[#2824FB] text-lg"},null,8,["type"]),A(" New Database Base ")])]),_:1})]),s(a,{modelValue:e(m),"onUpdate:modelValue":B[1]||(B[1]=x=>ne(m)?m.value=x:null),type:e(c)},null,8,["modelValue","type"])],64)):U("",!0)])])}}}),xl=_=>!!(_.offsetWidth||_.offsetHeight||_.getClientRects().length),wl=ie({__name:"ProjectWrapper",props:{baseRole:{},base:{}},setup(_){const L=_,m=Re(L,"baseRole"),c=Re(L,"base");return Je(Dt,m),Je(ct,c),(l,T)=>Pt(l.$slots,"default")}}),hl={class:"nc-treeview-container flex flex-col justify-between select-none"},kl={key:0,class:"text-gray-500 font-medium pl-3.5 mb-1"},$l={mode:"inline",class:"nc-treeview pb-0.5 flex-grow min-h-50 overflow-x-hidden"},Il=ie({__name:"index",setup(_){const{isUIAllowed:L}=Ee(),{$e:m}=je(),c=Bt(),l=c.currentRoute,T=Ae(),{bases:B,basesList:j,activeProjectId:I}=X(T),{isWorkspaceLoading:k}=X(Ye()),a=S(!1),x=Ne(),{isSharedBase:$}=X(x),{activeTable:D}=X(we()),O=ds({}),d=(i,v)=>{O.type=i,O.value=v};function r(i,v=!1){if(!i||!i.source_id)return;m("c:table:rename");const M=S(!0),{close:F}=Me(wo,{modelValue:M,tableMeta:i,sourceId:i.source_id,"onUpdate:modelValue":V});function V(){M.value=!1,F(1e3)}}function w(i,v){if(!i&&!(v||j.value[0].id))return;m("c:table:create:navdraw");const M=S(!0),{close:F}=Me(xs,{modelValue:M,sourceId:i,baseId:v||j.value[0].id,"onUpdate:modelValue":V});function V(){M.value=!1,F(1e3)}}const u=async i=>{if(!i||!i.id||!i.base_id)return;const v=S(!0);m("c:table:duplicate");const{close:M}=Me(Do,{modelValue:v,table:i,"onUpdate:modelValue":F});function F(){v.value=!1,M(1e3)}},p=oe(()=>L("tableCreate")&&l.value.name!=="index"&&l.value.name!=="index-index"&&l.value.name!=="index-index-create"&&l.value.name!=="index-index-create-external"&&l.value.name!=="index-user-index");rs(document,"keydown",async i=>{var M;const v=ca()?i.metaKey:i.ctrlKey;if(i.altKey&&!i.shiftKey&&!v)switch(i.keyCode){case 84:{if(p.value&&!da()){i.preventDefault(),m("c:shortcut",{key:"ALT + T"});const F=I.value,V=F?B.value.get(F):void 0;if(!V)return;F&&w((M=V.sources)==null?void 0:M[0].id,F)}break}case 76:{l.value.params.baseId&&c.push({query:{...l.value.query,clear:l.value.query.clear==="1"?void 0:"1"}});break}case 68:{i.stopPropagation(),a.value=!0;break}}});const f=i=>{var v;(v=document.querySelector(".source-context, .table-context"))!=null&&v.contains(i.target)||d("main")};Je(zt,{setMenuContext:d,duplicateTable:u,openRenameTableDialog:r,contextMenuTarget:O}),rs(document,"contextmenu",f,!0);const y=()=>{var v;const i=document.querySelector(`.nc-treeview [data-table-id="${(v=D.value)==null?void 0:v.id}"]`);i&&(i==null||i.scrollIntoView({behavior:"smooth",block:"nearest"}))};return Pe(()=>{var i;return(i=D.value)==null?void 0:i.id},()=>{var i;(i=D.value)!=null&&i.id&&setTimeout(()=>{y()},1e3)},{immediate:!0}),Pe(I,()=>{const i=document.querySelector(`.nc-treeview [data-base-id="${I.value}"]`);i&&xl(i)&&(i==null||i.scrollIntoView({behavior:"smooth"}))},{immediate:!0}),(i,v)=>{var Y;const M=pl,F=gl,V=Gt;return t(),g("div",hl,[e($)?U("",!0):(t(),g("div",kl,h(i.$t("objects.projects")),1)),n("div",$l,[(Y=e(j))!=null&&Y.length?(t(!0),g(me,{key:0},xt(e(j),W=>(t(),b(wl,{key:W.id,"base-role":W.project_role,base:W},{default:o(()=>[s(M)]),_:2},1032,["base-role","base"]))),128)):e(k)?U("",!0):(t(),b(F,{key:1}))]),s(V,{modelValue:e(a),"onUpdate:modelValue":v[0]||(v[0]=W=>ne(a)?a.value=W:null)},null,8,["modelValue"])])}}});const Dl={},Sl={class:"flex flex-row items-center w-full bg-white rounded-lg border-1 border-brand-500 shadow-sm mb-0.5 overflow-hidden"},Tl={class:"flex flex-grow !no-underline items-center justify-center border-r-1 h-full hover:bg-gray-100",href:"https://app.nocodb.com/#/signin?utm_source=OSS&utm_medium=OSS&utm_campaign=OSS&utm_content=OSS"},jl=n("div",{class:"px-1 text-gray-500 prose-sm",style:{"line-height":"1.3125rem"}},"Try NocoDB Cloud",-1),Cl=[jl],Vl={class:"w-72 bg-transparent overflow-hidden rounded-3xl shadow border border-zinc-100"},Ml={class:"p-6 bg-white flex-col justify-start items-center gap-4 inline-flex pb-7 w-full"},Pl=n("div",{class:"self-stretch justify-start items-center gap-3 inline-flex"},[n("div",{class:"text-slate-800 text-lg font-semibold leading-9"},"NocoDB Cloud"),n("div",{class:"px-2 py-1 bg-brand-50 rounded-lg justify-center items-center gap-2 flex"},[n("div",{class:"text-brand-500 text-sm font-medium leading-tight"},"Usage based")])],-1),El=n("div",{class:"self-stretch justify-start items-center gap-2 inline-flex"},[n("div",{class:"text-gray-500 text-base font-bold line-through leading-normal"},[A(" $ 99 "),n("span",{class:"font-thin text-gray-500"}," Onwards ")]),n("div",{class:"text-neutral-900 text-4xl font-bold leading-10"},"Free")],-1),Nl=n("div",{class:"self-stretch text-gray-500 text-base leading-normal"},"/ month / workspace",-1),Bl={href:"https://app.nocodb.com/#/signin",target:"_blank",class:"!no-underline"},Ll=n("div",{class:"self-stretch text-center text-gray-500 text-xs font-medium leading-none mb-4"}," No credit card required ",-1),Ol={class:"flex flex-col items-start w-full"},Ul=n("div",{class:"self-stretch text-gray-500 text-base font-semibold leading-tight mb-2"},"Includes",-1),Rl={class:"self-stretch justify-between items-center inline-flex"},Al={class:"justify-end items-center gap-3 flex"},zl=n("div",{class:"text-brand-500 text-lg font-bold leading-normal"},"20 Users",-1),Gl={class:"self-stretch justify-between items-center inline-flex"},Fl={class:"justify-start items-center gap-3 flex"},Wl=n("div",{class:"text-slate-800 text-sm font-semibold leading-tight"},"300k rows / workspace",-1),Hl={class:"self-stretch justify-between items-center inline-flex"},ql={class:"justify-start items-center gap-3 flex"},Kl=n("div",{class:"text-slate-800 text-sm font-semibold leading-tight"},"25 GB+ storage",-1),Jl={class:"self-stretch justify-between items-center inline-flex"},Yl={class:"justify-start items-center gap-3 flex"},Ql=n("div",{class:"text-slate-800 text-sm font-semibold leading-tight"},"APIs : 10+ requests / second",-1),Zl={class:"self-stretch justify-start items-center gap-3 inline-flex"},Xl=n("div",{class:"text-slate-800 text-sm font-semibold leading-tight"},"Support for External Database",-1);function ei(_,L){const m=Ce,c=Ve,l=fs,T=Te("e");return t(),g("div",Sl,[G((t(),g("a",Tl,Cl)),[[T,["c:navbar:join-cloud"]]]),s(l,{"overlay-class-name":"nc-join-cloud-tooltip"},{title:o(()=>[n("div",Vl,[n("div",Ml,[Pl,El,Nl,n("a",Bl,[s(m,{class:"text-gray-700 text-base font-semibold leading-tight py-4 w-full"},{default:o(()=>[A("Start for Free")]),_:1})]),Ll,n("div",Ol,[Ul,n("div",Rl,[n("div",Al,[s(c,{icon:"check",class:"text-brand-500"}),zl])])]),n("div",Gl,[n("div",Fl,[s(c,{icon:"check",class:"text-brand-500"}),Wl])]),n("div",Hl,[n("div",ql,[s(c,{icon:"check",class:"text-brand-500"}),Kl])]),n("div",Jl,[n("div",Yl,[s(c,{icon:"check",class:"text-brand-500"}),Ql])]),n("div",Zl,[s(c,{icon:"check",class:"text-brand-500"}),Xl])])])]),default:o(()=>[s(m,{type:"text",size:"small",class:"!rounded-l-none !rounded-r-lg"},{default:o(()=>[s(c,{icon:"help",class:"!text-lg -mt-0.5 text-gray-700"})]),_:1})]),_:1})])}const ti=Le(Dl,[["render",ei]]),si=st(()=>at(()=>import("./Menu.31e05031.js"),["./Menu.31e05031.js","./Menu.vue.83be2fc7.js","./entry.5958c07b.js","./entry.bdecbb78.css"],import.meta.url).then(_=>_.default||_)),ai=_=>(Et("data-v-b988ca76"),_=_(),Nt(),_),oi={class:"flex w-full flex-col p-1 border-t-1 border-gray-200 gap-y-1"},ni={class:"flex flex-row py-2 px-3 gap-x-2 items-center hover:bg-gray-200 rounded-lg cursor-pointer h-10","data-testid":"nc-sidebar-userinfo"},li={class:"flex truncate"},ii={class:"flex gap-2 items-center"},ri={class:"menu-btn"},ci={class:"flex gap-2 items-center"},di={href:"https://discord.gg/5RgZmkW",target:"_blank",class:"!underline-transparent",rel:"noopener noreferrer"},ui={class:"menu-btn"},pi={href:"https://www.reddit.com/r/NocoDB",target:"_blank",class:"!underline-transparent",rel:"noopener noreferrer"},mi={class:"menu-btn"},_i={href:"https://twitter.com/nocodb",target:"_blank",class:"!underline-transparent"},fi={class:"menu-btn"},vi={class:"flex gap-2 items-center"},bi={class:"flex items-center text-gray-400 text-xs"},yi=ai(()=>n("div",{class:"flex-1"},null,-1)),gi={class:"bg-white max-h-50vh scrollbar-thin-dull min-w-64 !overflow-auto"},xi={href:"https://community.nocodb.com",target:"_blank",class:"!underline-transparent",rel:"noopener"},wi={class:"menu-btn"},hi={href:"https://docs.nocodb.com",target:"_blank",class:"!underline-transparent",rel:"noopener"},ki={class:"menu-btn"},$i={key:1,class:"text-gray-500 text-xs pl-3 mt-1"},Ii={key:2,class:"flex flex-row w-full justify-between pt-0.5 truncate"},Di=ie({__name:"UserInfo",setup(_){const{user:L,signOut:m,token:c,appInfo:l}=xe();La();const{leftSidebarState:T}=X(kt()),{copy:B}=Ss(!0),j=oe(()=>{var d,r;return(r=(d=L.value)==null?void 0:d.display_name)==null?void 0:r.trim()}),I=S(!1),k=S(!1),a=S(!1),{isMobileMode:x}=xe(),$=async()=>{a.value=!0;try{await m(!1),await Xe("/signin")}catch(d){console.error(d)}finally{a.value=!1}},D=async()=>{try{await B(c.value),k.value=!0}catch(d){console.error(d),re.error(d.message)}};Pe(I,()=>{k.value&&(k.value=!1)}),Pe(T,()=>{T.value==="peekCloseEnd"&&(I.value=!1)});const O=S(!1);return lt(()=>{O.value=!0}),(d,r)=>{const w=Na,u=Ve,p=Lt,f=rt,y=ws,i=ua,v=si,M=Oa,F=Ba,V=It,Y=dt,W=ti,R=Te("e");return t(),g("div",oi,[s(Y,{visible:e(I),"onUpdate:visible":r[0]||(r[0]=E=>ne(I)?I.value=E:null),placement:"topLeft","overlay-class-name":"!min-w-64"},{overlay:o(()=>[s(V,{"data-testid":"nc-sidebar-userinfo"},{default:o(()=>[s(f,{"data-testid":"nc-sidebar-user-logout",onClick:$},{default:o(()=>[G((t(),g("div",ii,[e(a)?(t(),b(p,{key:0,class:"!ml-0.5 !mr-0.5 !max-h-4.5 !-mt-0.5"})):(t(),b(u,{key:1,icon:"signout",class:"menu-icon"})),n("span",ri,h(d.$t("general.logout")),1)])),[[R,["c:user:logout"]]])]),_:1}),e(x)?U("",!0):(t(),b(f,{key:0,onClick:D},{default:o(()=>[G((t(),g("div",ci,[e(k)?(t(),b(u,{key:0,icon:"check",class:"group-hover:text-black menu-icon"})):(t(),b(u,{key:1,icon:"copy",class:"menu-icon"})),e(k)?(t(),g(me,{key:2},[A(h(d.$t("title.copiedAuthToken")),1)],64)):(t(),g(me,{key:3},[A(h(d.$t("title.copyAuthToken")),1)],64))])),[[R,["c:auth-token:copy"]]])]),_:1})),s(y),G((t(),g("a",di,[s(f,{class:"social-icon-wrapper"},{default:o(()=>[s(u,{class:"social-icon",icon:"discord"}),n("span",ui,h(d.$t("labels.community.joinDiscord")),1)]),_:1})])),[[R,["c:nocodb:discord"]]]),G((t(),g("a",pi,[s(f,{class:"social-icon-wrapper"},{default:o(()=>[s(u,{class:"social-icon",icon:"reddit"}),n("span",mi,h(d.$t("labels.community.joinReddit")),1)]),_:1})])),[[R,["c:nocodb:reddit"]]]),G((t(),g("a",_i,[s(f,{class:"social-icon-wrapper group"},{default:o(()=>[s(u,{class:"text-gray-500 group-hover:text-gray-800 my-0.5",icon:"twitter"}),n("span",fi,h(d.$t("labels.twitter")),1)]),_:1})])),[[R,["c:nocodb:twitter"]]]),e(l).ee?U("",!0):(t(),g(me,{key:1},[s(y),s(M,{key:"language",class:"lang-menu !py-1.5",placement:"rightBottom"},{content:o(()=>[n("div",gi,[s(v)])]),default:o(()=>[s(f,null,{default:o(()=>[G((t(),g("div",vi,[s(u,{icon:"translate",class:"group-hover:text-black nc-language ml-0.25 menu-icon"}),A(" "+h(d.$t("labels.language"))+" ",1),n("div",bi,h(d.$t("labels.community.communityTranslated")),1),yi,s(i,{class:"transform group-hover:scale-115 group-hover:text-accent text-xl text-gray-400"})])),[[R,["c:translate:open"]]])]),_:1})]),_:1})],64)),e(x)?U("",!0):(t(),g(me,{key:2},[s(y),G((t(),g("a",xi,[s(f,null,{default:o(()=>[s(u,{icon:"help",class:"menu-icon mt-0.5"}),n("span",wi,h(d.$t("title.forum")),1)]),_:1})])),[[R,["c:nocodb:forum-open"]]]),G((t(),g("a",hi,[s(f,null,{default:o(()=>[s(u,{icon:"doc",class:"menu-icon mt-0.5"}),n("span",ki,h(d.$t("title.docs")),1)]),_:1})])),[[R,["c:nocodb:docs-open"]]]),s(y),G((t(),b(F,{class:"!no-underline",to:"/account/profile"},{default:o(()=>[s(f,null,{default:o(()=>[s(u,{icon:"settings",class:"menu-icon"}),A(" "+h(d.$t("title.accountSettings")),1)]),_:1})]),_:1})),[[R,["c:user:settings"]]])],64))]),_:1})]),default:o(()=>{var E,Q,H;return[n("div",ni,[s(w,{email:(E=e(L))==null?void 0:E.email,size:"base",name:(Q=e(L))==null?void 0:Q.display_name},null,8,["email","name"]),n("div",li,h(e(j)?e(j):(H=e(L))==null?void 0:H.email),1),s(u,{icon:"arrowUp",class:"!min-w-5"})])]}),_:1},8,["visible"]),e(x)?(t(),g(me,{key:0},[],64)):e(l).ee?(t(),g("div",$i,"© 2023 NocoDB. Inc")):(t(),g("div",Ii,[s(W)]))])}}});const Si=Le(Di,[["__scopeId","data-v-b988ca76"]]),Ti={class:"nc-sidebar flex flex-col bg-gray-50 outline-r-1 outline-gray-100 select-none w-full h-full",style:{outlineWidth:"1px"}},ji={class:"flex flex-col"},Ci={key:0},Vi=ie({__name:"Sidebar",setup(_){const L=Ye(),{isWorkspaceLoading:m}=X(L),{isSharedBase:c}=X(Ne()),{isMobileMode:l}=xe(),T=S(),B=S(!1),j=()=>{if(!l.value)return T.value&&(T.value.scrollTop>0?B.value=!0:B.value=!1),!1};return lt(()=>{var I;(I=T.value)==null||I.addEventListener("scroll",j)}),pa(()=>{var I;(I=T.value)==null||I.removeEventListener("scroll",j)}),(I,k)=>{const a=Za,x=bo,$=Il,D=Si;return t(),g("div",Ti,[n("div",ji,[s(a),e(c)?U("",!0):(t(),b(x,{key:0}))]),n("div",{ref_key:"treeViewDom",ref:T,class:te(["flex flex-col nc-scrollbar-dark-md flex-grow xs:border-transparent xs:pt-2 xs:pr-2",{"border-t-1":!e(c),"border-transparent":!e(B),"pt-0.25":e(c)}])},[e(m)?U("",!0):(t(),b($,{key:0}))],2),e(c)?U("",!0):(t(),g("div",Ci,[s(D)]))])}}});const Mi=Le(Vi,[["__scopeId","data-v-d531515c"]]),Pi={class:"prose-xl font-bold self-center"},Ei=n("div",{class:"my-4"},"Select workspace to duplicate shared base to:",-1),Ni={class:"prose-md self-center text-gray-500 mt-4"},Bi={class:"text-xs p-2"},Li={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Oi=ie({__name:"SharedBaseDuplicate",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(_,{emit:L}){const m=_,c=L,{api:l}=yt(),{sharedBaseId:T}=Ts(),B=Ye(),{populateWorkspace:j}=B,{workspacesList:I}=X(B),{ncNavigateTo:k}=xe(),a=ze(m,"modelValue",c),x=S({includeData:!0,includeViews:!0}),$=oe(()=>{const{includeData:u,includeViews:p}=x.value;return{excludeData:!u,excludeViews:!p}}),D=S(!1),O=S(),{$e:d,$poller:r}=je(),w=async()=>{if(!(!O.value&&Ke))try{D.value=!0;const u=await l.base.duplicateShared(O.value??"nc",T.value,{options:$.value,base:Ke?{fk_workspace_id:O.value,type:ma.DATABASE}:{}});T.value=null,r.subscribe({id:u.id},async p=>{p.status!=="close"&&(p.status===tt.COMPLETED?(console.log("job completed",u),await k({...Ke?{workspaceId:u.fk_workspace_id}:{},baseId:u.base_id}),D.value=!1,a.value=!1):p.status===tt.FAILED&&(re.error("Failed to duplicate shared base"),await j(),D.value=!1,a.value=!1))}),d("a:base:duplicate-shared-base")}catch(u){re.error(await Ie(u)),D.value=!1,a.value=!1}};return(u,p)=>{const f=Ua,y=Rt,i=Ut,v=Ce,M=it,F=Te("e");return t(),b(M,{visible:e(a),"onUpdate:visible":p[4]||(p[4]=V=>ne(a)?a.value=V:null),class:"!w-[30rem]","wrap-class-name":"nc-modal-project-duplicate"},{default:o(()=>[n("div",null,[n("div",Pi,h(u.$t("general.duplicate"))+" "+h(u.$t("labels.sharedBase")),1),e(Ke)?(t(),g(me,{key:0},[Ei,s(f,{value:e(O),"onUpdate:value":p[0]||(p[0]=V=>ne(O)?O.value=V:null),class:"w-full",options:e(I).map(V=>({label:`${V.title[0].toUpperCase()}${V.title.slice(1)}`,value:V.id})),placeholder:"Select Workspace"},null,8,["value","options"])],64)):U("",!0),n("div",Ni,h(u.$t("title.advancedSettings")),1),s(y,{class:"!m-0 !p-0 !my-2"}),n("div",Bi,[s(i,{checked:e(x).includeData,"onUpdate:checked":p[1]||(p[1]=V=>e(x).includeData=V)},{default:o(()=>[A(h(u.$t("labels.includeData")),1)]),_:1},8,["checked"]),s(i,{checked:e(x).includeViews,"onUpdate:checked":p[2]||(p[2]=V=>e(x).includeViews=V)},{default:o(()=>[A(h(u.$t("labels.includeView")),1)]),_:1},8,["checked"])])]),n("div",Li,[s(v,{key:"back",type:"secondary",onClick:p[3]||(p[3]=V=>a.value=!1)},{default:o(()=>[A(h(u.$t("general.cancel")),1)]),_:1}),G((t(),b(v,{key:"submit",loading:e(D),disabled:!e(O)&&e(Ke),onClick:w},{default:o(()=>[A(h(u.$t("general.confirm")),1)]),_:1},8,["loading","disabled"])),[[F,["a:shared-base:duplicate"]]])])]),_:1},8,["visible"])}}}),Ui=st(()=>at(()=>import("./Modal.e9244c82.js"),["./Modal.e9244c82.js","./bases.e6c8e3c4.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.0feaca99.js","./index.9b87fcff.js","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./FormItemContext.ddc65fa5.js","./createForOfIteratorHelper.33de41ba.js","./index.dc13a4d6.js","./Dropdown.041b2468.js","./RightOutlined.7161c742.js","./index.5c6e4286.js","./toArray.fd74ce6f.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./SearchOutlined.a517903c.js","./Title.f2b907cf.js","./TextArea.9074ff05.js","./Input.dca3a2bc.js","./index.99a44a23.js","./LeftOutlined.1d2f193f.js","./index.07078df6.js","./_plugin-vue_export-helper.c27b6911.js","./Modal.44046a10.css"],import.meta.url).then(_=>_.default||_)),vc=ie({__name:"index",setup(_){const L=S(!1),m=S(""),c=S(""),l=S(),T=Ae(),{populateWorkspace:B}=Ye(),{signedIn:j}=xe(),{isUIAllowed:I}=Ee(),a=Bt().currentRoute,{basesList:x}=X(T),$=async()=>{const p=a.value.name;p!=="index-typeOrId"&&p!=="index"||await T.navigateToProject({baseId:x.value[0].id})},D=oe(()=>{const p=a.value.name||"";return!p.startsWith("index-typeOrId-baseId-")&&!["index","index-typeOrId"].includes(p)}),O=oe(()=>(a.value.name||"").startsWith("index-typeOrId-form-viewId")),{sharedBaseId:d}=Ts(),r=S(!1);async function w(){if(!D.value){if(a.value.params.typeOrId==="base"){await B();return}if(!j.value){Xe("/signIn");return}await B(),!a.value.params.baseId&&x.value.length>0&&await $()}}Pe(()=>a.value.params.typeOrId,()=>{w()}),lt(()=>{var p;if((p=a.value.query)!=null&&p.continueAfterSignIn)return localStorage.removeItem("continueAfterSignIn"),Xe(a.value.query.continueAfterSignIn);{const f=localStorage.getItem("continueAfterSignIn");if(localStorage.removeItem("continueAfterSignIn"),f)return Xe({path:f,query:a.value.query})}w().then(()=>{if(d.value){if(!I("baseDuplicate")){re.error("You are not allowed to create base");return}r.value=!0}})});function u(p,f,y,i){L.value=p??!L.value,m.value=f||"",c.value=y||"",l.value=i||""}return Je(ks,u),(p,f)=>{const y=fa,i=_a,v=Mi,M=Ui,F=Oi;return t(),g("div",null,[e(O)?(t(),b(i,{key:0},{default:o(()=>[s(y)]),_:1})):e(D)?(t(),b(i,{key:1,name:"shared-view"},{default:o(()=>[s(y)]),_:1})):(t(),b(i,{key:2,name:"dashboard"},{sidebar:o(()=>[s(v)]),content:o(()=>[s(y)]),_:1})),s(M,{"model-value":e(L),"onUpdate:modelValue":f[0]||(f[0]=V=>ne(L)?L.value=V:null),"open-key":e(m),"onUpdate:openKey":f[1]||(f[1]=V=>ne(m)?m.value=V:null),"data-sources-state":e(c),"onUpdate:dataSourcesState":f[2]||(f[2]=V=>ne(c)?c.value=V:null),"base-id":e(l)},null,8,["model-value","open-key","data-sources-state","base-id"]),e(I)("baseDuplicate")?(t(),b(F,{key:3,modelValue:e(r),"onUpdate:modelValue":f[3]||(f[3]=V=>ne(r)?r.value=V:null)},null,8,["modelValue"])):U("",!0)])}}});export{vc as default};
