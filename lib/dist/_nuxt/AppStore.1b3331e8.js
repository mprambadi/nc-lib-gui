import{f as L,M as O,r as _,i as F,o as a,c as f,b as u,w as i,O as o,P as p,T as P,ae as J,W as z,a as l,t as c,d as m,U as K,V as Q,Q as A,R as I,aK as W,S as X,a0 as Y,a1 as q,X as h,Y as M,ah as G,a8 as H,C as Z}from"./entry.5958c07b.js";import{_ as ee}from"./Button.vue.c3ca0e8f.js";import{_ as te}from"./round-edit.55a44805.js";import{_ as se}from"./Title.f2b907cf.js";import{C as le}from"./index.f98c1d80.js";import{_ as ae}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.55641318.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./isSymbol.114fe557.js";import"./TextArea.9074ff05.js";import"./Input.dca3a2bc.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.ddc65fa5.js";import"./CheckOutlined.1fe5f230.js";import"./useState.b891c8bb.js";import"./index.912f77e8.js";import"./Dropdown.041b2468.js";import"./useRefs.40c81887.js";import"./identity.34c7640e.js";import"./_flatRest.39582a58.js";import"./isMobile.e2e89480.js";import"./index.357e1bba.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";const oe=Y(()=>q(()=>import("./AppInstall.c51a85a5.js"),["./AppInstall.c51a85a5.js","./Button.vue.c3ca0e8f.js","./entry.5958c07b.js","./entry.bdecbb78.css","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./index.ae235b22.js","./Input.dca3a2bc.js","./antInputDirective.8ac36ea7.js","./FormItemContext.ddc65fa5.js","./SearchOutlined.a517903c.js","./isPlainObject.ccda79fe.js","./_getPrototype.c1f3bae2.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./index.b06c8b67.js","./FormItem.0bbf90a3.js","./identity.34c7640e.js","./Col.a97e3e76.js","./responsiveObserve.0baefba6.js","./toArray.fd74ce6f.js","./useSize.fad35fe8.js","./_flatRest.39582a58.js","./index.b076ba21.js"],import.meta.url).then(v=>v.default||v)),ne={class:"flex flex-col h-full"},ie={class:"flex flex-row justify-center mt-2 text-center w-full text-base"},re={class:"flex mt-6 justify-center space-x-2"},ce={class:"flex flex-wrap mt-4 w-full gap-5 mb-10"},pe={class:"install-btn flex flex-row justify-end space-x-1"},de={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-edit"},ue={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-reset"},me={class:"flex ml-0.5"},_e={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-install"},fe={class:"flex flex-row space-x-2 items-center justify-start w-full"},ve={class:"flex w-20 pl-3"},ge=["src"],ye={key:1},we={class:"flex flex-col flex-1 w-3/5 pl-3"},xe=L({__name:"AppStore",setup(v){const{t:j}=O(),{$api:k,$e:g}=Z(),y=_(null),d=_(!1),r=_(!1),n=_(null),w=async()=>{try{const t=(await k.plugin.list()).list??[];y.value=t.map(s=>({...s,tags:s.tags?s.tags.split(","):[],parsedInput:s.input&&JSON.parse(s.input)}))}catch(t){h.error(await M(t))}},N=async()=>{try{await k.plugin.update(n.value.id,{input:null,active:!1}),h.success(j("msg.success.pluginUninstalled")),d.value=!1,await w()}catch(t){h.error(await M(t))}g("a:appstore:reset",{app:n.value.title})},B=async()=>{r.value=!1,await w(),g("a:appstore:install",{app:n.value.title})},C=async t=>{r.value=!0,n.value=t,g("c:appstore:install",{app:t.title})},E=async t=>{d.value=!0,n.value=t};return F(async()=>{y.value===null&&await w()}),(t,s)=>{const R=oe,$=G,b=ee,V=te,x=H,U=se,D=le;return a(),f("div",null,[u($,J({visible:o(r),"onUpdate:visible":s[2]||(s[2]=e=>z(r)?r.value=e:null),class:{active:o(r)},closable:!1,centered:"","min-height":"300",footer:null,"wrap-class-name":"nc-modal-plugin-install"},t.$attrs),{default:i(()=>[o(n)&&o(r)?(a(),p(R,{key:0,id:o(n).id,onClose:s[0]||(s[0]=e=>r.value=!1),onSaved:s[1]||(s[1]=e=>B())},null,8,["id"])):P("",!0)]),_:1},16,["visible","class"]),u($,{visible:o(d),"onUpdate:visible":s[4]||(s[4]=e=>z(d)?d.value=e:null),closable:!1,width:"24rem",centered:"",footer:null,"wrap-class-name":"nc-modal-plugin-uninstall"},{default:i(()=>[l("div",ne,[l("div",ie,c(`Click on confirm to reset ${o(n)&&o(n).title}`),1),l("div",re,[u(b,{type:"secondary",onClick:s[3]||(s[3]=e=>d.value=!1)},{default:i(()=>[m(c(t.$t("general.cancel")),1)]),_:1}),u(b,{type:"danger",onClick:N},{default:i(()=>[m(c(t.$t("general.confirm")),1)]),_:1})])])]),_:1},8,["visible"]),l("div",ce,[(a(!0),f(K,null,Q(o(y),(e,T)=>(a(),p(D,{key:T,class:X(["sm:w-100 md:w-138.1",`relative flex overflow-x-hidden app-item-card !shadow-sm rounded-md w-full nc-app-store-card-${e.title}`])},{default:i(()=>[l("div",pe,[e.parsedInput?(a(),p(x,{key:0,size:"small",type:"primary",onClick:S=>C(e)},{default:i(()=>[l("div",de,[u(V,{class:"pr-0.5",height:12}),m(" "+c(t.$t("general.edit")),1)])]),_:2},1032,["onClick"])):P("",!0),e.parsedInput?(a(),p(x,{key:1,size:"small",outlined:"",onClick:S=>E(e)},{default:i(()=>[l("div",ue,[(a(),p(A(o(I).closeCircle))),l("div",me,c(t.$t("general.reset")),1)])]),_:2},1032,["onClick"])):(a(),p(x,{key:2,size:"small",type:"primary",onClick:S=>C(e)},{default:i(()=>[l("div",_e,[(a(),p(A(o(I).plus))),m(" "+c(t.$t("general.install")),1)])]),_:2},1032,["onClick"]))]),l("div",fe,[l("div",ve,[e.title!=="SMTP"?(a(),f("img",{key:0,class:"avatar",alt:"logo",style:W({backgroundColor:e.title==="SES"?"#242f3e":""}),src:e.logo},null,12,ge)):(a(),f("div",ye))]),l("div",we,[u(U,{level:5},{default:i(()=>[m(c(e.title),1)]),_:2},1024),m(" "+c(e.description),1)])])]),_:2},1032,["class"]))),128))])])}}});const Xe=ae(xe,[["__scopeId","data-v-2ea72d5a"]]);export{Xe as default};
