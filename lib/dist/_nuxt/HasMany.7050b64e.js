import{f as W,bb as r,bA as Z,r as _,aM as q,eD as J,g as C,o as a,c as d,a as Q,O as e,U as L,V as X,P as f,T as p,cZ as Y,b as ee,cb as b,W as j,a0 as A,a1 as T}from"./entry.5958c07b.js";import{_ as te}from"./ItemChip.62435f04.js";import{_ as oe}from"./Icon.vue.129448d5.js";import{C as ne,o as ae,n as se,B as le,c as re,i as ie,H as ue,m as me}from"./index.9b87fcff.js";import{u as ce}from"./useLTARStore.59a45d45.js";import{u as pe}from"./index.c35df397.js";import{a as _e}from"./useSmartsheetRowStore.5b92cc1b.js";import{_ as de}from"./_plugin-vue_export-helper.c27b6911.js";import"./dataUtils.3f874ca1.js";import"./cell.165313cd.js";import"./index.86363aca.js";import"./index.e61e381a.js";import"./bases.e6c8e3c4.js";import"./index.0feaca99.js";import"./useSharedView.e8f68616.js";import"./deepCompare.d32ec333.js";import"./virtualCell.427fa223.js";const fe=A(()=>T(()=>import("./ListItems.aa19e1cf.js"),["./ListItems.aa19e1cf.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./Pagination.c0f166a7.js","./Icon.vue.129448d5.js","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./index.5c6e4286.js","./toArray.fd74ce6f.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./SearchOutlined.a517903c.js","./FormItemContext.ddc65fa5.js","./Pagination.fabf8b70.css","./Modal.vue.0f13e4cb.js","./DeleteModal.7ab6f524.css","./bases.e6c8e3c4.js","./index.0feaca99.js","./index.9b87fcff.js","./cell.165313cd.js","./useLTARStore.59a45d45.js","./index.e61e381a.js","./useSharedView.e8f68616.js","./useSmartsheetRowStore.5b92cc1b.js","./deepCompare.d32ec333.js","./dataUtils.3f874ca1.js","./virtualCell.427fa223.js","./plus.dc1af860.js","./magnify.3b643360.js","./inbox.954d1e59.js","./index.ae235b22.js","./Input.dca3a2bc.js","./isPlainObject.ccda79fe.js","./_getPrototype.c1f3bae2.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./Image.c63a7a56.js","./Element.a1e4f356.js","./index.36af7517.js","./Input.8209df88.js","./ListItems.d8bb4ba4.css"],import.meta.url).then(u=>u.default||u)),ve=A(()=>T(()=>import("./ListChildItems.1dbe126e.js"),["./ListChildItems.1dbe126e.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./Pagination.c0f166a7.js","./Icon.vue.129448d5.js","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./index.5c6e4286.js","./toArray.fd74ce6f.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./SearchOutlined.a517903c.js","./FormItemContext.ddc65fa5.js","./Pagination.fabf8b70.css","./Modal.vue.0f13e4cb.js","./DeleteModal.7ab6f524.css","./bases.e6c8e3c4.js","./index.0feaca99.js","./index.9b87fcff.js","./cell.165313cd.js","./useLTARStore.59a45d45.js","./index.e61e381a.js","./useSharedView.e8f68616.js","./useSmartsheetRowStore.5b92cc1b.js","./deepCompare.d32ec333.js","./dataUtils.3f874ca1.js","./virtualCell.427fa223.js","./plus.dc1af860.js","./magnify.3b643360.js","./inbox.954d1e59.js","./index.ae235b22.js","./Input.dca3a2bc.js","./isPlainObject.ccda79fe.js","./_getPrototype.c1f3bae2.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./Image.c63a7a56.js","./Element.a1e4f356.js","./Input.8209df88.js","./ListChildItems.7a5d47c9.css"],import.meta.url).then(u=>u.default||u)),ye={class:"flex items-center gap-1 w-full chips-wrapper"},ke={class:"chips flex items-center img-container flex-1 hm-items flex-nowrap min-w-0 overflow-hidden"},xe={key:0,class:"flex justify-end gap-1 min-h-[30px] items-center"},Ce=W({__name:"HasMany",async setup(u){let w,g;const m=r(ne),i=r(ae),E=r(se),M=r(le,Z()),U=r(re),D=r(ie,_(!1)),P=r(ue,_(!1)),s=_(!1),l=_(!1),{isUIAllowed:H}=q(),{state:v,isNew:y,removeLTARRef:B}=_e(),{relatedTableMeta:O,loadRelatedTableMeta:S,relatedTableDisplayValueProp:k,unlink:$}=ce(m,E,y,M.trigger);[w,g]=J(()=>S()),await w,g();const I=C(()=>{var t;return i!=null&&i.value?(i==null?void 0:i.value)??[]:y.value?((t=v==null?void 0:v.value)==null?void 0:t[m==null?void 0:m.value.title])??[]:[]}),R=C(()=>I.value.reduce((t,o)=>{if(!k.value)return t;const c=o[k.value];return c?[...t,{value:c,item:o}]:t},[])),z=async t=>{y.value?await B(t,m.value):await $(t)},x=C(()=>{var t,o;return(o=(t=O.value)==null?void 0:t.columns)==null?void 0:o.find(c=>c.title===k.value)}),N=()=>{l.value=!1,s.value=!0};return pe(r(me,_(!1)),t=>{switch(t.key){case"Enter":s.value=!0,t.stopPropagation();break}}),(t,o)=>{var V;const c=te,h=oe,F=fe,G=ve;return a(),d("div",ye,[Q("div",ke,[e(R)?(a(),d(L,{key:0},[(a(!0),d(L,null,X(e(R),(n,K)=>(a(),f(c,{key:K,item:n.item,value:n.value,column:e(x),"show-unlink-button":!0,onUnlink:we=>z(n.item)},null,8,["item","value","column","onUnlink"]))),128)),((V=e(i))==null?void 0:V.length)===10?(a(),d("span",{key:0,class:"caption pointer ml-1 grey--text",onClick:o[0]||(o[0]=n=>l.value=!0)}," more... ")):p("",!0)],64)):p("",!0)]),!e(P)&&!e(Y)(e(m))?(a(),d("div",xe,[ee(h,{icon:"expand",class:"select-none transform text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-arrow-expand",onClick:o[1]||(o[1]=b(n=>l.value=!0,["stop"]))}),!e(D)&&e(H)("dataEdit")||e(U)?(a(),f(h,{key:0,icon:"plus",class:"select-none text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus",onClick:o[2]||(o[2]=b(n=>s.value=!0,["stop"]))})):p("",!0)])):p("",!0),e(s)||e(l)?(a(),f(F,{key:1,modelValue:e(s),"onUpdate:modelValue":o[3]||(o[3]=n=>j(s)?s.value=n:null),column:e(x)},null,8,["modelValue","column"])):p("",!0),e(s)||e(l)?(a(),f(G,{key:2,modelValue:e(l),"onUpdate:modelValue":o[4]||(o[4]=n=>j(l)?l.value=n:null),"cell-value":e(I),column:e(x),onAttachRecord:N},null,8,["modelValue","cell-value","column"])):p("",!0)])}}});const Oe=de(Ce,[["__scopeId","data-v-8ff15f3a"]]);export{Oe as default};
