import{f as j,c8 as T,L as q,M as A,r as x,N as B,o as i,P as b,w as r,a0 as D,ca as S,a as e,b as o,O as n,t as s,c as f,U as k,d as l,cl as z,T as M,Q as G,R as O,a1 as H,D as Q}from"./entry.5958c07b.js";import{_ as W}from"./nuxt-link.39d6b1ec.js";import{v as J}from"./validation.2de04583.js";import{_ as K}from"./warning.385787ad.js";import{_ as X}from"./success-line.dd7d0434.js";import"./index.ae235b22.js";import{I as Y}from"./Input.dca3a2bc.js";import{F as Z}from"./index.b06c8b67.js";import{_ as ee}from"./FormItem.0bbf90a3.js";import"./SearchOutlined.a517903c.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";import"./TextArea.9074ff05.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.ddc65fa5.js";import"./Password.f52125e7.js";import"./useSize.fad35fe8.js";import"./identity.34c7640e.js";import"./isSymbol.114fe557.js";import"./_flatRest.39582a58.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./toArray.fd74ce6f.js";const te=D(()=>H(()=>import("./NocoIcon.ea7a765e.js"),["./NocoIcon.ea7a765e.js","./NocoIcon.vue.589d8c3d.js","./entry.5958c07b.js","./entry.bdecbb78.css","./256x256-trans.69a212f8.js","./256x256.a76ef214.js"],import.meta.url).then(_=>_.default||_)),oe={class:"md:bg-primary bg-opacity-5 forgot-password h-full min-h-[600px] flex flex-col justify-center items-center"},se={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},ne={class:"self-center flex flex-col justify-center items-center text-center gap-2"},ae={class:"prose-2xl font-bold my-4 w-full"},re={class:"prose-sm"},ie={class:"prose-sm mb-4"},le={class:"prose-sm text-success flex items-center leading-8 gap-2"},me={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1"},ce={class:"flex items-center gap-2 justify-center"},_e={class:"break-words"},pe={class:"self-center flex flex-col gap-4 items-center justify-center w-full"},ue={class:"scaling-btn bg-opacity-100",type:"submit"},de={class:"flex items-center gap-2"},fe={class:"text-end prose-sm"},Se=j({__name:"forgot-password",setup(_){const I=T(),{api:R,isLoading:$,error:m}=q({useGlobalInstance:!0}),{t:p}=A(),g=x(!1),v=x(),c=B({email:""}),C={email:[{required:!0,message:p("msg.error.signUpRules.emailRequired")},{validator:(t,a)=>new Promise((u,d)=>{if(!(a!=null&&a.length)||J(a))return u();d(new Error(p("msg.error.signUpRules.emailInvalid")))}),message:p("msg.error.signUpRules.emailInvalid")}]};async function E(){v.value.validate()&&(y(),await R.auth.passwordForgot(c).then(()=>{g.value=!0}))}function y(){m.value&&(m.value=null)}function h(){Q({path:"/signin",query:I.query})}return(t,a)=>{const u=te,d=X,w=W,N=K,P=Y,U=ee,V=Z,F=S;return i(),b(F,null,{default:r(()=>[e("div",oe,[e("div",se,[o(u,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:n($)},null,8,["animate"]),e("div",ne,[e("h1",ae,s(t.$t("title.resetPassword")),1),n(g)?(i(),f(k,{key:1},[e("div",le,[l(s(t.$t("msg.info.passwordRecovery.success"))+" ",1),o(d)]),o(w,{onClick:h},{default:r(()=>[l(s(t.$t("general.signIn")),1)]),_:1})],64)):(i(),f(k,{key:0},[e("div",re,s(t.$t("msg.info.passwordRecovery.message_1")),1),e("div",ie,s(t.$t("msg.info.passwordRecovery.message_2")),1)],64))]),o(V,{ref_key:"formValidator",ref:v,layout:"vertical",model:n(c),"no-style":"",onFinish:E},{default:r(()=>[o(z,{name:"layout"},{default:r(()=>[n(m)?(i(),f("div",me,[e("div",ce,[o(N),e("div",_e,s(n(m)),1)])])):M("",!0)]),_:1}),o(U,{label:t.$t("labels.email"),name:"email",rules:C.email},{default:r(()=>[o(P,{value:n(c).email,"onUpdate:value":a[0]||(a[0]=L=>n(c).email=L),size:"large",placeholder:t.$t("msg.info.signUp.workEmail"),onFocus:y},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e("div",pe,[e("button",ue,[e("span",de,[(i(),b(G(n(O).signin))),l(" "+s(t.$t("activity.sendEmail")),1)])]),e("div",fe,[l(s(t.$t("msg.info.signUp.alreadyHaveAccount"))+" ",1),o(w,{onClick:h},{default:r(()=>[l(s(t.$t("general.signIn")),1)]),_:1})])])]),_:1},8,["model"])])])]),_:1})}}});export{Se as default};
