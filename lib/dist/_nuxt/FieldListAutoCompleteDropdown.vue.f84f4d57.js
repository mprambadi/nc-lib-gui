import T from"./VirtualCellIcon.79739fcf.js";import{_ as g}from"./CellIcon.0a028b40.js";import{_ as B}from"./Tooltip.vue.00c0d0fb.js";import{_ as M}from"./Select.vue.5a200a6a.js";import{M as N}from"./index.9b87fcff.js";import{u as R}from"./useViewColumns.8927231f.js";import{f as D,cS as E,aF as P,bb as U,r as j,g as v,cZ as y,fU as h,cG as c,eZ as A,eX as $,n as G,eW as Q,o as r,P as m,w as d,c as W,U as Z,V as X,O as p,a as f,Q as V,b as q,d as z,t as S,R as H,T as I,W as J}from"./entry.96205fa0.js";import{S as K}from"./index.b5e393d6.js";const Y={class:"flex items-center w-full justify-between w-full gap-2 max-w-50"},ee={class:"flex gap-1 flex-1 items-center truncate items-center h-full"},ce=D({__name:"FieldListAutoCompleteDropdown",props:{modelValue:{},isSort:{type:Boolean},columns:{},allowEmpty:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:b}){var w;const x=E(i,["modelValue","isSort","allowEmpty"]),C=b,k=P(x,"columns"),L=U(N,j()),a=v({get:()=>i.modelValue,set:l=>C("update:modelValue",l)}),{showSystemFields:O,metaColumnById:n}=R(),_=v(()=>{var l,s,o,u;return(u=((l=k.value)==null?void 0:l.filter(e=>{var t;return!(y((t=n==null?void 0:n.value)==null?void 0:t[e.id])&&h(e))}))||((o=(s=L.value)==null?void 0:s.columns)==null?void 0:o.filter(e=>{var t;return e.uidt===c.Links?!0:y((t=n==null?void 0:n.value)==null?void 0:t[e.id])?h(e)?!1:a.value===e.id||O.value:e.uidt===c.QrCode||e.uidt===c.Barcode||e.uidt===c.ID?!1:i.isSort?!(A(e)&&e.colOptions.type!==$.BELONGS_TO):!(e.colOptions&&e.system)})))==null?void 0:u.map(e=>({value:e.id,label:e.title,icon:G(Q(e)?T:g,{columnMeta:e}),c:e}))}),F=(l,s)=>{var o;return(o=s.label.toLowerCase())==null?void 0:o.includes(l.toLowerCase())};return!a.value&&i.allowEmpty!==!0&&(a.value=((w=_.value)==null?void 0:w[0].value)||""),(l,s)=>{const o=B,u=K,e=M;return r(),m(e,{value:p(a),"onUpdate:value":s[0]||(s[0]=t=>J(a)?a.value=t:null),"dropdown-match-select-width":!1,"show-search":"",placeholder:l.$t("placeholder.selectField"),"filter-option":F,"dropdown-class-name":"nc-dropdown-toolbar-field-list"},{default:d(()=>[(r(!0),W(Z,null,X(p(_),t=>(r(),m(u,{key:t.value,label:t.label,value:t.value},{default:d(()=>[f("div",Y,[f("div",ee,[(r(),m(V(t.icon),{class:"min-w-5 !mx-0"})),q(o,{style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},class:"max-w-[15rem] truncate select-none","show-on-truncate-only":""},{title:d(()=>[z(S(t.label),1)]),default:d(()=>[f("span",null,S(t.label),1)]),_:2},1024)]),p(a)===t.value?(r(),m(V(("iconMap"in l?l.iconMap:p(H)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):I("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["value","placeholder"])}}});export{ce as _};
