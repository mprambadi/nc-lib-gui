import{u as W,g,O as e,o as r,c as v,a as x,f as G,M as J,$ as X,bb as s,r as m,H as Q,X as Y,au as Z,ey as ee,W as te,S as le,bv as y,cb as d,t as D,P as L,w as _,b as h,d as oe,T as ae,a0 as ne,a1 as se,af as re}from"./entry.5958c07b.js";import{_ as ue}from"./nuxt-link.39d6b1ec.js";import{C as ie,E as de,r as ce,w as me,z as ve,I as fe,l as pe,c as ye}from"./index.9b87fcff.js";import{i as b}from"./urlUtils.18c797fa.js";import{p as T}from"./bases.e6c8e3c4.js";import"./index.0feaca99.js";const he=t=>{if(t)try{return Object.entries(JSON.parse(t)).map(([u,i])=>[new RegExp(u),i])}catch(u){console.error(u);return}};function ge(t){const i=W().currentRoute,a=g(()=>({behavior:i.value.query.url_behavior,overlay:i.value.query.url_overlay,rules:he(i.value.query.url_rules)})),C=g(()=>{var n;const c={behavior:a.value.behavior,overlay:a.value.overlay};if(a.value.rules&&(!a.value.behavior||!a.value.overlay)){for(const[w,I]of a.value.rules)if((n=e(t))!=null&&n.match(w))return Object.assign(c,I)}return c});return{cellUrlConfig:a.value,cellUrlOptions:C}}const we={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ve=x("g",{fill:"currentColor"},[x("path",{d:"M12 4a8 8 0 1 0 0 16a8 8 0 0 0 0-16M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12"}),x("path",{d:"M12 14a1 1 0 0 1-1-1V7a1 1 0 1 1 2 0v6a1 1 0 0 1-1 1m-1.5 2.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0"})],-1),_e=[Ve];function be(t,u){return r(),v("svg",we,[..._e])}const xe={name:"mi-circle-warning",render:be},Ce=ne(()=>se(()=>import("./ClampedText.38ef3359.js"),["./ClampedText.38ef3359.js","./entry.5958c07b.js","./entry.bdecbb78.css"],import.meta.url).then(t=>t.default||t)),Ie={class:"flex flex-row items-center justify-between w-full h-full"},je=["placeholder"],ke={key:1,class:"nc-null uppercase"},Oe={key:4,class:"w-9/10 overflow-ellipsis overflow-hidden"},Ue={key:5,class:"mr-1 w-1/10"},Ee={class:"flex flex-row items-center"},Ne=G({__name:"Url",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:u}){const i=u,{t:a}=J(),{showNull:C}=X(),c=s(ie),n=s(de),w=s(ce,m(!1)),I=s(me,m(!1)),f=m(t.modelValue),j=s(ve,m(void 0)),P=s(fe,m(!1)),V=g({get:()=>t.modelValue,set:o=>{var l;f.value=o,(!((l=T(c.value.meta))!=null&&l.validate)||o&&b(o)||!o||P.value)&&i("update:modelValue",o)}}),k=g(()=>t.modelValue&&b(t.modelValue)),O=g(()=>!t.modelValue||!b(t.modelValue)?"":/^https?:\/\//.test(t.modelValue)?t.modelValue:`https://${t.modelValue}`),{cellUrlOptions:p}=ge(O),E=s(pe,m(!1)),q=s(ye),H=o=>!E.value&&!w.value&&q.value&&(o==null?void 0:o.focus());return Q(()=>n.value,()=>{var o;if((o=T(c.value.meta))!=null&&o.validate&&!n.value&&f.value&&!b(f.value)){Y.error(a("msg.error.invalidURL")),f.value=void 0;return}f.value=t.modelValue}),(o,l)=>{var R,$,S,B,F,N;const U=Ce,M=ue,A=xe,K=re;return r(),v("div",Ie,[e(n)?Z((r(),v("input",{key:0,ref:H,"onUpdate:modelValue":l[0]||(l[0]=z=>te(V)?V.value=z:null),placeholder:e(w)?o.$t("labels.enterDefaultUrlOptional"):"",class:le(["outline-none text-sm w-full py-1 bg-transparent h-full",e(E)?"px-2":"px-0"]),onBlur:l[1]||(l[1]=z=>n.value=!1),onKeydown:[l[2]||(l[2]=y(d(()=>{},["stop"]),["down"])),l[3]||(l[3]=y(d(()=>{},["stop"]),["left"])),l[4]||(l[4]=y(d(()=>{},["stop"]),["right"])),l[5]||(l[5]=y(d(()=>{},["stop"]),["up"])),l[6]||(l[6]=y(d(()=>{},["stop"]),["delete"]))],onSelectstartCapture:l[7]||(l[7]=d(()=>{},["stop"])),onMousedown:l[8]||(l[8]=d(()=>{},["stop"]))},null,42,je)),[[ee,e(V)]]):e(V)===null&&e(C)?(r(),v("span",ke,D(o.$t("general.null")),1)):e(k)&&!((R=e(p))!=null&&R.overlay)?(r(),L(M,{key:2,"no-prefetch":"","no-rel":"",class:"z-3 text-sm underline hover:opacity-75",to:e(O),target:(($=e(p))==null?void 0:$.behavior)==="replace"?void 0:"_blank"},{default:_(()=>[h(U,{value:t.modelValue,lines:e(j)},null,8,["value","lines"])]),_:1},8,["to","target"])):e(k)&&!e(I)&&((S=e(p))!=null&&S.overlay)?(r(),L(M,{key:3,"no-prefetch":"","no-rel":"",class:"z-3 w-full h-full text-center !no-underline hover:opacity-75",to:e(O),target:((B=e(p))==null?void 0:B.behavior)==="replace"?void 0:"_blank"},{default:_(()=>[h(U,{value:e(p).overlay,lines:e(j)},null,8,["value","lines"])]),_:1},8,["to","target"])):(r(),v("span",Oe,[h(U,{value:t.modelValue,lines:e(j)},null,8,["value","lines"])])),(F=e(c).meta)!=null&&F.validate&&!e(k)&&((N=t.modelValue)!=null&&N.length)&&!e(n)?(r(),v("div",Ue,[h(K,{placement:"top"},{title:_(()=>[oe(D(e(a)("msg.error.invalidURL")),1)]),default:_(()=>[x("div",Ee,[h(A,{class:"text-red-400 h-4"})])]),_:1})])):ae("",!0)])}}});export{Ne as default};
