import{f as M,bb as a,bA as N,r,aM as O,eD as z,g as v,H as K,o as m,c as I,a as F,O as e,P as C,T as y,bv as G,cb as R,b as W,W as q,S as J,a0 as Q,a1 as X}from"./entry.96205fa0.js";import{_ as Y}from"./ItemChip.bf5fd0ab.js";import{_ as Z}from"./Icon.vue.6d0583a0.js";import{C as ee,B as te,o as oe,n as ne,m as se,i as ae,c as le,H as re}from"./index.9b87fcff.js";import{u as ie}from"./useLTARStore.444f4bbc.js";import{u as ue}from"./index.a5de28c1.js";import{a as me}from"./useSmartsheetRowStore.9c7d6fc1.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import"./dataUtils.fb0a3616.js";import"./cell.810c4fd3.js";import"./index.9578d9a4.js";import"./index.e034edbd.js";import"./bases.965a49bb.js";import"./index.0c5b3837.js";import"./useSharedView.9e320acb.js";import"./deepCompare.d32ec333.js";import"./virtualCell.9142cfee.js";const ce=Q(()=>X(()=>import("./ListItems.5a582ca1.js"),["./ListItems.5a582ca1.js","./entry.96205fa0.js","./entry.d09b2482.css","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./Pagination.2fe08f8a.js","./Icon.vue.6d0583a0.js","./Tooltip.vue.00c0d0fb.js","./Tooltip.b86f91a1.css","./index.b5e393d6.js","./toArray.3561b70e.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.dbc63a5f.js","./useState.5a301439.js","./CheckOutlined.3b90c20d.js","./SearchOutlined.c9794270.js","./FormItemContext.b19eb48c.js","./Pagination.fabf8b70.css","./Modal.vue.3dac5189.js","./DeleteModal.7ab6f524.css","./bases.965a49bb.js","./index.0c5b3837.js","./index.9b87fcff.js","./cell.810c4fd3.js","./useLTARStore.444f4bbc.js","./index.e034edbd.js","./useSharedView.9e320acb.js","./useSmartsheetRowStore.9c7d6fc1.js","./deepCompare.d32ec333.js","./dataUtils.fb0a3616.js","./virtualCell.9142cfee.js","./plus.ddb9e9b9.js","./magnify.92946687.js","./inbox.41f0ce87.js","./index.1431a68b.js","./Input.3f1aaf0c.js","./isPlainObject.631eb8fb.js","./_getPrototype.459a70cf.js","./TextArea.b81a19ed.js","./Password.803cc3dc.js","./Image.d07b34cf.js","./Element.a2c5baa8.js","./index.7e75edca.js","./Input.553ad305.js","./ListItems.d8bb4ba4.css"],import.meta.url).then(p=>p.default||p)),de={class:"chips flex items-center flex-1"},_e=M({__name:"BelongsTo",async setup(p){let w,b;const l=a(ee),T=a(te,N()),s=a(oe,r(null)),j=a(ne),g=a(se),B=a(ae,r(!1)),A=a(le,r(!1)),h=a(re,r(!1)),{isUIAllowed:L}=O(),n=r(!1),{state:c,isNew:d,removeLTARRef:E}=me(),{relatedTableMeta:P,loadRelatedTableMeta:V,relatedTableDisplayValueProp:_,unlink:D}=ie(l,j,d,T.trigger);[w,b]=z(()=>V()),await w,b();const S=v(()=>s!=null&&s.value?"expand":"plus"),u=v(()=>{var t;return s!=null&&s.value?s==null?void 0:s.value:d.value?(t=c==null?void 0:c.value)==null?void 0:t[l==null?void 0:l.value.title]:null}),U=async t=>{d.value?await E(t,l==null?void 0:l.value):await D(t)};ue(g,t=>{switch(t.key){case"Enter":n.value=!0,t.stopPropagation();break}});const k=v(()=>{var t,o;return(o=(t=P.value)==null?void 0:t.columns)==null?void 0:o.find(f=>f.title===_.value)}),x=r(null);return K([n],()=>{var t;n.value||(t=x.value)==null||t.focus()}),(t,o)=>{const f=Y,$=Z,H=ce;return m(),I("div",{class:J(["flex w-full chips-wrapper items-center",{active:e(g)}])},[F("div",de,[e(u)&&e(_)?(m(),C(f,{key:0,item:e(u),value:e(u)[e(_)],column:e(k),"show-unlink-button":!0,onUnlink:o[0]||(o[0]=i=>U(e(u)))},null,8,["item","value","column"])):y("",!0)]),!e(B)&&(e(L)("dataEdit")||e(A))&&!e(h)?(m(),I("div",{key:0,ref_key:"plusBtnRef",ref:x,class:"flex justify-end group gap-1 min-h-[30px] items-center",tabindex:"0",onKeydown:o[2]||(o[2]=G(R(i=>n.value=!0,["stop"]),["enter"]))},[W($,{icon:e(S),class:"text-sm nc-action-icon group-focus:visible invisible text-gray-500/50 hover:text-gray-500 select-none group-hover:text-gray-500 nc-plus",onClick:o[1]||(o[1]=R(i=>n.value=!0,["stop"]))},null,8,["icon"])],544)):y("",!0),e(n)?(m(),C(H,{key:1,modelValue:e(n),"onUpdate:modelValue":o[3]||(o[3]=i=>q(n)?n.value=i:null),column:e(k),onAttachRecord:o[4]||(o[4]=i=>n.value=!0)},null,8,["modelValue","column"])):y("",!0)],2)}}});const Ee=pe(_e,[["__scopeId","data-v-a07ddbb2"]]);export{Ee as default};
