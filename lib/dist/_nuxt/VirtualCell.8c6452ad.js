import{f as ae,M as ne,aF as N,$ as ie,r as d,bb as h,ba as se,aM as re,g as c,gd as ue,o as f,c as E,O as l,P as T,T as k,b as P,w,d as pe,t as z,a as F,ge as me,U as de,W as H,cb as V,a0 as J,a1 as Q,p as ce,e as ve}from"./entry.96205fa0.js";import{_ as _e}from"./Tooltip.vue.00c0d0fb.js";import{_ as fe}from"./EditOrAddProvider.vue.8b187915.js";import{f as be,C as ye,M as ke,c as Ce,l as Ie}from"./index.9b87fcff.js";import{b as U,a as q,i as W,d as G,c as K,e as $e}from"./virtualCell.9142cfee.js";import{b as he}from"./bases.965a49bb.js";import{D as we}from"./index.6c1d17b6.js";import{_ as Me}from"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.vue.6d0583a0.js";import"./Button.vue.02ce6d5b.js";import"./index.9e8f59f4.js";import"./debounce.1d5af9bf.js";import"./toNumber.ed208f2f.js";import"./isSymbol.d46b4957.js";import"./views.2c163cf7.js";import"./useSharedView.9e320acb.js";import"./validation.64563eeb.js";import"./index.0c5b3837.js";import"./index.886d43e1.js";import"./FormItem.9f1f85f2.js";import"./identity.309e9ead.js";import"./_getPrototype.459a70cf.js";import"./Col.b3c5d725.js";import"./responsiveObserve.358bcfe9.js";import"./toArray.3561b70e.js";import"./FormItemContext.b19eb48c.js";import"./useSize.c98e621d.js";import"./_flatRest.ce557a88.js";import"./isPlainObject.631eb8fb.js";import"./vuedraggable.umd.5a03c14e.js";import"./v3-infinite-loading.e5e5dc2d.js";import"./index.1431a68b.js";import"./Input.3f1aaf0c.js";import"./antInputDirective.8ac36ea7.js";import"./SearchOutlined.c9794270.js";import"./TextArea.b81a19ed.js";import"./Password.803cc3dc.js";import"./cell.810c4fd3.js";import"./index.0b4c0f1e.js";import"./Checkbox.cf2cdba0.js";import"./createForOfIteratorHelper.f2005dfe.js";import"./index.b5e393d6.js";import"./isMobile.e2e89480.js";import"./useMemo.dbc63a5f.js";import"./useState.5a301439.js";import"./CheckOutlined.3b90c20d.js";import"./Dropdown.1dedd322.js";import"./RightOutlined.3ce786f5.js";const Oe=J(()=>Q(()=>import("./VirtualCellIcon.79739fcf.js"),["./VirtualCellIcon.79739fcf.js","./index.9b87fcff.js","./entry.96205fa0.js","./entry.d09b2482.css","./virtualCell.9142cfee.js"],import.meta.url).then(n=>n.default||n)),xe=J(()=>Q(()=>import("./Menu.bd59ba40.js"),["./Menu.bd59ba40.js","./Icon.vue.6d0583a0.js","./entry.96205fa0.js","./entry.d09b2482.css","./Menu.vue.55c6ca4d.js","./_plugin-vue_export-helper.c27b6911.js","./Menu.eff4a609.css","./CellIcon.0a028b40.js","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./DeleteModal.vue.49c1a59b.js","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./Button.ff10bcb0.css","./Modal.vue.b787f37f.js","./DeleteModal.7ab6f524.css","./useSmartsheetStore.7d51347e.js","./views.2c163cf7.js","./useSharedView.9e320acb.js","./index.e034edbd.js","./index.0b4c0f1e.js","./Checkbox.cf2cdba0.js","./FormItemContext.b19eb48c.js","./createForOfIteratorHelper.f2005dfe.js","./index.c968c966.js","./useViewSorts.b8ab8a7a.js","./index.6c1d17b6.js","./Dropdown.1dedd322.js","./RightOutlined.3ce786f5.js","./Menu.476baf6e.css"],import.meta.url).then(n=>n.default||n)),X=n=>(ce("data-v-03ebd1c0"),n=n(),ve(),n),ge=["data-test-id"],De={key:1,class:"text-red-500"},Ee=X(()=>F("div",{class:"flex-1"},null,-1)),Te=X(()=>F("div",null,null,-1)),Ve=ae({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean}},setup(n){const M=n,{t:O}=ne(),e=N(M,"column"),Y=N(M,"hideMenu"),{isMobileMode:A}=ie(),r=d(!1),b=d(!1),B=h(be,d(!1));se(ye,e);const{metas:Z}=he(),{isUIAllowed:x}=re(),s=h(ke,d()),g=h(Ce,d(!1)),D=h(Ie,d(!1)),R=c(()=>{var o;return(o=e.value)==null?void 0:o.colOptions}),S=c(()=>{var o;return(o=s==null?void 0:s.value)==null?void 0:o.title}),L=c(()=>{var o,t,a,i,u,p;return U(e.value)||q(e.value)||W(e.value)?(o=e.value)==null?void 0:o.colOptions:(a=(t=e==null?void 0:e.value)==null?void 0:t.colOptions)!=null&&a.fk_relation_column_id?(p=(u=(i=s==null?void 0:s.value)==null?void 0:i.columns)==null?void 0:u.find(v=>{var _,m;return v.id===((m=(_=e==null?void 0:e.value)==null?void 0:_.colOptions)==null?void 0:m.fk_relation_column_id)}))==null?void 0:p.colOptions:null}),C=c(()=>{var o,t,a;return((o=L.value)==null?void 0:o.fk_related_model_id)&&((a=Z.value)==null?void 0:a[(t=L.value)==null?void 0:t.fk_related_model_id])}),y=c(()=>{var o;return(o=C.value)==null?void 0:o.title}),I=c(()=>{var o,t,a;if((o=C.value)!=null&&o.columns){if(G(e.value))return(t=C.value)==null?void 0:t.columns.find(i=>i.id===R.value.fk_rollup_column_id);if(K(e.value))return(a=C.value)==null?void 0:a.columns.find(i=>i.id===R.value.fk_lookup_column_id)}return""}),ee=c(()=>{var o,t,a,i,u,p,v;return e.value?q(e.value)?`'${S.value}' ${O("labels.hasMany")} '${y.value}'`:U(e.value)?`'${S.value}' & '${y.value}' ${O("labels.manyToMany")}`:W(e.value)?`'${(o=e==null?void 0:e.value)==null?void 0:o.title}' ${O("labels.belongsTo")} '${y.value}'`:K(e.value)?`'${I.value.title}' from '${y.value}' (${I.value.uidt})`:$e(e.value)?`Formula - ${ue((a=(t=e.value)==null?void 0:t.colOptions)==null?void 0:a.formula,(i=s==null?void 0:s.value)==null?void 0:i.columns,(p=(u=e.value)==null?void 0:u.colOptions)==null?void 0:p.formula_raw)}`:G(e.value)?`'${I.value.title}' of '${y.value}' (${I.value.uidt})`:((v=e==null?void 0:e.value)==null?void 0:v.title)||"":""}),$=d(null),oe=async o=>{$.value=o,r.value=!0},j=()=>{$.value=null,r.value=!1},te=()=>{B.value||!g.value&&!D.value&&x("fieldEdit")&&!A.value&&(r.value=!0)},le=o=>{B.value||g.value||D.value||!x("fieldEdit")&&!A.value||(o.preventDefault(),o.stopPropagation(),b.value=!b.value)};return(o,t)=>{var _;const a=Oe,i=_e,u=xe,p=fe,v=we;return f(),E("div",{class:"flex items-center w-full h-full text-xs text-gray-500 font-weight-medium",onDblclick:te,onContextmenu:V(le,["right"])},[l(e)&&!M.hideIcon?(f(),T(a,{key:0})):k("",!0),P(i,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":""},{title:w(()=>[pe(z(l(ee)),1)]),default:w(()=>[F("span",{"data-test-id":l(e).title},z(l(e).title),9,ge)]),_:1}),l(me)(l(e),((_=l(s))==null?void 0:_.columns)||[])||o.required?(f(),E("span",De,"Â *")):k("",!0),l(Y)?k("",!0):(f(),E(de,{key:2},[Ee,!l(g)&&l(x)("fieldEdit")&&!l(D)?(f(),T(u,{key:0,"is-open":l(b),"onUpdate:isOpen":t[0]||(t[0]=m=>H(b)?b.value=m:null),virtual:!0,onAddColumn:oe,onEdit:t[1]||(t[1]=m=>r.value=!0)},null,8,["is-open"])):k("",!0)],64)),P(v,{visible:l(r),"onUpdate:visible":t[4]||(t[4]=m=>H(r)?r.value=m:null),class:"h-full",trigger:["click"],placement:"bottomRight","overlay-class-name":"nc-dropdown-edit-column"},{overlay:w(()=>[l(r)?(f(),T(p,{key:0,column:l($)?null:l(e),"column-position":l($),class:"w-full",onSubmit:j,onCancel:j,onClick:t[2]||(t[2]=V(()=>{},["stop"])),onKeydown:t[3]||(t[3]=V(()=>{},["stop"]))},null,8,["column","column-position"])):k("",!0)]),default:w(()=>[Te]),_:1},8,["visible"])],32)}}});const go=Me(Ve,[["__scopeId","data-v-03ebd1c0"]]);export{go as default};
