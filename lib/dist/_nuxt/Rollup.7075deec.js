import{f as V,bb as m,r as W,g as r,o as i,c as u,O as l,t as _,P as w,W as N,a as F,T as C,a0 as j,a1 as B}from"./entry.96205fa0.js";import{o as I,C as M,M as R}from"./index.9b87fcff.js";import{d as S}from"./virtualCell.9142cfee.js";import{b as P}from"./bases.965a49bb.js";import{u as T}from"./useShowNotEditableWarning.3e25a59f.js";import"./index.0c5b3837.js";import"./index.a5de28c1.js";const z=j(()=>B(()=>import("./Cell.a619fa9b.js"),["./Cell.a619fa9b.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./useSmartsheetRowStore.9c7d6fc1.js","./deepCompare.d32ec333.js","./dataUtils.fb0a3616.js","./virtualCell.9142cfee.js","./index.e034edbd.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.f27da8af.css"],import.meta.url).then(d=>d.default||d)),A={key:0},L={key:0,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},$={key:1,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},X=V({__name:"Rollup",setup(d){const{metas:E}=P(),s=m(I),n=m(M),c=m(R,W()),{showEditNonEditableFieldWarning:y,showClearNonEditableFieldWarning:O,activateShowEditNonEditableFieldWarning:p}=T(),f=r(()=>{var e,t,o,a,g;return(t=(e=n==null?void 0:n.value)==null?void 0:e.colOptions)!=null&&t.fk_relation_column_id?(g=(a=(o=c==null?void 0:c.value)==null?void 0:o.columns)==null?void 0:a.find(D=>{var x,b;return D.id===((b=(x=n==null?void 0:n.value)==null?void 0:x.colOptions)==null?void 0:b.fk_relation_column_id)}))==null?void 0:g.colOptions:null}),v=r(()=>{var e,t,o;return((e=f.value)==null?void 0:e.fk_related_model_id)&&((o=E.value)==null?void 0:o[(t=f.value)==null?void 0:t.fk_related_model_id])}),k=r(()=>{var e;return(e=n.value)==null?void 0:e.colOptions}),h=r(()=>{var e,t;return(e=v.value)!=null&&e.columns&&S(n.value)?(t=v.value)==null?void 0:t.columns.find(o=>o.id===k.value.fk_rollup_column_id):""});return(e,t)=>{const o=z;return i(),u("div",{onDblclick:t[1]||(t[1]=(...a)=>l(p)&&l(p)(...a))},[["count","avg","sum","countDistinct","sumDistinct","avgDistinct"].includes(l(k).rollup_function)?(i(),u("div",A,_(l(s)),1)):(i(),w(o,{key:1,modelValue:l(s),"onUpdate:modelValue":t[0]||(t[0]=a=>N(s)?s.value=a:null),column:l(h),"edit-enabled":!1,"read-only":!0},null,8,["modelValue","column"])),F("div",null,[l(y)?(i(),u("div",L,_(e.$t("msg.info.computedFieldEditWarning")),1)):C("",!0),l(O)?(i(),u("div",$,_(e.$t("msg.info.computedFieldDeleteWarning")),1)):C("",!0)])],32)}}});export{X as default};
