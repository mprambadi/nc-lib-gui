import{f as M,bb as a,bA as N,r,aM as O,eD as z,g as v,H as K,o as m,c as I,a as F,O as e,P as C,T as y,bv as G,cb as R,b as W,W as q,S as J,a0 as Q,a1 as X}from"./entry.5958c07b.js";import{_ as Y}from"./ItemChip.62435f04.js";import{_ as Z}from"./Icon.vue.129448d5.js";import{C as ee,B as te,o as oe,n as ne,m as se,i as ae,c as le,H as re}from"./index.9b87fcff.js";import{u as ie}from"./useLTARStore.59a45d45.js";import{u as ue}from"./index.c35df397.js";import{a as me}from"./useSmartsheetRowStore.5b92cc1b.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import"./dataUtils.3f874ca1.js";import"./cell.165313cd.js";import"./index.86363aca.js";import"./index.e61e381a.js";import"./bases.e6c8e3c4.js";import"./index.0feaca99.js";import"./useSharedView.e8f68616.js";import"./deepCompare.d32ec333.js";import"./virtualCell.427fa223.js";const ce=Q(()=>X(()=>import("./ListItems.aa19e1cf.js"),["./ListItems.aa19e1cf.js","./entry.5958c07b.js","./entry.bdecbb78.css","./Button.vue.c3ca0e8f.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./Pagination.c0f166a7.js","./Icon.vue.129448d5.js","./Tooltip.vue.971897f4.js","./Tooltip.b86f91a1.css","./index.5c6e4286.js","./toArray.fd74ce6f.js","./antInputDirective.8ac36ea7.js","./isMobile.e2e89480.js","./useMemo.1dd071d8.js","./useState.b891c8bb.js","./CheckOutlined.1fe5f230.js","./SearchOutlined.a517903c.js","./FormItemContext.ddc65fa5.js","./Pagination.fabf8b70.css","./Modal.vue.0f13e4cb.js","./DeleteModal.7ab6f524.css","./bases.e6c8e3c4.js","./index.0feaca99.js","./index.9b87fcff.js","./cell.165313cd.js","./useLTARStore.59a45d45.js","./index.e61e381a.js","./useSharedView.e8f68616.js","./useSmartsheetRowStore.5b92cc1b.js","./deepCompare.d32ec333.js","./dataUtils.3f874ca1.js","./virtualCell.427fa223.js","./plus.dc1af860.js","./magnify.3b643360.js","./inbox.954d1e59.js","./index.ae235b22.js","./Input.dca3a2bc.js","./isPlainObject.ccda79fe.js","./_getPrototype.c1f3bae2.js","./TextArea.9074ff05.js","./Password.f52125e7.js","./Image.c63a7a56.js","./Element.a1e4f356.js","./index.36af7517.js","./Input.8209df88.js","./ListItems.d8bb4ba4.css"],import.meta.url).then(p=>p.default||p)),de={class:"chips flex items-center flex-1"},_e=M({__name:"BelongsTo",async setup(p){let w,b;const l=a(ee),T=a(te,N()),s=a(oe,r(null)),j=a(ne),g=a(se),B=a(ae,r(!1)),A=a(le,r(!1)),h=a(re,r(!1)),{isUIAllowed:L}=O(),n=r(!1),{state:c,isNew:d,removeLTARRef:E}=me(),{relatedTableMeta:P,loadRelatedTableMeta:V,relatedTableDisplayValueProp:_,unlink:D}=ie(l,j,d,T.trigger);[w,b]=z(()=>V()),await w,b();const S=v(()=>s!=null&&s.value?"expand":"plus"),u=v(()=>{var t;return s!=null&&s.value?s==null?void 0:s.value:d.value?(t=c==null?void 0:c.value)==null?void 0:t[l==null?void 0:l.value.title]:null}),U=async t=>{d.value?await E(t,l==null?void 0:l.value):await D(t)};ue(g,t=>{switch(t.key){case"Enter":n.value=!0,t.stopPropagation();break}});const k=v(()=>{var t,o;return(o=(t=P.value)==null?void 0:t.columns)==null?void 0:o.find(f=>f.title===_.value)}),x=r(null);return K([n],()=>{var t;n.value||(t=x.value)==null||t.focus()}),(t,o)=>{const f=Y,$=Z,H=ce;return m(),I("div",{class:J(["flex w-full chips-wrapper items-center",{active:e(g)}])},[F("div",de,[e(u)&&e(_)?(m(),C(f,{key:0,item:e(u),value:e(u)[e(_)],column:e(k),"show-unlink-button":!0,onUnlink:o[0]||(o[0]=i=>U(e(u)))},null,8,["item","value","column"])):y("",!0)]),!e(B)&&(e(L)("dataEdit")||e(A))&&!e(h)?(m(),I("div",{key:0,ref_key:"plusBtnRef",ref:x,class:"flex justify-end group gap-1 min-h-[30px] items-center",tabindex:"0",onKeydown:o[2]||(o[2]=G(R(i=>n.value=!0,["stop"]),["enter"]))},[W($,{icon:e(S),class:"text-sm nc-action-icon group-focus:visible invisible text-gray-500/50 hover:text-gray-500 select-none group-hover:text-gray-500 nc-plus",onClick:o[1]||(o[1]=R(i=>n.value=!0,["stop"]))},null,8,["icon"])],544)):y("",!0),e(n)?(m(),C(H,{key:1,modelValue:e(n),"onUpdate:modelValue":o[3]||(o[3]=i=>q(n)?n.value=i:null),column:e(k),onAttachRecord:o[4]||(o[4]=i=>n.value=!0)},null,8,["modelValue","column"])):y("",!0)],2)}}});const Ee=pe(_e,[["__scopeId","data-v-a07ddbb2"]]);export{Ee as default};
