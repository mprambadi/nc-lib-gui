import{f as j,L as B,M as E,c8 as F,u as q,N as I,r as M,o as _,P as v,w as a,a0 as S,ca as T,a as r,b as o,O as e,t as i,d as u,cl as U,c as A,T as D,Q as z,R as O,a1 as G,X as Q,Y as W}from"./entry.5958c07b.js";import{_ as X}from"./nuxt-link.39d6b1ec.js";import{_ as Y}from"./Button.vue.c3ca0e8f.js";import{_ as H}from"./warning.385787ad.js";import{_ as J}from"./success-line.dd7d0434.js";import{v as K}from"./passwordHelpers.1679cef4.js";import{F as Z}from"./index.b06c8b67.js";import{_ as ee}from"./Password.f52125e7.js";import{_ as se}from"./FormItem.0bbf90a3.js";import"./index.55641318.js";import"./debounce.7c24f171.js";import"./toNumber.e09cd85a.js";import"./isSymbol.114fe557.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./useSize.fad35fe8.js";import"./identity.34c7640e.js";import"./_flatRest.39582a58.js";import"./isPlainObject.ccda79fe.js";import"./_getPrototype.c1f3bae2.js";import"./FormItemContext.ddc65fa5.js";import"./Input.dca3a2bc.js";import"./antInputDirective.8ac36ea7.js";import"./Col.a97e3e76.js";import"./responsiveObserve.0baefba6.js";import"./toArray.fd74ce6f.js";const oe=S(()=>G(()=>import("./NocoIcon.ea7a765e.js"),["./NocoIcon.ea7a765e.js","./NocoIcon.vue.589d8c3d.js","./entry.5958c07b.js","./entry.bdecbb78.css","./256x256-trans.69a212f8.js","./256x256.a76ef214.js"],import.meta.url).then(c=>c.default||c)),te={class:"md:bg-primary signin bg-opacity-5 forgot-password h-full min-h-[600px] flex flex-col justify-center items-center"},re={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},ae={class:"self-center flex flex-col justify-center items-center text-center gap-2"},ne={class:"prose-2xl font-bold my-4 w-full"},le={class:"prose-sm text-success flex items-center leading-8 gap-2"},ie={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1"},ce={class:"flex items-center gap-2 justify-center"},pe={class:"break-words"},de={class:"self-center flex flex-col gap-4 items-center justify-center w-full"},me={class:"flex items-center gap-2"},Se=j({__name:"[id]",setup(c){const{api:y,isLoading:f,error:n}=B(),{t:w}=E(),x=F(),b=q(),t=I({password:"",newPassword:""}),P=M();async function R(){if(t.newPassword!==t.password){n.value="password does not match";return}const{error:s,valid:l}=K(t.password);if(!l){n.value=s.includes("8")?"password should be atleast 8 characters":s;return}p();try{await y.auth.passwordReset(x.params.id,{password:t.password}),b.push("/#/sigin")}catch(d){Q.error(await W(d))}}function p(){n.value&&(n.value=null)}return(s,l)=>{const d=oe,$=J,k=X,N=H,g=ee,h=se,V=Y,C=Z,L=T;return _(),v(L,null,{default:a(()=>[r("div",te,[r("div",re,[o(d,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:e(f)},null,8,["animate"]),r("div",ae,[r("h1",ne,i(s.$t("title.resetPassword")),1),r("div",le,[u(i(s.$t("msg.info.passwordRecovery.success"))+" ",1),o($)]),o(k,{to:"/signin"},{default:a(()=>[u(i(s.$t("general.signIn")),1)]),_:1})]),o(C,{ref_key:"formValidator",ref:P,layout:"vertical",model:e(t),"no-style":"",onFinish:R},{default:a(()=>[o(U,{name:"layout"},{default:a(()=>[e(n)?(_(),A("div",ie,[r("div",ce,[o(N),r("div",pe,i(e(n)),1)])])):D("",!0)]),_:1}),o(h,{label:s.$t("placeholder.password.new"),name:"password",rules:[{required:!0,message:e(w)("msg.error.signUpRules.passwdRequired")}]},{default:a(()=>[o(g,{value:e(t).password,"onUpdate:value":l[0]||(l[0]=m=>e(t).password=m),placeholder:s.$t("placeholder.password.new"),class:"password",onFocus:p},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(h,{label:s.$t("placeholder.password.confirm"),name:"newPassword",rules:[{required:!0,message:e(w)("msg.error.signUpRules.passwdRequired")}]},{default:a(()=>[o(g,{value:e(t).newPassword,"onUpdate:value":l[1]||(l[1]=m=>e(t).newPassword=m),type:"password",class:"password",placeholder:s.$t("placeholder.password.confirm"),onFocus:p},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),r("div",de,[o(V,{type:"primary","is-loading":e(f),"html-type":"submit"},{default:a(()=>[r("span",me,[(_(),v(z(e(O).signin))),u(" "+i(s.$t("general.reset")),1)])]),_:1},8,["is-loading"])])]),_:1},8,["model"])])])]),_:1})}}});export{Se as default};
