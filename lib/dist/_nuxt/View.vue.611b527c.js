import{f as ve,cS as br,r as he,g as ue,bR as xr,o as U,c as oe,a9 as xe,O as C,S as Qe,P as Se,dl as as,dM as Er,bb as At,dL as Sr,H as _e,ba as Tt,a4 as ss,b as Ne,w as Pe,e4 as xn,aF as me,e8 as Nr,dA as Mr,a7 as rt,e0 as ls,N as kr,i as Bt,F as fi,a as ge,t as Ge,T as Ee,U as st,W as Yn,bu as Cr,K as Xn,aK as ze,l as $r,V as Xo,n as ye,q as Ar,dZ as Nt,ac as us,Q as it,d as cs,ae as ds,$ as fs,a5 as hs,c9 as gs,au as Rt,R as hi,bF as gi,a0 as ps,a1 as vs,eZ as ms}from"./entry.5958c07b.js";import{_ as ys}from"./Overlay.df272e53.js";import{C as _s}from"./index.5e1434a7.js";import{_ as ws}from"./_plugin-vue_export-helper.c27b6911.js";import{c as bs,a as xs,b as Es}from"./bases.e6c8e3c4.js";import{S as Ss}from"./index.55641318.js";function an(e){return Er()?(xn(e),!0):!1}function le(e){return typeof e=="function"?e():C(e)}const Tr=typeof window<"u"&&typeof document<"u",Ns=e=>typeof e<"u",Ms=Object.prototype.toString,ks=e=>Ms.call(e)==="[object Object]",Pr=()=>{};function Cs(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const Ir=e=>e();function $s(e=Ir){const t=he(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:Nr(t),pause:n,resume:o,eventFilter:i}}function pi(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function De(...e){if(e.length!==1)return me(...e);const t=e[0];return typeof t=="function"?Nr(Mr(()=>({get:t,set:Pr}))):he(t)}function As(e,t,n={}){const{eventFilter:o=Ir,...i}=n;return _e(e,Cs(o,t),i)}function xt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:a,resume:s,isActive:l}=$s(o);return{stop:As(e,t,{...i,eventFilter:r}),pause:a,resume:s,isActive:l}}function Ts(e,t={}){if(!Yn(e))return Cr(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Mr(()=>({get(){return e.value[o]},set(i){var r;if((r=le(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=i,e.value=s}else{const s={...e.value,[o]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=i}}));return n}function xo(e,t=!1){function n(d,{flush:f="sync",deep:g=!1,timeout:E,throwOnTimeout:v}={}){let h=null;const p=[new Promise(b=>{h=_e(e,_=>{d(_)!==t&&(h==null||h(),b(_))},{flush:f,deep:g,immediate:!0})})];return E!=null&&p.push(pi(E,v).then(()=>le(e)).finally(()=>h==null?void 0:h())),Promise.race(p)}function o(d,f){if(!Yn(d))return n(_=>_===d,f);const{flush:g="sync",deep:E=!1,timeout:v,throwOnTimeout:h}=f??{};let m=null;const b=[new Promise(_=>{m=_e([e,d],([k,D])=>{t!==(k===D)&&(m==null||m(),_(k))},{flush:g,deep:E,immediate:!0})})];return v!=null&&b.push(pi(v,h).then(()=>le(e)).finally(()=>(m==null||m(),le(e)))),Promise.race(b)}function i(d){return n(f=>!!f,d)}function r(d){return o(null,d)}function a(d){return o(void 0,d)}function s(d){return n(Number.isNaN,d)}function l(d,f){return n(g=>{const E=Array.from(g);return E.includes(d)||E.includes(le(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let g=-1;return n(()=>(g+=1,g>=d),f)}return Array.isArray(le(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return xo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:s,toBeUndefined:a,changed:u,changedTimes:c,get not(){return xo(e,!t)}}}function at(e){return xo(e)}function Eo(e){var t;const n=le(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Uo=Tr?window:void 0;function Zo(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Uo):[t,n,o,i]=e,!t)return Pr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],a=()=>{r.forEach(c=>c()),r.length=0},s=(c,d,f,g)=>(c.addEventListener(d,f,g),()=>c.removeEventListener(d,f,g)),l=_e(()=>[Eo(t),le(i)],([c,d])=>{if(a(),!c)return;const f=ks(d)?{...d}:d;r.push(...n.flatMap(g=>o.map(E=>s(c,g,E,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return an(u),u}function Ps(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function vi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Uo,eventName:r="keydown",passive:a=!1,dedupe:s=!1}=o,l=Ps(t);return Zo(i,r,c=>{c.repeat&&le(s)||l(c)&&n(c)},a)}function Is(){const e=he(!1);return Xn()&&Bt(()=>{e.value=!0}),e}function Ds(e){const t=Is();return ue(()=>(t.value,!!e()))}function zs(e){return JSON.parse(JSON.stringify(e))}function Os(e,t,n={}){const{window:o=Uo,...i}=n;let r;const a=Ds(()=>o&&"ResizeObserver"in o),s=()=>{r&&(r.disconnect(),r=void 0)},l=ue(()=>Array.isArray(e)?e.map(d=>Eo(d)):[Eo(e)]),u=_e(l,d=>{if(s(),a.value&&o){r=new ResizeObserver(t);for(const f of d)f&&r.observe(f,i)}},{immediate:!0,flush:"post",deep:!0}),c=()=>{s(),u()};return an(c),{isSupported:a,stop:c}}function Zt(e,t,n,o={}){var i,r,a;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,g=Xn(),E=n||(g==null?void 0:g.emit)||((i=g==null?void 0:g.$emit)==null?void 0:i.bind(g))||((a=(r=g==null?void 0:g.proxy)==null?void 0:r.$emit)==null?void 0:a.bind(g==null?void 0:g.proxy));let v=u;t||(t="modelValue"),v=v||`update:${t.toString()}`;const h=b=>s?typeof s=="function"?s(b):zs(b):b,m=()=>Ns(e[t])?h(e[t]):d,p=b=>{f?f(b)&&E(v,b):E(v,b)};if(l){const b=m(),_=he(b);let k=!1;return _e(()=>e[t],D=>{k||(k=!0,_.value=h(D),rt(()=>k=!1))}),_e(_,D=>{!k&&(D!==e[t]||c)&&p(D)},{deep:c}),_}else return ue({get(){return m()},set(b){p(b)}})}var Bs={value:()=>{}};function Un(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new En(n)}function En(e){this._=e}function Rs(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}En.prototype=Un.prototype={constructor:En,on:function(e,t){var n=this._,o=Rs(e+"",n),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=Vs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=mi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=mi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new En(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Vs(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function mi(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Bs,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var So="http://www.w3.org/1999/xhtml";const yi={svg:"http://www.w3.org/2000/svg",xhtml:So,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yi.hasOwnProperty(t)?{space:yi[t],local:e}:e}function Hs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===So&&t.documentElement.namespaceURI===So?t.createElement(e):t.createElementNS(n,e)}}function Fs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dr(e){var t=Zn(e);return(t.local?Fs:Hs)(t)}function Ls(){}function qo(e){return e==null?Ls:function(){return this.querySelector(e)}}function Gs(e){typeof e!="function"&&(e=qo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=new Array(a),l,u,c=0;c<a;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Ie(o,this._parents)}function Ys(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xs(){return[]}function zr(e){return e==null?Xs:function(){return this.querySelectorAll(e)}}function Us(e){return function(){return Ys(e.apply(this,arguments))}}function Zs(e){typeof e=="function"?e=Us(e):e=zr(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),i.push(l));return new Ie(o,i)}function Or(e){return function(){return this.matches(e)}}function Br(e){return function(t){return t.matches(e)}}var qs=Array.prototype.find;function Ws(e){return function(){return qs.call(this.children,e)}}function Ks(){return this.firstElementChild}function Js(e){return this.select(e==null?Ks:Ws(typeof e=="function"?e:Br(e)))}var Qs=Array.prototype.filter;function js(){return Array.from(this.children)}function el(e){return function(){return Qs.call(this.children,e)}}function tl(e){return this.selectAll(e==null?js:el(typeof e=="function"?e:Br(e)))}function nl(e){typeof e!="function"&&(e=Or(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new Ie(o,this._parents)}function Rr(e){return new Array(e.length)}function ol(){return new Ie(this._enter||this._groups.map(Rr),this._parents)}function An(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function il(e){return function(){return e}}function rl(e,t,n,o,i,r){for(var a=0,s,l=t.length,u=r.length;a<u;++a)(s=t[a])?(s.__data__=r[a],o[a]=s):n[a]=new An(e,r[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function al(e,t,n,o,i,r,a){var s,l,u=new Map,c=t.length,d=r.length,f=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(f[s]=g=a.call(l,l.__data__,s,t)+"",u.has(g)?i[s]=l:u.set(g,l));for(s=0;s<d;++s)g=a.call(e,r[s],s,r)+"",(l=u.get(g))?(o[s]=l,l.__data__=r[s],u.delete(g)):n[s]=new An(e,r[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function sl(e){return e.__data__}function ll(e,t){if(!arguments.length)return Array.from(this,sl);var n=t?al:rl,o=this._parents,i=this._groups;typeof e!="function"&&(e=il(e));for(var r=i.length,a=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,g=ul(e.call(c,c&&c.__data__,u,o)),E=g.length,v=s[u]=new Array(E),h=a[u]=new Array(E),m=l[u]=new Array(f);n(c,d,v,h,m,g,t);for(var p=0,b=0,_,k;p<E;++p)if(_=v[p]){for(p>=b&&(b=p+1);!(k=h[b])&&++b<E;);_._next=k||null}}return a=new Ie(a,o),a._enter=s,a._exit=l,a}function ul(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cl(){return new Ie(this._exit||this._groups.map(Rr),this._parents)}function dl(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function fl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),g,E=0;E<d;++E)(g=u[E]||c[E])&&(f[E]=g);for(;l<i;++l)s[l]=n[l];return new Ie(s,this._parents)}function hl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function gl(e){e||(e=pl);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],s=a.length,l=i[r]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new Ie(i,this._parents).order()}function pl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ml(){return Array.from(this)}function yl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function _l(){let e=0;for(const t of this)++e;return e}function wl(){return!this.node()}function bl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,s;r<a;++r)(s=i[r])&&e.call(s,s.__data__,r,i);return this}function xl(e){return function(){this.removeAttribute(e)}}function El(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sl(e,t){return function(){this.setAttribute(e,t)}}function Nl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ml(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function kl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Cl(e,t){var n=Zn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?El:xl:typeof t=="function"?n.local?kl:Ml:n.local?Nl:Sl)(n,t))}function Vr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $l(e){return function(){this.style.removeProperty(e)}}function Al(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Tl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Pl(e,t,n){return arguments.length>1?this.each((t==null?$l:typeof t=="function"?Tl:Al)(e,t,n??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||Vr(e).getComputedStyle(e,null).getPropertyValue(t)}function Il(e){return function(){delete this[e]}}function Dl(e,t){return function(){this[e]=t}}function zl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ol(e,t){return arguments.length>1?this.each((t==null?Il:typeof t=="function"?zl:Dl)(e,t)):this.node()[e]}function Hr(e){return e.trim().split(/^|\s+/)}function Wo(e){return e.classList||new Fr(e)}function Fr(e){this._node=e,this._names=Hr(e.getAttribute("class")||"")}Fr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lr(e,t){for(var n=Wo(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Gr(e,t){for(var n=Wo(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Bl(e){return function(){Lr(this,e)}}function Rl(e){return function(){Gr(this,e)}}function Vl(e,t){return function(){(t.apply(this,arguments)?Lr:Gr)(this,e)}}function Hl(e,t){var n=Hr(e+"");if(arguments.length<2){for(var o=Wo(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Vl:t?Bl:Rl)(n,t))}function Fl(){this.textContent=""}function Ll(e){return function(){this.textContent=e}}function Gl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Yl(e){return arguments.length?this.each(e==null?Fl:(typeof e=="function"?Gl:Ll)(e)):this.node().textContent}function Xl(){this.innerHTML=""}function Ul(e){return function(){this.innerHTML=e}}function Zl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ql(e){return arguments.length?this.each(e==null?Xl:(typeof e=="function"?Zl:Ul)(e)):this.node().innerHTML}function Wl(){this.nextSibling&&this.parentNode.appendChild(this)}function Kl(){return this.each(Wl)}function Jl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ql(){return this.each(Jl)}function jl(e){var t=typeof e=="function"?e:Dr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function eu(){return null}function tu(e,t){var n=typeof e=="function"?e:Dr(e),o=t==null?eu:typeof t=="function"?t:qo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function nu(){var e=this.parentNode;e&&e.removeChild(this)}function ou(){return this.each(nu)}function iu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ru(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function au(e){return this.select(e?ru:iu)}function su(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lu(e){return function(t){e.call(this,t,this.__data__)}}function uu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function cu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function du(e,t,n){return function(){var o=this.__on,i,r=lu(t);if(o){for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function fu(e,t,n){var o=uu(e+""),i,r=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?du:cu,i=0;i<r;++i)this.each(s(o[i],t,n));return this}function Yr(e,t,n){var o=Vr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function hu(e,t){return function(){return Yr(this,e,t)}}function gu(e,t){return function(){return Yr(this,e,t.apply(this,arguments))}}function pu(e,t){return this.each((typeof t=="function"?gu:hu)(e,t))}function*vu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var Xr=[null];function Ie(e,t){this._groups=e,this._parents=t}function sn(){return new Ie([[document.documentElement]],Xr)}function mu(){return this}Ie.prototype=sn.prototype={constructor:Ie,select:Gs,selectAll:Zs,selectChild:Js,selectChildren:tl,filter:nl,data:ll,enter:ol,exit:cl,join:dl,merge:fl,selection:mu,order:hl,sort:gl,call:vl,nodes:ml,node:yl,size:_l,empty:wl,each:bl,attr:Cl,style:Pl,property:Ol,classed:Hl,text:Yl,html:ql,raise:Kl,lower:Ql,append:jl,insert:tu,remove:ou,clone:au,datum:su,on:fu,dispatch:pu,[Symbol.iterator]:vu};function Oe(e){return typeof e=="string"?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Xr)}function yu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Le(e,t){if(e=yu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const _u={passive:!1},Kt={capture:!0,passive:!1};function uo(e){e.stopImmediatePropagation()}function Mt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ur(e){var t=e.document.documentElement,n=Oe(e).on("dragstart.drag",Mt,Kt);"onselectstart"in t?n.on("selectstart.drag",Mt,Kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zr(e,t){var n=e.document.documentElement,o=Oe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Mt,Kt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const dn=e=>()=>e;function No(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}No.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function wu(e){return!e.ctrlKey&&!e.button}function bu(){return this.parentNode}function xu(e,t){return t??{x:e.x,y:e.y}}function Eu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Su(){var e=wu,t=bu,n=xu,o=Eu,i={},r=Un("start","drag","end"),a=0,s,l,u,c,d=0;function f(_){_.on("mousedown.drag",g).filter(o).on("touchstart.drag",h).on("touchmove.drag",m,_u).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(_,k){if(!(c||!e.call(this,_,k))){var D=b(this,t.call(this,_,k),_,k,"mouse");D&&(Oe(_.view).on("mousemove.drag",E,Kt).on("mouseup.drag",v,Kt),Ur(_.view),uo(_),u=!1,s=_.clientX,l=_.clientY,D("start",_))}}function E(_){if(Mt(_),!u){var k=_.clientX-s,D=_.clientY-l;u=k*k+D*D>d}i.mouse("drag",_)}function v(_){Oe(_.view).on("mousemove.drag mouseup.drag",null),Zr(_.view,u),Mt(_),i.mouse("end",_)}function h(_,k){if(e.call(this,_,k)){var D=_.changedTouches,w=t.call(this,_,k),V=D.length,H,A;for(H=0;H<V;++H)(A=b(this,w,_,k,D[H].identifier,D[H]))&&(uo(_),A("start",_,D[H]))}}function m(_){var k=_.changedTouches,D=k.length,w,V;for(w=0;w<D;++w)(V=i[k[w].identifier])&&(Mt(_),V("drag",_,k[w]))}function p(_){var k=_.changedTouches,D=k.length,w,V;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),w=0;w<D;++w)(V=i[k[w].identifier])&&(uo(_),V("end",_,k[w]))}function b(_,k,D,w,V,H){var A=r.copy(),B=Le(H||D,k),ce,q,y;if((y=n.call(_,new No("beforestart",{sourceEvent:D,target:f,identifier:V,active:a,x:B[0],y:B[1],dx:0,dy:0,dispatch:A}),w))!=null)return ce=y.x-B[0]||0,q=y.y-B[1]||0,function $(N,I,O){var R=B,P;switch(N){case"start":i[V]=$,P=a++;break;case"end":delete i[V],--a;case"drag":B=Le(O||I,k),P=a;break}A.call(N,_,new No(N,{sourceEvent:I,subject:y,target:f,identifier:V,active:P,x:B[0]+ce,y:B[1]+q,dx:B[0]-R[0],dy:B[1]-R[1],dispatch:A}),w)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:dn(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:dn(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:dn(_),f):n},f.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:dn(!!_),f):o},f.on=function(){var _=r.on.apply(r,arguments);return _===r?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function Ko(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ln(){}var Jt=.7,Tn=1/Jt,kt="\\s*([+-]?\\d+)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nu=/^#([0-9a-f]{3,8})$/,Mu=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),ku=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Cu=new RegExp(`^rgba\\(${kt},${kt},${kt},${Qt}\\)$`),$u=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${Qt}\\)$`),Au=new RegExp(`^hsl\\(${Qt},${Ye},${Ye}\\)$`),Tu=new RegExp(`^hsla\\(${Qt},${Ye},${Ye},${Qt}\\)$`),_i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ko(ln,jt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wi,formatHex:wi,formatHex8:Pu,formatHsl:Iu,formatRgb:bi,toString:bi});function wi(){return this.rgb().formatHex()}function Pu(){return this.rgb().formatHex8()}function Iu(){return Wr(this).formatHsl()}function bi(){return this.rgb().formatRgb()}function jt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Nu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xi(t):n===3?new Ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mu.exec(e))?new Ae(t[1],t[2],t[3],1):(t=ku.exec(e))?new Ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cu.exec(e))?fn(t[1],t[2],t[3],t[4]):(t=$u.exec(e))?fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Au.exec(e))?Ni(t[1],t[2]/100,t[3]/100,1):(t=Tu.exec(e))?Ni(t[1],t[2]/100,t[3]/100,t[4]):_i.hasOwnProperty(e)?xi(_i[e]):e==="transparent"?new Ae(NaN,NaN,NaN,0):null}function xi(e){return new Ae(e>>16&255,e>>8&255,e&255,1)}function fn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ae(e,t,n,o)}function Du(e){return e instanceof ln||(e=jt(e)),e?(e=e.rgb(),new Ae(e.r,e.g,e.b,e.opacity)):new Ae}function Mo(e,t,n,o){return arguments.length===1?Du(e):new Ae(e,t,n,o??1)}function Ae(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Ko(Ae,Mo,qr(ln,{brighter(e){return e=e==null?Tn:Math.pow(Tn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ae(gt(this.r),gt(this.g),gt(this.b),Pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ei,formatHex:Ei,formatHex8:zu,formatRgb:Si,toString:Si}));function Ei(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}`}function zu(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}${ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function Si(){const e=Pn(this.opacity);return`${e===1?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${e===1?")":`, ${e})`}`}function Pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ct(e){return e=gt(e),(e<16?"0":"")+e.toString(16)}function Ni(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Be(e,t,n,o)}function Wr(e){if(e instanceof Be)return new Be(e.h,e.s,e.l,e.opacity);if(e instanceof ln||(e=jt(e)),!e)return new Be;if(e instanceof Be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,s=r-i,l=(r+i)/2;return s?(t===r?a=(n-o)/s+(n<o)*6:n===r?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?r+i:2-r-i,a*=60):s=l>0&&l<1?0:a,new Be(a,s,l,e.opacity)}function Ou(e,t,n,o){return arguments.length===1?Wr(e):new Be(e,t,n,o??1)}function Be(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Ko(Be,Ou,qr(ln,{brighter(e){return e=e==null?Tn:Math.pow(Tn,e),new Be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new Be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Ae(co(e>=240?e-240:e+120,i,o),co(e,i,o),co(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Be(Mi(this.h),hn(this.s),hn(this.l),Pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pn(this.opacity);return`${e===1?"hsl(":"hsla("}${Mi(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mi(e){return e=(e||0)%360,e<0?e+360:e}function hn(e){return Math.max(0,Math.min(1,e||0))}function co(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kr=e=>()=>e;function Bu(e,t){return function(n){return e+n*t}}function Ru(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Vu(e){return(e=+e)==1?Jr:function(t,n){return n-t?Ru(t,n,e):Kr(isNaN(t)?n:t)}}function Jr(e,t){var n=t-e;return n?Bu(e,n):Kr(isNaN(e)?t:e)}const ki=function e(t){var n=Vu(t);function o(i,r){var a=n((i=Mo(i)).r,(r=Mo(r)).r),s=n(i.g,r.g),l=n(i.b,r.b),u=Jr(i.opacity,r.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function nt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ko=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fo=new RegExp(ko.source,"g");function Hu(e){return function(){return e}}function Fu(e){return function(t){return e(t)+""}}function Lu(e,t){var n=ko.lastIndex=fo.lastIndex=0,o,i,r,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=ko.exec(e))&&(i=fo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),s[a]?s[a]+=r:s[++a]=r),(o=o[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:nt(o,i)})),n=fo.lastIndex;return n<t.length&&(r=t.slice(n),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?Fu(l[0].x):Hu(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Ci=180/Math.PI,Co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qr(e,t,n,o,i,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Ci,skewX:Math.atan(l)*Ci,scaleX:a,scaleY:s}}var gn;function Gu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Co:Qr(t.a,t.b,t.c,t.d,t.e,t.f)}function Yu(e){return e==null||(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",e),!(e=gn.transform.baseVal.consolidate()))?Co:(e=e.matrix,Qr(e.a,e.b,e.c,e.d,e.e,e.f))}function jr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,g,E){if(u!==d||c!==f){var v=g.push("translate(",null,t,null,n);E.push({i:v-4,x:nt(u,d)},{i:v-2,x:nt(c,f)})}else(d||f)&&g.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:nt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:nt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,f,g,E){if(u!==d||c!==f){var v=g.push(i(g)+"scale(",null,",",null,")");E.push({i:v-4,x:nt(u,d)},{i:v-2,x:nt(c,f)})}else(d!==1||f!==1)&&g.push(i(g)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(g){for(var E=-1,v=f.length,h;++E<v;)d[(h=f[E]).i]=h.x(g);return d.join("")}}}var Xu=jr(Gu,"px, ","px)","deg)"),Uu=jr(Yu,", ",")",")"),Zu=1e-12;function $i(e){return((e=Math.exp(e))+1/e)/2}function qu(e){return((e=Math.exp(e))-1/e)/2}function Wu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ku=function e(t,n,o){function i(r,a){var s=r[0],l=r[1],u=r[2],c=a[0],d=a[1],f=a[2],g=c-s,E=d-l,v=g*g+E*E,h,m;if(v<Zu)m=Math.log(f/u)/t,h=function(w){return[s+w*g,l+w*E,u*Math.exp(t*w*m)]};else{var p=Math.sqrt(v),b=(f*f-u*u+o*v)/(2*u*n*p),_=(f*f-u*u-o*v)/(2*f*n*p),k=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(_*_+1)-_);m=(D-k)/t,h=function(w){var V=w*m,H=$i(k),A=u/(n*p)*(H*Wu(t*V+k)-qu(k));return[s+A*g,l+A*E,u*H/$i(t*V+k)]}}return h.duration=m*1e3*t/Math.SQRT2,h}return i.rho=function(r){var a=Math.max(.001,+r),s=a*a,l=s*s;return e(a,s,l)},i}(Math.SQRT2,2,4);var It=0,Lt=0,Vt=0,ea=1e3,In,Gt,Dn=0,yt=0,qn=0,en=typeof performance=="object"&&performance.now?performance:Date,ta=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Jo(){return yt||(ta(Ju),yt=en.now()+qn)}function Ju(){yt=0}function zn(){this._call=this._time=this._next=null}zn.prototype=na.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Jo():+n)+(t==null?0:+t),!this._next&&Gt!==this&&(Gt?Gt._next=this:In=this,Gt=this),this._call=e,this._time=n,$o()},stop:function(){this._call&&(this._call=null,this._time=1/0,$o())}};function na(e,t,n){var o=new zn;return o.restart(e,t,n),o}function Qu(){Jo(),++It;for(var e=In,t;e;)(t=yt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--It}function Ai(){yt=(Dn=en.now())+qn,It=Lt=0;try{Qu()}finally{It=0,ec(),yt=0}}function ju(){var e=en.now(),t=e-Dn;t>ea&&(qn-=t,Dn=e)}function ec(){for(var e,t=In,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:In=n);Gt=e,$o(o)}function $o(e){if(!It){Lt&&(Lt=clearTimeout(Lt));var t=e-yt;t>24?(e<1/0&&(Lt=setTimeout(Ai,e-en.now()-qn)),Vt&&(Vt=clearInterval(Vt))):(Vt||(Dn=en.now(),Vt=setInterval(ju,ea)),It=1,ta(Ai))}}function Ti(e,t,n){var o=new zn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var tc=Un("start","end","cancel","interrupt"),nc=[],oa=0,Pi=1,Ao=2,Sn=3,Ii=4,To=5,Nn=6;function Wn(e,t,n,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;oc(e,n,{name:t,index:o,group:i,on:tc,tween:nc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:oa})}function Qo(e,t){var n=He(e,t);if(n.state>oa)throw new Error("too late; already scheduled");return n}function Ue(e,t){var n=He(e,t);if(n.state>Sn)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function oc(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=na(r,0,n.time);function r(u){n.state=Pi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,g;if(n.state!==Pi)return l();for(c in o)if(g=o[c],g.name===n.name){if(g.state===Sn)return Ti(a);g.state===Ii?(g.state=Nn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=Nn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(Ti(function(){n.state===Sn&&(n.state=Ii,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ao,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ao){for(n.state=Sn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=To,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===To&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Nn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Mn(e,t){var n=e.__transition,o,i,r=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){r=!1;continue}i=o.state>Ao&&o.state<To,o.state=Nn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}r&&delete e.__transition}}function ic(e){return this.each(function(){Mn(this,e)})}function rc(e,t){var n,o;return function(){var i=Ue(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function ac(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Ue(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}r.tween=i}}function sc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=He(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((t==null?rc:ac)(n,e,t))}function jo(e,t,n){var o=e._id;return e.each(function(){var i=Ue(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return He(i,o).value[t]}}function ia(e,t){var n;return(typeof t=="number"?nt:t instanceof jt?ki:(n=jt(t))?(t=n,ki):Lu)(e,t)}function lc(e){return function(){this.removeAttribute(e)}}function uc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cc(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function dc(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function fc(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function hc(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function gc(e,t){var n=Zn(e),o=n==="transform"?Uu:ia;return this.attrTween(e,typeof t=="function"?(n.local?hc:fc)(n,o,jo(this,"attr."+e,t)):t==null?(n.local?uc:lc)(n):(n.local?dc:cc)(n,o,t))}function pc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function vc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mc(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&vc(e,r)),n}return i._value=t,i}function yc(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&pc(e,r)),n}return i._value=t,i}function _c(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Zn(e);return this.tween(n,(o.local?mc:yc)(o,t))}function wc(e,t){return function(){Qo(this,e).delay=+t.apply(this,arguments)}}function bc(e,t){return t=+t,function(){Qo(this,e).delay=t}}function xc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wc:bc)(t,e)):He(this.node(),t).delay}function Ec(e,t){return function(){Ue(this,e).duration=+t.apply(this,arguments)}}function Sc(e,t){return t=+t,function(){Ue(this,e).duration=t}}function Nc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ec:Sc)(t,e)):He(this.node(),t).duration}function Mc(e,t){if(typeof t!="function")throw new Error;return function(){Ue(this,e).ease=t}}function kc(e){var t=this._id;return arguments.length?this.each(Mc(t,e)):He(this.node(),t).ease}function Cc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ue(this,e).ease=n}}function $c(e){if(typeof e!="function")throw new Error;return this.each(Cc(this._id,e))}function Ac(e){typeof e!="function"&&(e=Or(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new je(o,this._parents,this._name,this._id)}function Tc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,g=0;g<c;++g)(f=l[g]||u[g])&&(d[g]=f);for(;s<o;++s)a[s]=t[s];return new je(a,this._parents,this._name,this._id)}function Pc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ic(e,t,n){var o,i,r=Pc(t)?Qo:Ue;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(t,n),a.on=i}}function Dc(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(Ic(n,e,t))}function zc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Oc(){return this.on("end.remove",zc(this._id))}function Bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qo(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s=o[a],l=s.length,u=r[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Wn(u[f],t,n,f,u,He(c,n)));return new je(r,this._parents,t,n)}function Rc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zr(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),g,E=He(c,n),v=0,h=f.length;v<h;++v)(g=f[v])&&Wn(g,t,n,v,f,E);r.push(f),a.push(c)}return new je(r,a,t,n)}var Vc=sn.prototype.constructor;function Hc(){return new Vc(this._groups,this._parents)}function Fc(e,t){var n,o,i;return function(){var r=Pt(this,e),a=(this.style.removeProperty(e),Pt(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function ra(e){return function(){this.style.removeProperty(e)}}function Lc(e,t,n){var o,i=n+"",r;return function(){var a=Pt(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function Gc(e,t,n){var o,i,r;return function(){var a=Pt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Pt(this,e))),a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s))}}function Yc(e,t){var n,o,i,r="style."+t,a="end."+r,s;return function(){var l=Ue(this,e),u=l.on,c=l.value[r]==null?s||(s=ra(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(a,i=c),l.on=o}}function Xc(e,t,n){var o=(e+="")=="transform"?Xu:ia;return t==null?this.styleTween(e,Fc(e,o)).on("end.style."+e,ra(e)):typeof t=="function"?this.styleTween(e,Gc(e,o,jo(this,"style."+e,t))).each(Yc(this._id,e)):this.styleTween(e,Lc(e,o,t),n).on("end.style."+e,null)}function Uc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Zc(e,t,n){var o,i;function r(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&Uc(e,a,n)),o}return r._value=t,r}function qc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Zc(e,t,n??""))}function Wc(e){return function(){this.textContent=e}}function Kc(e){return function(){var t=e(this);this.textContent=t??""}}function Jc(e){return this.tween("text",typeof e=="function"?Kc(jo(this,"text",e)):Wc(e==null?"":e+""))}function Qc(e){return function(t){this.textContent=e.call(this,t)}}function jc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Qc(i)),t}return o._value=e,o}function ed(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jc(e))}function td(){for(var e=this._name,t=this._id,n=aa(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=He(l,t);Wn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new je(o,this._parents,e,n)}function nd(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--i===0&&r()}};n.each(function(){var u=Ue(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&r()})}var od=0;function je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function aa(){return++od}var qe=sn.prototype;je.prototype={constructor:je,select:Bc,selectAll:Rc,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:Ac,merge:Tc,selection:Hc,transition:td,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:Dc,attr:gc,attrTween:_c,style:Xc,styleTween:qc,text:Jc,textTween:ed,remove:Oc,tween:sc,delay:xc,duration:Nc,ease:kc,easeVarying:$c,end:nd,[Symbol.iterator]:qe[Symbol.iterator]};function id(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var rd={time:null,delay:0,duration:250,ease:id};function ad(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function sd(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=aa(),(n=rd).time=Jo(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Wn(l,e,t,u,a,n||ad(l,t));return new je(o,this._parents,e,t)}sn.prototype.interrupt=ic;sn.prototype.transition=sd;const pn=e=>()=>e;function ld(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Je(e,t,n){this.k=e,this.x=t,this.y=n}Je.prototype={constructor:Je,scale:function(e){return e===1?this:new Je(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Je(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new Je(1,0,0);Je.prototype;function ho(e){e.stopImmediatePropagation()}function Ht(e){e.preventDefault(),e.stopImmediatePropagation()}function ud(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Di(){return this.__zoom||Dt}function dd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fd(){return navigator.maxTouchPoints||"ontouchstart"in this}function hd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function gd(){var e=ud,t=cd,n=hd,o=dd,i=fd,r=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ku,u=Un("start","zoom","end"),c,d,f,g=500,E=150,v=0,h=10;function m(y){y.property("__zoom",Di).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",B).on("touchmove.zoom",ce).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(y,$,N,I){var O=y.selection?y.selection():y;O.property("__zoom",Di),y!==O?k(y,$,N,I):O.interrupt().each(function(){D(this,arguments).event(I).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},m.scaleBy=function(y,$,N,I){m.scaleTo(y,function(){var O=this.__zoom.k,R=typeof $=="function"?$.apply(this,arguments):$;return O*R},N,I)},m.scaleTo=function(y,$,N,I){m.transform(y,function(){var O=t.apply(this,arguments),R=this.__zoom,P=N==null?_(O):typeof N=="function"?N.apply(this,arguments):N,Y=R.invert(P),Q=typeof $=="function"?$.apply(this,arguments):$;return n(b(p(R,Q),P,Y),O,a)},N,I)},m.translateBy=function(y,$,N,I){m.transform(y,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),a)},null,I)},m.translateTo=function(y,$,N,I,O){m.transform(y,function(){var R=t.apply(this,arguments),P=this.__zoom,Y=I==null?_(R):typeof I=="function"?I.apply(this,arguments):I;return n(Dt.translate(Y[0],Y[1]).scale(P.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof N=="function"?-N.apply(this,arguments):-N),R,a)},I,O)};function p(y,$){return $=Math.max(r[0],Math.min(r[1],$)),$===y.k?y:new Je($,y.x,y.y)}function b(y,$,N){var I=$[0]-N[0]*y.k,O=$[1]-N[1]*y.k;return I===y.x&&O===y.y?y:new Je(y.k,I,O)}function _(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function k(y,$,N,I){y.on("start.zoom",function(){D(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(I).end()}).tween("zoom",function(){var O=this,R=arguments,P=D(O,R).event(I),Y=t.apply(O,R),Q=N==null?_(Y):typeof N=="function"?N.apply(O,R):N,J=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),L=O.__zoom,ee=typeof $=="function"?$.apply(O,R):$,z=l(L.invert(Q).concat(J/L.k),ee.invert(Q).concat(J/ee.k));return function(ae){if(ae===1)ae=ee;else{var re=z(ae),ne=J/re[2];ae=new Je(ne,Q[0]-re[0]*ne,Q[1]-re[1]*ne)}P.zoom(null,ae)}})}function D(y,$,N){return!N&&y.__zooming||new w(y,$)}function w(y,$){this.that=y,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,$),this.taps=0}w.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,$){return this.mouse&&y!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var $=Oe(this.that).datum();u.call(y,this.that,new ld(y,{sourceEvent:this.sourceEvent,target:m,type:y,transform:this.that.__zoom,dispatch:u}),$)}};function V(y,...$){if(!e.apply(this,arguments))return;var N=D(this,$).event(y),I=this.__zoom,O=Math.max(r[0],Math.min(r[1],I.k*Math.pow(2,o.apply(this,arguments)))),R=Le(y);if(N.wheel)(N.mouse[0][0]!==R[0]||N.mouse[0][1]!==R[1])&&(N.mouse[1]=I.invert(N.mouse[0]=R)),clearTimeout(N.wheel);else{if(I.k===O)return;N.mouse=[R,I.invert(R)],Mn(this),N.start()}Ht(y),N.wheel=setTimeout(P,E),N.zoom("mouse",n(b(p(I,O),N.mouse[0],N.mouse[1]),N.extent,a));function P(){N.wheel=null,N.end()}}function H(y,...$){if(f||!e.apply(this,arguments))return;var N=y.currentTarget,I=D(this,$,!0).event(y),O=Oe(y.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",J,!0),R=Le(y,N),P=y.clientX,Y=y.clientY;Ur(y.view),ho(y),I.mouse=[R,this.__zoom.invert(R)],Mn(this),I.start();function Q(L){if(Ht(L),!I.moved){var ee=L.clientX-P,z=L.clientY-Y;I.moved=ee*ee+z*z>v}I.event(L).zoom("mouse",n(b(I.that.__zoom,I.mouse[0]=Le(L,N),I.mouse[1]),I.extent,a))}function J(L){O.on("mousemove.zoom mouseup.zoom",null),Zr(L.view,I.moved),Ht(L),I.event(L).end()}}function A(y,...$){if(e.apply(this,arguments)){var N=this.__zoom,I=Le(y.changedTouches?y.changedTouches[0]:y,this),O=N.invert(I),R=N.k*(y.shiftKey?.5:2),P=n(b(p(N,R),I,O),t.apply(this,$),a);Ht(y),s>0?Oe(this).transition().duration(s).call(k,P,I,y):Oe(this).call(m.transform,P,I,y)}}function B(y,...$){if(e.apply(this,arguments)){var N=y.touches,I=N.length,O=D(this,$,y.changedTouches.length===I).event(y),R,P,Y,Q;for(ho(y),P=0;P<I;++P)Y=N[P],Q=Le(Y,this),Q=[Q,this.__zoom.invert(Q),Y.identifier],O.touch0?!O.touch1&&O.touch0[2]!==Q[2]&&(O.touch1=Q,O.taps=0):(O.touch0=Q,R=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),R&&(O.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},g)),Mn(this),O.start())}}function ce(y,...$){if(this.__zooming){var N=D(this,$).event(y),I=y.changedTouches,O=I.length,R,P,Y,Q;for(Ht(y),R=0;R<O;++R)P=I[R],Y=Le(P,this),N.touch0&&N.touch0[2]===P.identifier?N.touch0[0]=Y:N.touch1&&N.touch1[2]===P.identifier&&(N.touch1[0]=Y);if(P=N.that.__zoom,N.touch1){var J=N.touch0[0],L=N.touch0[1],ee=N.touch1[0],z=N.touch1[1],ae=(ae=ee[0]-J[0])*ae+(ae=ee[1]-J[1])*ae,re=(re=z[0]-L[0])*re+(re=z[1]-L[1])*re;P=p(P,Math.sqrt(ae/re)),Y=[(J[0]+ee[0])/2,(J[1]+ee[1])/2],Q=[(L[0]+z[0])/2,(L[1]+z[1])/2]}else if(N.touch0)Y=N.touch0[0],Q=N.touch0[1];else return;N.zoom("touch",n(b(P,Y,Q),N.extent,a))}}function q(y,...$){if(this.__zooming){var N=D(this,$).event(y),I=y.changedTouches,O=I.length,R,P;for(ho(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),R=0;R<O;++R)P=I[R],N.touch0&&N.touch0[2]===P.identifier?delete N.touch0:N.touch1&&N.touch1[2]===P.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(P=Le(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<h)){var Y=Oe(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return m.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:pn(+y),m):o},m.filter=function(y){return arguments.length?(e=typeof y=="function"?y:pn(!!y),m):e},m.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:pn(!!y),m):i},m.extent=function(y){return arguments.length?(t=typeof y=="function"?y:pn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),m):t},m.scaleExtent=function(y){return arguments.length?(r[0]=+y[0],r[1]=+y[1],m):[r[0],r[1]]},m.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(y){return arguments.length?(n=y,m):n},m.duration=function(y){return arguments.length?(s=+y,m):s},m.interpolate=function(y){return arguments.length?(l=y,m):l},m.on=function(){var y=u.on.apply(u,arguments);return y===u?m:y},m.clickDistance=function(y){return arguments.length?(v=(y=+y)*y,m):Math.sqrt(v)},m.tapDistance=function(y){return arguments.length?(h=+y,m):h},m}var W=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(W||{}),ei=(e=>(e.Partial="partial",e.Full="full",e))(ei||{}),Et=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Et||{}),_t=(e=>(e.Strict="strict",e.Loose="loose",e))(_t||{}),Po=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Po||{}),qt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(qt||{});const sa="vue-flow__node-desc",la="vue-flow__edge-desc",pd="vue-flow__aria-live",ua=["Enter"," ","Escape"],Ct={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function zi(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Io(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Kn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function wt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ca(e,t){return{x:wt(e.x,t[0][0],t[1][0]),y:wt(e.y,t[0][1],t[1][1])}}function Oi(e){const t=e.getRootNode();return"elementFromPoint"in t?t:ri().document}function lt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function vd(e){return lt(e)&&"sourceNode"in e&&"targetNode"in e}function pt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!lt(e)}function dt(e){return pt(e)&&"computedPosition"in e}function md(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function yd(e,t={}){let n=t;return dt(e)||(n={type:e.type??t.type??"default",dimensions:Nt({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:Nt({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:we(e.data)?e.data:{},events:Nt(we(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function da(e,t={}){const n=we(e.events)?e.events:t.events&&we(t.events)?t.events:{},o=we(e.data)?e.data:t.data&&we(t.data)?t.data:{};return t=vd(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:Nt(n),label:(e.label&&typeof e.label!="string"?Nt(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function fa(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,a=o==="source"?"target":"source";return n.forEach(s=>{s[a]===i&&r.add(s[o])}),t.filter(s=>r.has(s.id))}function _d(...e){if(e.length===3){const[r,a,s]=e;return fa(r,a,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>lt(r)&&r.source===o).map(r=>n.find(a=>pt(a)&&a.id===r.target))}function wd(...e){if(e.length===3){const[r,a,s]=e;return fa(r,a,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>lt(r)&&r.target===o).map(r=>n.find(a=>pt(a)&&a.id===r.source))}function ha({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function bd(e,t){return t.some(n=>lt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ga({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Do({x:e,y:t},{x:n,y:o,zoom:i},r,[a,s]){const l={x:(e-n)/i,y:(t-o)/i};return r?{x:a*Math.round(l.x/a),y:s*Math.round(l.y/s)}:l}function xd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function pa({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ed({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function va(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>xd(n,pa({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ed(t)}function ma(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},r=!1,a=!1){const s={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(l=>{const{computedPosition:u={x:0,y:0},dimensions:c={width:0,height:0},selectable:d}=l;if(a&&!d)return!1;const f={...u,width:c.width||0,height:c.height||0},g=Io(s,f),E=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,v=r&&g>0,h=c.width*c.height;return E||v||g>=h})}function Jn(e,t){const n=new Set;return typeof e=="string"?n.add(e):e.length>=1&&e.forEach(o=>n.add(o.id)),t.filter(o=>n.has(o.source)||n.has(o.target))}function Bi(e,t,n,o,i,r=.1,a={x:0,y:0}){const s=t/(e.width*(1+r)),l=n/(e.height*(1+r)),u=Math.min(s,l),c=wt(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,g=t/2-d*c+(a.x??0),E=n/2-f*c+(a.y??0);return{x:g,y:E,zoom:c}}function Sd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ya(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ya(n,t):!1}function ft(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Ri(e,t,n){return e<t?wt(Math.abs(e-t),1,50)/50:e>n?-wt(Math.abs(e-n),1,50)/50:0}function _a(e,t){const n=Ri(e.x,35,t.width-35)*20,o=Ri(e.y,35,t.height-35)*20;return[n,o]}function go(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const a=t.style;return{...a(r),...i}}:t.style={...t.style,...i}}}}function Vi(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(a=>a.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const r=t.findIndex(a=>a.id===i.id);r!==-1&&t.splice(r,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var r,a;const s=e.filter(l=>l.id===i.id);for(const l of s)switch(l.type){case"select":i.selected=l.selected;break;case"position":if(dt(i)&&(typeof l.position<"u"&&(i.position=l.position),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&i.parentNode)){const u=t[o.indexOf(i.parentNode)];u&&dt(u)&&go(i,u)}break;case"dimensions":if(dt(i)){if(typeof l.dimensions<"u"&&(i.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(i.style={...i.style||{},width:`${(r=l.dimensions)==null?void 0:r.width}px`,height:`${(a=l.dimensions)==null?void 0:a.height}px`}),typeof l.resizing<"u"&&(i.resizing=l.resizing),i.expandParent&&i.parentNode){const u=t[o.indexOf(i.parentNode)];u&&dt(u)&&(u.initialized?go(i,u):rt(()=>{go(i,u)}))}i.initialized||(i.initialized=!0)}break}}),t}function Ke(e,t){return{id:e,type:"select",selected:t}}function Hi(e){return{item:e,type:"add"}}function Fi(e){return{id:e,type:"remove"}}function Li(e,t,n){return{id:e,source:t,target:n,type:"remove"}}function po(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);we(o.selectable)&&!o.selectable&&(i=!1);const r=dt(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[r].push(Ke(o.id,!0)):o.selected&&!i&&n[r].push(Ke(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function F(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>i(s);return an(l),{off:l}},off:i,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:o,fns:t}}function Gi(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Nd(e,t,n,o,i){return e.filter(r=>(r.selected||r.id===i)&&(!r.parentNode||!ya(r,o))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var a,s;return Nt({id:r.id,position:r.position||{x:0,y:0},distance:{x:n.x-((a=r.computedPosition)==null?void 0:a.x)||0,y:n.y-((s=r.computedPosition)==null?void 0:s.y)||0},from:r.computedPosition,extent:r.extent,parentNode:r.parentNode,dimensions:r.dimensions,expandParent:r.expandParent})})}function vo({id:e,dragItems:t,findNode:n}){const o=t.reduce((i,r)=>{const a=n(r.id);return a&&i.push(a),i},[]);return[e?o.find(i=>i.id===e):o[0],o]}function wa(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Md(e,t,n){const[o,i,r,a]=typeof e!="string"?wa(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function kd(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=Md(i,e,o);r&&(i=r)}else t(new Ce(ke.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+a],[i[1][0]+r,i[1][1]+a]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,a,s,l]=wa(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+r],[i.range[1][0]+u-a,i.range[1][1]+c-s]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Cd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function ti(e,t,n,o,i){const r=Cd(e.dimensions,kd(e,n,o,i)),a=ca(t,r);return{position:{x:a.x-((i==null?void 0:i.computedPosition.x)||0),y:a.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:a}}function zo(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,r=(n==null?void 0:n.width)??t.width,a=(n==null?void 0:n.height)??t.height;switch(e){case W.Top:return{x:o+r/2,y:i};case W.Right:return{x:o+r,y:i+a/2};case W.Bottom:return{x:o+r/2,y:i+a};case W.Left:return{x:o,y:i+a/2}}}function Yi(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function $d(e,t,n,o,i,r){const a=zo(n,{...e.dimensions,...e.computedPosition},t),s=zo(r,{...o.dimensions,...o.computedPosition},i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}}function Ad({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=pa({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Td(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return!r||!a?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i)}var ke=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(ke||{});const Xi={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class Ce extends Error{constructor(t,...n){var o;super((o=Xi[t])==null?void 0:o.call(Xi,...n)),this.code=t}}function ni(e){return"clientX"in e}function vt(e,t){var n,o;const i=ni(e),r=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const On=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ba(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function mo(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Ui(e,t,n,o){return(t[n]||[]).reduce((i,r)=>{var a,s;return`${e.id}-${r.id}-${n}`!==o&&i.push({id:r.id||null,type:n,nodeId:e.id,x:(((a=e.computedPosition)==null?void 0:a.x)??0)+r.x+r.width/2,y:(((s=e.computedPosition)==null?void 0:s.y)??0)+r.y+r.height/2,width:r.width,height:r.height}),i},[])}function Pd(e,t,n,o,i,r){const{x:a,y:s}=vt(e),u=t.elementsFromPoint(a,s).find(E=>E.classList.contains("vue-flow__handle"));if(u){const E=u.getAttribute("data-nodeid");if(E){const v=oi(void 0,u),h=u.getAttribute("data-handleid"),m=r({nodeId:E,id:h,type:v});if(m){const p=i.find(b=>b.nodeId===E&&b.type===v&&b.id===h);return{handle:{id:h,type:v,nodeId:E,x:(p==null?void 0:p.x)||n.x,y:(p==null?void 0:p.y)||n.y},validHandleResult:m}}}}let c=[],d=1/0;if(i.forEach(E=>{const v=Math.sqrt((E.x-n.x)**2+(E.y-n.y)**2);if(v<=o){const h=r(E);v<=d&&(v<d?c=[{handle:E,validHandleResult:h}]:v===d&&c.push({handle:E,validHandleResult:h}),d=v)}}),!c.length)return{handle:null,validHandleResult:ba()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:E})=>E.isValid),g=c.some(({handle:E})=>E.type==="target");return c.find(({handle:E,validHandleResult:v})=>g?E.type==="target":f?v.isValid:!0)||c[0]}function Zi(e,t,n,o,i,r,a,s,l,u,c){const d=r==="target",f=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:g,y:E}=vt(e),v=s.elementFromPoint(g,E),h=v!=null&&v.classList.contains("vue-flow__handle")?v:f,m=ba();if(h){m.handleDomNode=h;const p=oi(void 0,h),b=h.getAttribute("data-nodeid"),_=h.getAttribute("data-handleid"),k=h.classList.contains("connectable"),D=h.classList.contains("connectableend"),w={source:d?b:o,sourceHandle:d?_:i,target:d?o:b,targetHandle:d?i:_};m.connection=w;const H=k&&D&&(n===_t.Strict?d&&p==="source"||!d&&p==="target":b!==o||_!==i);m.endHandle={nodeId:b,handleId:_,type:p},H&&(m.isValid=a(w,{edges:l,nodes:u,sourceNode:c(w.source),targetNode:c(w.target)}))}return m}function Id({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,r)=>{const{handleBounds:a}=r;let s=[],l=[];return a&&(s=Ui(r,a,"source",`${t}-${n}-${o}`),l=Ui(r,a,"target",`${t}-${n}-${o}`)),i.push(...s,...l),i},[])}function oi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Dd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const zd=["production","prod"];function Qn(e,...t){zd.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function qi(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),r=t.getBoundingClientRect();return i.map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(s.left-r.left)/n,y:(s.top-r.top)/n,...Kn(a)}})}function Oo(e,t,n,o,i,r=!1,a){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),rt(()=>{a.blur()})):n([e])}function we(e){return typeof C(e)<"u"}function Od(e,t,n){if(!e.source||!e.target)return n(new Ce(ke.EDGE_INVALID,e.id)),!1;let o;return lt(e)?o=e:o={...e,id:ha(e)},o=da(o),bd(o,t)?!1:o}function Bd(e,t,n,o,i,r){if(!t.source||!t.target)return r(new Ce(ke.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return r(new Ce(ke.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...l}=e,u={...l,id:i?ha(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function Wi(e,t,n,o){const i={},r=e.reduce((s,l)=>{if(!pt(l))return o(new Ce(ke.NODE_INVALID)),s;const u=yd(l,{...n(l.id),parentNode:l.parentNode});return l.parentNode&&(i[l.parentNode]=!0),s.concat(u)},[]),a=[...r,...t];for(const s of r){const l=a.find(u=>u.id===s.parentNode);s.parentNode&&!l&&o(new Ce(ke.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||i[s.id])&&(i[s.id]&&(s.isParent=!0),l&&(l.isParent=!0))}return r}function xa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:r,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,nodesDraggable:c,panBy:d,findNode:f,multiSelectionActive:g,nodesSelectionActive:E,selectNodesOnDrag:v,removeSelectedElements:h,addSelectedNodes:m,updateNodePositions:p,emits:b}=Me(),{onStart:_,onDrag:k,onStop:D,el:w,disabled:V,id:H,selectable:A,dragHandle:B}=e,ce=he(!1);let q=[],y,$=null,N={x:void 0,y:void 0},I={x:0,y:0},O=null,R=!1,P=0,Y=!1;const Q=Rf(),J=({x:ne,y:se})=>{N={x:ne,y:se};let Z=!1;if(q=q.map(j=>{const de={x:ne-j.distance.x,y:se-j.distance.y};n.value&&(de.x=o.value[0]*Math.round(de.x/o.value[0]),de.y=o.value[1]*Math.round(de.y/o.value[1]));const{computedPosition:fe}=ti(j,de,b.error,a.value,j.parentNode?f(j.parentNode):void 0);return Z=Z||j.position.x!==fe.x||j.position.y!==fe.y,j.position=fe,j}),!!Z&&(p(q,!0,!0),ce.value=!0,O)){const[j,de]=vo({id:H,dragItems:q,findNode:f});k({event:O,node:j,nodes:de})}},L=()=>{if(!$)return;const[ne,se]=_a(I,$);if(ne!==0||se!==0){const Z={x:(N.x??0)-ne/l.value.zoom,y:(N.y??0)-se/l.value.zoom};d({x:ne,y:se})&&J(Z)}P=requestAnimationFrame(L)},ee=(ne,se)=>{R=!0;const Z=f(H);!v.value&&!g.value&&Z&&(Z.selected||h()),Z&&le(A)&&v.value&&Oo(Z,g.value,m,h,E,!1,se);const j=Q(ne);if(N=j,q=Nd(r.value,c.value,j,f,H),q.length){const[de,fe]=vo({id:H,dragItems:q,findNode:f});_({event:ne.sourceEvent,node:de,nodes:fe})}},z=(ne,se)=>{var Z;s.value===0&&ee(ne,se),N=Q(ne),$=((Z=t.value)==null?void 0:Z.getBoundingClientRect())||null,I=vt(ne.sourceEvent,$)},ae=(ne,se)=>{const Z=Q(ne);if(!Y&&R&&u.value&&(Y=!0,L()),!R){const j=Z.xSnapped-(N.x??0),de=Z.ySnapped-(N.y??0);Math.sqrt(j*j+de*de)>s.value&&ee(ne,se)}(N.x!==Z.xSnapped||N.y!==Z.ySnapped)&&q.length&&R&&(O=ne.sourceEvent,I=vt(ne.sourceEvent,$),J(Z))},re=ne=>{if(R&&(ce.value=!1,Y=!1,R=!1,cancelAnimationFrame(P),q.length)){p(q,!1,!1);const[se,Z]=vo({id:H,dragItems:q,findNode:f});D({event:ne.sourceEvent,node:se,nodes:Z})}};return _e([()=>le(V),w],([ne,se],Z,j)=>{if(se){const de=Oe(se);ne||(y=Su().on("start",fe=>z(fe,se)).on("drag",fe=>ae(fe,se)).on("end",fe=>re(fe)).filter(fe=>{const be=fe.target,x=le(B);return!fe.button&&(!i.value||!Gi(be,`.${i.value}`,se)&&(!x||Gi(be,x,se)))}),de.call(y)),j(()=>{de.on(".drag",null),y&&(y.on("start",null),y.on("drag",null),y.on("end",null))})}}),ce}function Rd(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>Qn(e.message))}}function Vd(e,t){ls(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.fns.add(i),an(()=>{o.off(i)})}})}const Hd=["data-id","data-handleid","data-nodeid","data-handlepos"],Fd={name:"Handle",compatConfig:{MODE:3}},Bn=ve({...Fd,props:{id:{},type:{},position:{default:()=>W.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=br(e,["position","connectable","connectableStart","connectableEnd","id"]),n=De(()=>t.type??"source"),o=De(()=>t.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:r,connectionEndHandle:a,vueFlowRef:s,nodesConnectable:l,noDragClassName:u,noPanClassName:c}=Me(),{id:d,node:f,nodeEl:g,connectedEdges:E}=Lf(),v=he(),h=De(()=>e.id??`${d}__handle-${e.position}`),m=De(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),p=De(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),b=De(()=>{var A,B,ce,q,y,$;return((A=i.value)==null?void 0:A.nodeId)===d&&((B=i.value)==null?void 0:B.handleId)===h.value&&((ce=i.value)==null?void 0:ce.type)===n.value||((q=a.value)==null?void 0:q.nodeId)===d&&((y=a.value)==null?void 0:y.handleId)===h.value&&(($=a.value)==null?void 0:$.type)===n.value}),_=De(()=>{var A,B,ce;return((A=r.value)==null?void 0:A.nodeId)===d&&((B=r.value)==null?void 0:B.handleId)===h.value&&((ce=r.value)==null?void 0:ce.type)===n.value}),{handlePointerDown:k,handleClick:D}=Ta({nodeId:d,handleId:h,isValidConnection:o,type:n}),w=ue(()=>typeof e.connectable=="string"&&e.connectable==="single"?!E.value.some(A=>{const B=A[`${n.value}Handle`];return A[n.value]!==d?!1:B?B===h.value:!0}):typeof e.connectable=="number"?E.value.filter(A=>{const B=A[`${n.value}Handle`];return A[n.value]!==d?!1:B?B===h.value:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(f,E.value):we(e.connectable)?e.connectable:l.value);at(()=>f.initialized).toBe(!0,{flush:"post"}).then(()=>{var A;const B=(A=f.handleBounds[n.value])==null?void 0:A.find(O=>O.id===h.value);if(!s.value||B)return;const ce=s.value.querySelector(".vue-flow__transformationpane");if(!g.value||!v.value||!ce||!h.value)return;const q=g.value.getBoundingClientRect(),y=v.value.getBoundingClientRect(),$=window.getComputedStyle(ce),{m22:N}=new window.DOMMatrixReadOnly($.transform),I={id:h.value,position:e.position,x:(y.left-q.left)/N,y:(y.top-q.top)/N,...Kn(v.value)};f.handleBounds[n.value]=[...f.handleBounds[n.value]??[],I]}),xr(()=>{const A=f.handleBounds[n.value];A&&(f.handleBounds[n.value]=A.filter(B=>B.id!==h.value))});function V(A){const B=ni(A);w.value&&m.value&&(B&&A.button===0||!B)&&k(A)}function H(A){!d||!r.value&&!m.value||w.value&&D(A)}return(A,B)=>(U(),oe("div",{ref_key:"handle",ref:v,"data-id":`${C(d)}-${C(h)}-${C(n)}`,"data-handleid":C(h),"data-nodeid":C(d),"data-handlepos":A.position,class:Qe(["vue-flow__handle",[`vue-flow__handle-${A.position}`,`vue-flow__handle-${C(h)}`,C(u),C(c),C(n),{connectable:w.value,connecting:C(_),connectablestart:C(m),connectableend:C(p),connectionindicator:w.value&&(C(m)&&!C(b)||C(p)&&C(b))}]]),onMousedown:V,onTouchstartPassive:V,onClick:H},[xe(A.$slots,"default",{id:A.id})],42,Hd))}}),jn=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r}){return[ye(Bn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?ye(n):ye("div",{innerHTML:n}),ye(Bn,{type:"source",position:e,connectable:o,isValidConnection:r})]};jn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];jn.inheritAttrs=!1;jn.compatConfig={MODE:3};const Ld=jn,eo=function({sourcePosition:e=W.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?ye(t):ye("div",{innerHTML:t}),ye(Bn,{type:"source",position:e,connectable:n,isValidConnection:o})]};eo.props=["sourcePosition","label","isValidSourcePos","connectable"];eo.inheritAttrs=!1;eo.compatConfig={MODE:3};const Gd=eo,to=function({targetPosition:e=W.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[ye(Bn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?ye(t):ye("div",{innerHTML:t})]};to.props=["targetPosition","label","isValidTargetPos","connectable"];to.inheritAttrs=!1;to.compatConfig={MODE:3};const Yd=to,Ki=Symbol("vueFlow"),Ea=Symbol("nodeId"),Sa=Symbol("nodeRef"),Xd=Symbol("edgeId"),Ud=Symbol("edgeRef"),no=Symbol("slots"),Zd=ve({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){Tt(Ea,e.id);const{id:t,edges:n,noPanClassName:o,selectNodesOnDrag:i,nodesSelectionActive:r,multiSelectionActive:a,emits:s,findNode:l,removeSelectedNodes:u,addSelectedNodes:c,updateNodeDimensions:d,onUpdateNodeInternals:f,getIntersectingNodes:g,getNodeTypes:E,nodeExtent:v,elevateNodesOnSelect:h,disableKeyboardA11y:m,ariaLiveMessage:p,snapToGrid:b,snapGrid:_,nodeDragThreshold:k}=Me(),D=Pa(),w=Zt(e,"node"),V=ue(()=>l(w.value.parentNode)),H=ue(()=>Jn([w.value],n.value)),A=he(null);Tt(Sa,A);const{emit:B,on:ce}=Yf(w.value,s),q=xa({id:e.id,el:A,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>w.value.dragHandle,onStart(z){B.dragStart({...z,intersections:g(w.value)})},onDrag(z){B.drag({...z,intersections:g(w.value)})},onStop(z){B.dragStop({...z,intersections:g(w.value)})}}),y=ue(()=>w.value.class instanceof Function?w.value.class(w.value):w.value.class),$=ue(()=>{const z=(w.value.style instanceof Function?w.value.style(w.value):w.value.style)||{},ae=w.value.width instanceof Function?w.value.width(w.value):w.value.width,re=w.value.height instanceof Function?w.value.height(w.value):w.value.height;return ae&&(z.width=typeof ae=="string"?ae:`${ae}px`),re&&(z.height=typeof re=="string"?re:`${re}px`),z}),N=()=>Number(w.value.zIndex??$.value.zIndex??0);return f(z=>{z.includes(e.id)&&O()}),Bt(()=>{e.resizeObserver.observe(A.value)}),$r(()=>{e.resizeObserver.unobserve(A.value)}),_e([()=>w.value.type,()=>w.value.sourcePosition,()=>w.value.targetPosition],()=>{d([{id:e.id,nodeElement:A.value,forceUpdate:!0}])},{flush:"pre"}),_e([()=>w.value.position.x,()=>w.value.position.y,()=>{var z;return(z=V.value)==null?void 0:z.computedPosition.x},()=>{var z;return(z=V.value)==null?void 0:z.computedPosition.y},()=>{var z;return(z=V.value)==null?void 0:z.computedPosition.z},()=>N(),()=>w.value.selected,()=>w.value.dimensions.height,()=>w.value.dimensions.width,()=>{var z;return(z=V.value)==null?void 0:z.dimensions.height},()=>{var z;return(z=V.value)==null?void 0:z.dimensions.width}],([z,ae,re,ne,se,Z])=>{const j={x:z,y:ae,z:Z+(h.value&&w.value.selected?1e3:0)};typeof re<"u"&&typeof ne<"u"?w.value.computedPosition=Sd({x:re,y:ne,z:se},j):w.value.computedPosition=j},{flush:"post",immediate:!0}),_e([()=>w.value.extent,v],([z,ae],[re,ne])=>{(z!==re||ae!==ne)&&I()}),w.value.extent==="parent"||typeof w.value.extent=="object"&&"range"in w.value.extent&&w.value.extent.range==="parent"?at(()=>w.value.initialized).toBe(!0).then(I):I(),()=>ye("div",{ref:A,"data-id":w.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[o.value]:e.draggable,dragging:q==null?void 0:q.value,selected:w.value.selected,selectable:e.selectable,parent:w.value.isParent},y.value],style:{zIndex:w.value.computedPosition.z??N(),transform:`translate(${w.value.computedPosition.x}px,${w.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:w.value.initialized?"visible":"hidden",...$.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":m.value?void 0:`${sa}-${t}`,"aria-label":w.value.ariaLabel,onMouseenter:R,onMousemove:P,onMouseleave:Y,onContextmenu:Q,onClick:L,onDblclick:J,onKeydown:ee},[ye(e.type===!1?E.value.default:e.type,{id:w.value.id,type:w.value.type,data:w.value.data,events:{...w.value.events,...ce},selected:!!w.value.selected,resizing:!!w.value.resizing,dragging:q.value,connectable:e.connectable,position:w.value.position,dimensions:w.value.dimensions,isValidTargetPos:w.value.isValidTargetPos,isValidSourcePos:w.value.isValidSourcePos,parent:w.value.parentNode,zIndex:w.value.computedPosition.z,targetPosition:w.value.targetPosition,sourcePosition:w.value.sourcePosition,label:w.value.label,dragHandle:w.value.dragHandle,onUpdateNodeInternals:O})]);function I(){const z=w.value.computedPosition;b.value&&(z.x=_.value[0]*Math.round(z.x/_.value[0]),z.y=_.value[1]*Math.round(z.y/_.value[1]));const{computedPosition:ae,position:re}=ti(w.value,z,s.error,v.value,V.value);(w.value.computedPosition.x!==ae.x||w.value.computedPosition.y!==ae.y)&&(w.value.computedPosition={...w.value.computedPosition,...ae}),(w.value.position.x!==re.x||w.value.position.y!==re.y)&&(w.value.position=re)}function O(){A.value&&d([{id:e.id,nodeElement:A.value,forceUpdate:!0}])}function R(z){q!=null&&q.value||B.mouseEnter({event:z,node:w.value,connectedEdges:H.value})}function P(z){q!=null&&q.value||B.mouseMove({event:z,node:w.value,connectedEdges:H.value})}function Y(z){q!=null&&q.value||B.mouseLeave({event:z,node:w.value,connectedEdges:H.value})}function Q(z){return B.contextMenu({event:z,node:w.value,connectedEdges:H.value})}function J(z){return B.doubleClick({event:z,node:w.value,connectedEdges:H.value})}function L(z){e.selectable&&(!i.value||!e.draggable||k.value>0)&&Oo(w.value,a.value,c,u,r,!1,A.value),B.click({event:z,node:w.value,connectedEdges:H.value})}function ee(z){if(!Ro(z))if(ua.includes(z.key)&&e.selectable){const ae=z.key==="Escape";Oo(w.value,a.value,c,u,r,ae,A.value)}else!m.value&&e.draggable&&w.value.selected&&Ct[z.key]&&(p.value=`Moved selected node ${z.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~w.value.position.x}, y: ${~~w.value.position.y}`,D({x:Ct[z.key].x,y:Ct[z.key].y},z.shiftKey))}}}),qd=Zd,Wd=["transform"],Kd=["width","height","x","y","rx","ry"],Jd=["y"],Qd={name:"EdgeText",compatConfig:{MODE:3}},jd=ve({...Qd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=he({x:0,y:0,width:0,height:0}),n=he(null),o=ue(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Bt(i),_e([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,a)=>(U(),oe("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(U(),oe("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:ze(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,Kd)):Ee("",!0),ge("text",ds(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[xe(r.$slots,"default",{},()=>[typeof r.label!="string"?(U(),Se(it(r.label),{key:0})):(U(),oe(st,{key:1},[cs(Ge(r.label),1)],64))])],16,Jd)],8,Wd))}}),ef=["id","d","marker-end","marker-start"],tf=["d","stroke-width"],nf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},oo=ve({...nf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},ref:{type:[String,Object,Function]},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=br(e,["interactionWidth","labelShowBg"]),o=he(null),i=he(null),r=he(null),a=us();return t({pathEl:o,interactionEl:i,labelEl:r}),(s,l)=>(U(),oe(st,null,[ge("path",{id:s.id,ref_key:"pathEl",ref:o,d:s.path,style:ze(n.style),class:Qe(["vue-flow__edge-path",C(a).class]),"marker-end":s.markerEnd,"marker-start":s.markerStart},null,14,ef),s.interactionWidth?(U(),oe("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,tf)):Ee("",!0),s.label&&s.labelX&&s.labelY?(U(),Se(jd,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Ee("",!0)],64))}});function Na({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[r,s,i,a]}function Ma({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:s}){const l=e*.125+i*.375+a*.375+n*.125,u=t*.125+r*.375+s*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function vn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ji({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,s;switch(e){case W.Left:a=t-vn(t-o,r),s=n;break;case W.Right:a=t+vn(o-t,r),s=n;break;case W.Top:a=t,s=n-vn(n-i,r);break;case W.Bottom:a=t,s=n+vn(i-n,r);break}return[a,s]}function ka({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:i,targetPosition:r=W.Top,curvature:a=.25}){const[s,l]=Ji({pos:n,x1:e,y1:t,x2:o,y2:i,c:a}),[u,c]=Ji({pos:r,x1:o,y1:i,x2:e,y2:t,c:a}),[d,f,g,E]=Ma({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${o},${i}`,d,f,g,E]}function Qi({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case W.Left:case W.Right:r=.5*(t+o),a=n;break;case W.Top:case W.Bottom:r=t,a=.5*(n+i);break}return[r,a]}function Ca({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:i,targetPosition:r=W.Top}){const[a,s]=Qi({pos:n,x1:e,y1:t,x2:o,y2:i}),[l,u]=Qi({pos:r,x1:o,y1:i,x2:e,y2:t}),[c,d,f,g]=Ma({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${s} ${l},${u} ${o},${i}`,c,d,f,g]}const ji={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}};function of({source:e,sourcePosition:t=W.Bottom,target:n}){return t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function er(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function rf({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:i,offset:r}){const a=ji[t],s=ji[o],l={x:e.x+a.x*r,y:e.y+a.y*r},u={x:n.x+s.x*r,y:n.y+s.y*r},c=of({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let g,E,v;const h={x:0,y:0},m={x:0,y:0},[p,b,_,k]=Na({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){E=i.x||p,v=i.y||b;const w=[{x:E,y:l.y},{x:E,y:u.y}],V=[{x:l.x,y:v},{x:u.x,y:v}];a[d]===f?g=d==="x"?w:V:g=d==="x"?V:w}else{const w=[{x:l.x,y:u.y}],V=[{x:u.x,y:l.y}];if(d==="x"?g=a.x===f?V:w:g=a.y===f?w:V,t===o){const q=Math.abs(e[d]-n[d]);if(q<=r){const y=Math.min(r-1,r-q);a[d]===f?h[d]=y:m[d]=y}}if(t!==o){const q=d==="x"?"y":"x",y=a[d]===s[q],$=l[q]>u[q],N=l[q]<u[q];(a[d]===1&&(!y&&$||y&&N)||a[d]!==1&&(!y&&N||y&&$))&&(g=d==="x"?w:V)}const H={x:l.x-h.x,y:l.y-h.y},A={x:u.x-m.x,y:u.y-m.y},B=Math.max(Math.abs(H.x-g[0].x),Math.abs(A.x-g[0].x)),ce=Math.max(Math.abs(H.y-g[0].y),Math.abs(A.y-g[0].y));B>=ce?(E=(H.x+A.x)/2,v=g[0].y):(E=g[0].x,v=(H.y+A.y)/2)}return[[e,{x:l.x-h.x,y:l.y-h.y},...g,{x:u.x-m.x,y:u.y-m.y},n],E,v,_,k]}function af(e,t,n,o){const i=Math.min(er(e,t)/2,er(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${a}Q ${r},${a} ${r},${a+i*c}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${r},${a+i*l}Q ${r},${a} ${r+i*s},${a}`}function Bo({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:i,targetPosition:r=W.Top,borderRadius:a=5,centerX:s,centerY:l,offset:u=20}){const[c,d,f,g,E]=rf({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:s,y:l},offset:u});return[c.reduce((h,m,p)=>{let b;return p>0&&p<c.length-1?b=af(c[p-1],m,c[p+1],a):b=`${p===0?"M":"L"}${m.x} ${m.y}`,h+=b,h},""),d,f,g,E]}function sf({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,r,a,s]=Na({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,r,a,s]}const lf=ve({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ka({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ye(oo,{path:n,labelX:o,labelY:i,...t,...e})}}}),uf=lf,cf=ve({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ca({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ye(oo,{path:n,labelX:o,labelY:i,...t,...e})}}}),df=cf,ff=ve({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Bo({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ye(oo,{path:n,labelX:o,labelY:i,...t,...e})}}}),$a=ff,hf=ve({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>ye($a,{...e,...t,borderRadius:0})}}),gf=hf,pf=ve({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=sf(e);return ye(oo,{path:n,labelX:o,labelY:i,...t,...e})}}}),vf=pf;function mf(e,t,n){return n===W.Left?e-t:n===W.Right?e+t:e}function yf(e,t,n){return n===W.Top?e-t:n===W.Bottom?e+t:e}const ii=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=W.Top,type:i}){return ye("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:mf(t,e,o),cy:yf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ii.props=["radius","centerX","centerY","position","type"];ii.compatConfig={MODE:3};const tr=ii,_f=ve({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:g,hooks:E}=Me(),v=Bf(e.edge,r),h=Zt(e,"edge"),m=he(!1),p=he(!1),b=he(""),_=he(null),k=he("source"),D=he(null);Tt(Xd,e.id),Tt(Ud,D);const w=ue(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),V=ue(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:H}=Ta({nodeId:b,handleId:_,type:k,isValidConnection:f,edgeUpdaterType:k,onEdgeUpdate:ce,onEdgeUpdateEnd:q});return()=>{const L=d(h.value.source),ee=d(h.value.target);if(!L&&!ee)return E.value.error.trigger(new Ce(ke.EDGE_SOURCE_TARGET_MISSING,h.value.id,h.value.source,h.value.target)),null;if(!L)return E.value.error.trigger(new Ce(ke.EDGE_SOURCE_MISSING,h.value.id,h.value.source)),null;if(!ee)return E.value.error.trigger(new Ce(ke.EDGE_TARGET_MISSING,h.value.id,h.value.target)),null;if(!h.value||L.hidden||ee.hidden)return null;let z;o.value===_t.Strict?z=L.handleBounds.source:z=[...L.handleBounds.source||[],...L.handleBounds.target||[]];const ae=Yi(z,h.value.sourceHandle);let re;o.value===_t.Strict?re=ee.handleBounds.target:re=[...ee.handleBounds.target||[],...ee.handleBounds.source||[]];const ne=Yi(re,h.value.targetHandle),se=ae?ae.position:W.Bottom,Z=ne?ne.position:W.Top,{sourceX:j,sourceY:de,targetY:fe,targetX:be}=$d(L,ae,se,ee,ne,Z);return h.value.sourceX=j,h.value.sourceY=de,h.value.targetX=be,h.value.targetY=fe,ye("g",{ref:D,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,s.value,w.value,{updating:m.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:$,onContextmenu:N,onDblclick:I,onMouseenter:O,onMousemove:R,onMouseleave:P,onKeyDown:e.focusable?J:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${la}-${t}`:void 0,role:e.focusable?"button":"img"},[p.value?null:ye(e.type===!1?l.value.default:e.type,{id:e.id,sourceNode:L,targetNode:ee,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...v.on},style:V.value,markerStart:`url(#${ft(h.value.markerStart,t)})`,markerEnd:`url(#${ft(h.value.markerEnd,t)})`,sourcePosition:se,targetPosition:Z,sourceX:j,sourceY:de,targetX:be,targetY:fe,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[ye("g",{onMousedown:Y,onMouseenter:A,onMouseout:B},ye(tr,{position:se,centerX:j,centerY:de,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[ye("g",{onMousedown:Q,onMouseenter:A,onMouseout:B},ye(tr,{position:Z,centerX:be,centerY:fe,radius:i.value,type:"target","data-type":"target"}))]:null]])};function A(){m.value=!0}function B(){m.value=!1}function ce(L,ee){v.emit.update({event:L,edge:h.value,connection:ee})}function q(L){v.emit.updateEnd({event:L,edge:h.value}),p.value=!1}function y(L,ee){L.button===0&&(p.value=!0,b.value=ee?h.value.target:h.value.source,_.value=(ee?h.value.targetHandle:h.value.sourceHandle)??"",k.value=ee?"target":"source",v.emit.updateStart({event:L,edge:h.value}),H(L))}function $(L){var ee;const z={event:L,edge:h.value};e.selectable&&(a.value=!1,h.value.selected&&g.value?(u([h.value]),(ee=D.value)==null||ee.blur()):n([h.value])),v.emit.click(z)}function N(L){v.emit.contextMenu({event:L,edge:h.value})}function I(L){v.emit.doubleClick({event:L,edge:h.value})}function O(L){v.emit.mouseEnter({event:L,edge:h.value})}function R(L){v.emit.mouseMove({event:L,edge:h.value})}function P(L){v.emit.mouseLeave({event:L,edge:h.value})}function Y(L){y(L,!0)}function Q(L){y(L,!1)}function J(L){var ee;ua.includes(L.key)&&e.selectable&&(L.key==="Escape"?((ee=D.value)==null||ee.blur(),u([c(e.id)])):n([c(e.id)]))}}}),wf=_f,bf={height:"0",width:"0"},xf={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},n0=ve({...xf,setup(e){const{viewportRef:t}=Me(),n=De(()=>t.value.getElementsByClassName("vue-flow__edge-labels")[0]);return(o,i)=>(U(),oe("svg",null,[(U(),oe("foreignObject",bf,[(U(),Se(as,{to:C(n),disabled:!C(n)},[xe(o.$slots,"default")],8,["to","disabled"]))]))]))}}),Ef={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top},Sf=ve({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{connectionMode:t,connectionStartHandle:n,connectionEndHandle:o,connectionPosition:i,connectionLineType:r,connectionLineStyle:a,connectionLineOptions:s,connectionStatus:l,viewport:u,findNode:c}=Me(),d=(e=At(no))==null?void 0:e["connection-line"];return()=>{var f,g,E,v,h;if(!n.value)return null;const m=c(n.value.nodeId);if(!m)return null;const p=n.value.handleId,b=n.value.type,_=((f=o.value)==null?void 0:f.handleId)&&c(o.value.nodeId)||null,k=(i.value.x-u.value.x)/u.value.zoom,D=(i.value.y-u.value.y)/u.value.zoom,w=m.handleBounds;let V=w==null?void 0:w[b];if(t.value===_t.Loose&&(V=V||(w==null?void 0:w[b==="source"?"target":"source"])),!V)return null;const H=(p?V.find(O=>O.id===p):V[0])??null,A=(H==null?void 0:H.position)||W.Top,{x:B,y:ce}=zo(A,{...m.dimensions,...m.computedPosition},H),q=_&&((g=o.value)==null?void 0:g.handleId)&&((t.value===_t.Strict?(E=_.handleBounds[b==="source"?"target":"source"])==null?void 0:E.find(O=>{var R;return O.id===((R=o.value)==null?void 0:R.handleId)}):(v=[..._.handleBounds.source||[],..._.handleBounds.target||[]])==null?void 0:v.find(O=>{var R;return O.id===((R=o.value)==null?void 0:R.handleId)}))||((h=_.handleBounds[b??"target"])==null?void 0:h[0]))||null,y=A?Ef[A]:null;if(!A||!y)return null;const $=r.value??s.value.type;let N="";const I={sourceX:B,sourceY:ce,sourcePosition:A,targetX:k,targetY:D,targetPosition:y};return $===Et.Bezier?[N]=ka(I):$===Et.Step?[N]=Bo({...I,borderRadius:0}):$===Et.SmoothStep?[N]=Bo(I):$===Et.SimpleBezier?[N]=Ca(I):N=`M${B},${ce} ${k},${D}`,ye("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ye("g",{class:"vue-flow__connection"},d?ye(d,{sourceX:B,sourceY:ce,sourcePosition:A,targetX:k,targetY:D,targetPosition:y,sourceNode:m,sourceHandle:H,targetNode:_,targetHandle:q,markerEnd:`url(#${ft(s.value.markerEnd)})`,markerStart:`url(#${ft(s.value.markerStart)})`,connectionStatus:l.value}):ye("path",{d:N,class:[s.value.class,l,"vue-flow__connection-path"],style:a.value||s.value.style,"marker-end":`url(#${ft(s.value.markerEnd)})`,"marker-start":`url(#${ft(s.value.markerStart)})`})))}}}),Nf=Sf,Mf=["tabIndex"],kf={name:"NodesSelection",compatConfig:{MODE:3}},Cf=ve({...kf,setup(e){const t=Me(),n=me(t,"emits"),o=me(t,"viewport"),i=me(t,"getSelectedNodes"),r=me(t,"noPanClassName"),a=me(t,"disableKeyboardA11y"),s=me(t,"userSelectionActive"),l=Pa(),u=he(null),c=xa({el:u,onStart(v){n.value.selectionDragStart(v)},onDrag(v){n.value.selectionDrag(v)},onStop(v){n.value.selectionDragStop(v)}});Bt(()=>{var v;a.value||(v=u.value)==null||v.focus({preventScroll:!0})});const d=ue(()=>va(i.value)),f=ue(()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`}));function g(v){n.value.selectionContextMenu({event:v,nodes:i.value})}function E(v){a.value||Ct[v.key]&&l({x:Ct[v.key].x,y:Ct[v.key].y},v.shiftKey)}return(v,h)=>!s.value&&d.value.width&&d.value.height?(U(),oe("div",{key:0,class:Qe(["vue-flow__nodesselection vue-flow__container",r.value]),style:ze({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[ge("div",{ref_key:"el",ref:u,class:Qe([{dragging:C(c)},"vue-flow__nodesselection-rect"]),style:ze(f.value),tabIndex:a.value?void 0:-1,onContextmenu:g,onKeydown:E},null,46,Mf)],6)):Ee("",!0)}}),$f={name:"UserSelection",compatConfig:{MODE:3}},Af=ve({...$f,props:{userSelectionRect:{}},setup(e){return(t,n)=>(U(),oe("div",{class:"vue-flow__selection vue-flow__container",style:ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Tf={input:Gd,default:Ld,output:Yd},Pf={default:uf,straight:vf,step:gf,smoothstep:$a,simplebezier:df};function If(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:ei.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:qt.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Et.Bezier,style:{}},connectionMode:_t.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:On()?"Meta":"Control",zoomActivationKeyCode:On()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Rd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function Aa(e){const t=If();return e&&Object.keys(e).forEach(n=>{const o=e[n];we(o)&&(t[n]=o)}),t}function Df(e,t,n,o,i,r,a){const s=Uf(o,i),l=x=>{const M=x??r.value??[];o.hooks.updateNodeInternals.trigger(M)},u=x=>wd(x,o.nodes,o.edges),c=x=>_d(x,o.nodes,o.edges),d=x=>Jn(x,o.edges),f=x=>{if(x)return o.nodes&&!r.value.length?o.nodes.find(M=>M.id===x):o.nodes[r.value.indexOf(x)]},g=x=>{if(x)return o.edges&&!a.value.length?o.edges.find(M=>M.id===x):o.edges[a.value.indexOf(x)]},E=(x,M,G)=>{const S=[];x.forEach(T=>{var X,K;const ie={id:T.id,type:"position",dragging:G,from:T.from};if(M&&(ie.position=T.position,T.parentNode)){const te=f(T.parentNode);ie.position={x:ie.position.x-(((X=te==null?void 0:te.computedPosition)==null?void 0:X.x)??0),y:ie.position.y-(((K=te==null?void 0:te.computedPosition)==null?void 0:K.y)??0)}}S.push(ie)}),S!=null&&S.length&&o.hooks.nodesChange.trigger(S)},v=x=>{var M;if(!o.vueFlowRef)return;const G=o.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!G)return;let S;if((M=o.__experimentalFeatures)!=null&&M.nestedFlow){let X=[G],K=G,ie;for(;!ie&&K;)K=K.parentElement,ie=K==null?void 0:K.classList.contains("vue-flow__transformationpane"),ie&&(X=[K,...X]);X.forEach(te=>{const pe=window.getComputedStyle(te),{m22:$e}=new window.DOMMatrixReadOnly(pe.transform);S?S*=$e:S=$e})}else{const X=window.getComputedStyle(G),{m22:K}=new window.DOMMatrixReadOnly(X.transform);S=K}const T=x.reduce((X,K)=>{const ie=f(K.id);if(ie){const te=Kn(K.nodeElement);!!(te.width&&te.height&&(ie.dimensions.width!==te.width||ie.dimensions.height!==te.height||K.forceUpdate))&&(ie.handleBounds.source=qi(".source",K.nodeElement,S),ie.handleBounds.target=qi(".target",K.nodeElement,S),ie.dimensions=te,ie.initialized=!0,X.push({id:ie.id,type:"dimensions",dimensions:te}))}return X},[]);T.length&&o.hooks.nodesChange.trigger(T)},h=(x,M)=>{const G=x.map(X=>X.id);let S,T=[];if(o.multiSelectionActive)S=G.map(X=>Ke(X,M));else{const X=po([...o.nodes,...o.edges],G);S=X.changedNodes,T=X.changedEdges}S.length&&o.hooks.nodesChange.trigger(S),T.length&&o.hooks.edgesChange.trigger(T)},m=(x,M)=>{const G=x.map(X=>X.id);let S=[],T;if(o.multiSelectionActive)T=G.map(X=>Ke(X,M));else{const X=po([...o.nodes,...o.edges],G);S=X.changedNodes,T=X.changedEdges}S.length&&o.hooks.nodesChange.trigger(S),T.length&&o.hooks.edgesChange.trigger(T)},p=(x,M)=>{const G=x.filter(pt).map(K=>K.id),S=x.filter(lt).map(K=>K.id);let{changedNodes:T,changedEdges:X}=po([...o.nodes,...o.edges],[...G,...S]);o.multiSelectionActive&&(T=G.map(K=>Ke(K,M)),X=S.map(K=>Ke(K,M))),T.length&&o.hooks.nodesChange.trigger(T),X.length&&o.hooks.edgesChange.trigger(X)},b=x=>{h(x,!0)},_=x=>{m(x,!0)},k=x=>{p(x,!0)},D=x=>{if(!x.length)return h(x,!1);const G=x.map(S=>S.id).map(S=>Ke(S,!1));G.length&&o.hooks.nodesChange.trigger(G)},w=x=>{if(!x.length)return m(x,!1);const G=x.map(S=>S.id).map(S=>Ke(S,!1));G.length&&o.hooks.edgesChange.trigger(G)},V=x=>{if(!x||!x.length)return p([],!1);const M=x.reduce((G,S)=>{const T=Ke(S.id,!1);return pt(S)?G.nodes.push(T):G.edges.push(T),G},{nodes:[],edges:[]});M.nodes.length&&o.hooks.nodesChange.trigger(M.nodes),M.edges.length&&o.hooks.edgesChange.trigger(M.edges)},H=x=>{var M;(M=o.d3Zoom)==null||M.scaleExtent([x,o.maxZoom]),o.minZoom=x},A=x=>{var M;(M=o.d3Zoom)==null||M.scaleExtent([o.minZoom,x]),o.maxZoom=x},B=x=>{var M;(M=o.d3Zoom)==null||M.translateExtent(x),o.translateExtent=x},ce=x=>{o.nodeExtent=x,l(r.value)},q=x=>{o.nodesDraggable=x,o.nodesConnectable=x,o.elementsSelectable=x},y=x=>{const M=x instanceof Function?x(o.nodes):x;!o.initialized&&!M.length||(o.nodes=Wi(M,o.nodes,f,o.hooks.error.trigger))},$=x=>{const M=x instanceof Function?x(o.edges):x;if(!o.initialized&&!M.length)return;const G=o.isValidConnection?M.filter(S=>o.isValidConnection(S,{edges:o.edges,nodes:o.nodes,sourceNode:f(S.source),targetNode:f(S.target)})):M;o.edges=G.reduce((S,T)=>{const X=f(T.source),K=f(T.target),ie=!X||typeof X>"u",te=!K||typeof K>"u";if(ie&&te?o.hooks.error.trigger(new Ce(ke.EDGE_SOURCE_TARGET_MISSING,T.id,T.source,T.target)):(ie&&o.hooks.error.trigger(new Ce(ke.EDGE_SOURCE_MISSING,T.id,T.source)),te&&o.hooks.error.trigger(new Ce(ke.EDGE_TARGET_MISSING,T.id,T.target))),ie||te)return S;const pe=g(T.id);return S.push({...da(T,Object.assign({},pe,o.defaultEdgeOptions)),sourceNode:X,targetNode:K}),S},[])},N=x=>{const M=x instanceof Function?x([...o.nodes,...o.edges]):x;!o.initialized&&!M.length||(y(M.filter(pt)),$(M.filter(lt)))},I=x=>{let M=x instanceof Function?x(o.nodes):x;M=Array.isArray(M)?M:[M];const S=Wi(M,o.nodes,f,o.hooks.error.trigger).map(Hi);S.length&&o.hooks.nodesChange.trigger(S)},O=x=>{let M=x instanceof Function?x(o.edges):x;M=Array.isArray(M)?M:[M];const S=(o.isValidConnection?M.filter(T=>o.isValidConnection(T,{edges:o.edges,nodes:o.nodes,sourceNode:f(T.source),targetNode:f(T.target)})):M).reduce((T,X)=>{const K=Od({...X,...o.defaultEdgeOptions},o.edges,o.hooks.error.trigger);if(K){const ie=f(K.source),te=f(K.target);T.push(Hi({...K,sourceNode:ie,targetNode:te}))}return T},[]);S.length&&o.hooks.edgesChange.trigger(S)},R=(x,M=!0,G=!1)=>{let S=x instanceof Function?x(o.nodes):x;S=Array.isArray(S)?S:[S];const T=[],X=[];function K(te){const pe=d(te).filter($e=>we($e.deletable)?$e.deletable:!0);X.push(...pe.map($e=>Li($e.id,$e.source,$e.target)))}function ie(te){const pe=o.nodes.filter($e=>$e.parentNode===te);if(pe.length){const $e=pe.map(ut=>ut.id);T.push(...$e.map(ut=>Fi(ut))),M&&K(pe),pe.forEach(ut=>{ie(ut.id)})}}S.forEach(te=>{const pe=typeof te=="string"?f(te):te;pe&&(we(pe.deletable)&&!pe.deletable||(T.push(Fi(pe.id)),M&&K([pe]),G&&ie(pe.id)))}),X.length&&o.hooks.edgesChange.trigger(X),T.length&&o.hooks.nodesChange.trigger(T)},P=x=>{let M=x instanceof Function?x(o.edges):x;M=Array.isArray(M)?M:[M];const G=[];M.forEach(S=>{const T=typeof S=="string"?g(S):S;T&&(we(T.deletable)&&!T.deletable||G.push(Li(typeof S=="string"?S:S.id,T.source,T.target)))}),o.hooks.edgesChange.trigger(G)},Y=(x,M,G=!0)=>Bd(x,M,o.edges,g,G,o.hooks.error.trigger),Q=x=>Vi(x,o.nodes),J=x=>Vi(x,o.edges),L=(x,M,G,S=!1)=>{S?o.connectionClickStartHandle=x:o.connectionStartHandle=x,o.connectionEndHandle=null,o.connectionStatus=null,M&&(o.connectionPosition=M)},ee=(x,M=null,G=null)=>{o.connectionStartHandle&&(o.connectionPosition=x,o.connectionEndHandle=M,o.connectionStatus=G)},z=(x,M)=>{o.connectionPosition={x:NaN,y:NaN},o.connectionEndHandle=null,o.connectionStatus=null,M?o.connectionClickStartHandle=null:o.connectionStartHandle=null},ae=x=>{const M=md(x),G=M?null:dt(x)?x:f(x.id);return!M&&!G?[null,null,M]:[M?x:zi(G),G,M]},re=(x,M=!0,G=o.nodes)=>{const[S,T,X]=ae(x);return S?(G||o.nodes).filter(K=>{if(!X&&(K.id===T.id||!K.computedPosition))return!1;const ie=zi(K),te=Io(ie,S);return M&&te>0||te>=Number(S.width)*Number(S.height)}):[]},ne=(x,M,G=!0)=>{const[S]=ae(x);if(!S)return!1;const T=Io(S,M);return G&&T>0||T>=Number(S.width)*Number(S.height)},se=x=>{const{viewport:M,dimensions:G,d3Zoom:S,d3Selection:T,translateExtent:X}=o;if(!S||!T||!x.x&&!x.y)return!1;const K=Dt.translate(M.x+x.x,M.y+x.y).scale(M.zoom),ie=[[0,0],[G.width,G.height]],te=S.constrain()(K,ie,X),pe=o.viewport.x!==te.x||o.viewport.y!==te.y||o.viewport.zoom!==te.k;return S.transform(T,te),pe},Z=x=>{const M=x instanceof Function?x(o):x,G=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"],S=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];we(M.defaultEdgeOptions)&&(o.defaultEdgeOptions=M.defaultEdgeOptions);const T=M.modelValue||M.nodes||M.edges?[]:void 0;T&&(M.modelValue&&T.push(...M.modelValue),M.nodes&&T.push(...M.nodes),M.edges&&T.push(...M.edges),N(T));const X=()=>{we(M.maxZoom)&&A(M.maxZoom),we(M.minZoom)&&H(M.minZoom),we(M.translateExtent)&&B(M.translateExtent),we(M.nodeExtent)&&ce(M.nodeExtent)};Object.keys(M).forEach(K=>{const ie=K,te=M[ie];![...G,...S].includes(ie)&&we(te)&&(o[ie]=te)}),at(()=>o.d3Zoom).not.toBeNull().then(X),o.initialized||(o.initialized=!0)},be={updateNodePositions:E,updateNodeDimensions:v,setElements:N,setNodes:y,setEdges:$,addNodes:I,addEdges:O,removeNodes:R,removeEdges:P,findNode:f,findEdge:g,updateEdge:Y,applyEdgeChanges:J,applyNodeChanges:Q,addSelectedElements:k,addSelectedNodes:b,addSelectedEdges:_,setMinZoom:H,setMaxZoom:A,setTranslateExtent:B,setNodeExtent:ce,removeSelectedElements:V,removeSelectedNodes:D,removeSelectedEdges:w,startConnection:L,updateConnection:ee,endConnection:z,setInteractive:q,setState:Z,getIntersectingNodes:re,getIncomers:u,getOutgoers:c,getConnectedEdges:d,isNodeIntersecting:ne,panBy:se,fitView:x=>s.value.fitView(x),zoomIn:x=>s.value.zoomIn(x),zoomOut:x=>s.value.zoomOut(x),zoomTo:(x,M)=>s.value.zoomTo(x,M),setViewport:(x,M)=>s.value.setViewport(x,M),setTransform:(x,M)=>s.value.setTransform(x,M),getViewport:()=>s.value.getViewport(),getTransform:()=>s.value.getTransform(),setCenter:(x,M,G)=>s.value.setCenter(x,M,G),fitBounds:(x,M)=>s.value.fitBounds(x,M),project:x=>s.value.project(x),toObject:()=>JSON.parse(JSON.stringify({nodes:o.nodes.map(x=>{const{computedPosition:M,handleBounds:G,selected:S,dimensions:T,isParent:X,resizing:K,dragging:ie,initialized:te,...pe}=x;return pe}),edges:o.edges.map(x=>{const{selected:M,sourceNode:G,targetNode:S,...T}=x;return T}),position:[o.viewport.x,o.viewport.y],zoom:o.viewport.zoom,viewport:o.viewport})),fromObject:x=>{const{nodes:M,edges:G,position:S,zoom:T,viewport:X}=x;if(M&&y(M),G&&$(G),X!=null&&X.x&&(X!=null&&X.y)||S){const K=(X==null?void 0:X.x)||S[0],ie=(X==null?void 0:X.y)||S[1],te=(X==null?void 0:X.zoom)||T||o.viewport.zoom;at(()=>s.value.initialized).toBe(!0).then(()=>{s.value.setViewport({x:K,y:ie,zoom:te})})}},updateNodeInternals:l,$reset:()=>{const x=Aa();if(o.edges=[],o.nodes=[],o.d3Zoom&&o.d3Selection){const M=Dt.translate(x.defaultViewport.x??0,x.defaultViewport.y??0).scale(wt(x.defaultViewport.zoom??1,x.minZoom,x.maxZoom)),G=o.viewportRef.getBoundingClientRect(),S=[[0,0],[G.width,G.height]],T=o.d3Zoom.constrain()(M,S,x.translateExtent);o.d3Zoom.transform(o.d3Selection,T)}Z(x)},$destroy:()=>{}};return at(()=>s.value.initialized).toBe(!0,{flush:"pre"}).then(()=>{o.fitViewOnInit&&s.value.fitView(),o.hooks.paneReady.trigger({id:e,emits:t,vueFlowVersion:"1.26.0",...n,...o,...i,...be})}),be}function zf(e,t,n){const o=ue(()=>h=>e.nodes&&!t.value.length?e.nodes.find(m=>m.id===h):e.nodes[t.value.indexOf(h)]),i=ue(()=>h=>e.edges&&!n.value.length?e.edges.find(m=>m.id===h):e.edges[n.value.indexOf(h)]),r=ue(()=>{var h;const m={...Pf,...e.edgeTypes},p=Object.keys(m);return(h=e.edges)==null||h.forEach(b=>b.type&&!p.includes(b.type)&&(m[b.type]=b.type)),m}),a=ue(()=>{var h;const m={...Tf,...e.nodeTypes},p=Object.keys(m);return(h=e.nodes)==null||h.forEach(b=>b.type&&!p.includes(b.type)&&(m[b.type]=b.type)),m}),s=ue(()=>{const h=e.nodes.filter(m=>!m.hidden);return e.onlyRenderVisibleElements?h&&ma(h,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):h??[]}),l=(h,m,p)=>{if(m=m??o.value(h.source),p=p??o.value(h.target),!m||!p){e.hooks.error.trigger(new Ce(ke.EDGE_ORPHANED,h.id));return}return!h.hidden&&!p.hidden&&!m.hidden},u=ue(()=>e.onlyRenderVisibleElements?e.edges.filter(h=>{const m=o.value(h.source),p=o.value(h.target);return l(h,m,p)&&Ad({sourcePos:m.computedPosition||{x:0,y:0},targetPos:p.computedPosition||{x:0,y:0},sourceWidth:m.dimensions.width,sourceHeight:m.dimensions.height,targetWidth:p.dimensions.width,targetHeight:p.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(h=>l(h))),c=ue(()=>[...s.value,...u.value]),d=ue(()=>e.nodes.filter(h=>h.selected)),f=ue(()=>e.edges.filter(h=>h.selected)),g=ue(()=>[...d.value??[],...f.value??[]]),E=ue(()=>s.value.filter(h=>h.initialized&&h.handleBounds!==void 0)),v=ue(()=>s.value.length>0&&E.value.length===s.value.length);return{getNode:o,getEdge:i,getElements:c,getEdgeTypes:r,getNodeTypes:a,getEdges:u,getNodes:s,getSelectedElements:g,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:E,areNodesInitialized:v}}class St{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return St.instance||(St.instance=new St),St.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Aa(n),i=kr(o),r={};Object.entries(i.hooks).forEach(([f,g])=>{const E=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;r[E]=g.on});const a={};Object.entries(i.hooks).forEach(([f,g])=>{a[f]=g.trigger});const s=ue(()=>i.nodes.map(f=>f.id)),l=ue(()=>i.edges.map(f=>f.id)),u=zf(i,s,l),c=Df(t,a,r,i,u,s,l);c.setState(i);const d={...r,...u,...c,...Ts(i),emits:a,id:t,vueFlowVersion:"1.26.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Me(e){const t=St.getInstance(),n=Er(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let r;if(n){const a=At(Ki,null);typeof a<"u"&&a!==null&&(r=a)}if(r||i&&(r=t.get(i)),!r||r&&o&&o!==r.id){const a=o??t.getId(),s=t.create(a,e);r=s,Sr().run(()=>{_e(s.applyDefault,(l,u,c)=>{const d=g=>{s.applyNodeChanges(g)},f=g=>{s.applyEdgeChanges(g)};l?(s.onNodesChange(d),s.onEdgesChange(f)):(s.hooks.value.nodesChange.off(d),s.hooks.value.edgesChange.off(f)),c(()=>{s.hooks.value.nodesChange.off(d),s.hooks.value.edgesChange.off(f)})},{immediate:!0}),an(()=>{if(r){const l=t.get(r.id);l?l.$destroy():Qn(`No store instance found for id ${r.id} in storage.`)}})})}else e&&r.setState(e);return n&&(Tt(Ki,r),n.vueFlowId=r.id),r}function Of(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function Bf(e,t){const n=Of();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Rf(){const{viewport:e,snapGrid:t,snapToGrid:n}=Me();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,r=o.touches?o.touches[0].clientY:o.clientY,a={x:(i-e.value.x)/e.value.zoom,y:(r-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function mn(){return!0}function Ta({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:a}){const{vueFlowRef:s,connectionMode:l,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:g,findNode:E,panBy:v,getNodes:h,startConnection:m,updateConnection:p,endConnection:b,emits:_,viewport:k,edges:D,nodes:w,isValidConnection:V}=Me();let H=null,A=!1,B=null;function ce(y){var $;const N=le(n)==="target",I=ni(y),O=Oi(y.target);if(I&&y.button===0||!I){let R=function(be){Z=vt(be,ne);const{handle:x,validHandleResult:M}=Pd(be,O,Do(Z,k.value,!1,[1,1]),u.value,de,G=>Zi(be,G,l.value,le(t),le(e),N?"target":"source",Q,O,D.value,w.value,E));if(J=x,j||(fe(),j=!0),H=M.connection,A=M.isValid,B=M.handleDomNode,p(J&&A?ga({x:J.x,y:J.y},k.value):Z,M.endHandle,Dd(!!J,A)),!J&&!A&&!B)return mo(se);H&&H.source!==H.target&&B&&(mo(se),se=B,B.classList.add("connecting","vue-flow__handle-connecting"),B.classList.toggle("valid",A),B.classList.toggle("vue-flow__handle-valid",A))},P=function(be){(J||B)&&H&&A&&(r?r(be,H):_.connect(H)),_.connectEnd(be),i&&(a==null||a(be)),mo(se),cancelAnimationFrame(L),b(be),j=!1,A=!1,H=null,B=null,O.removeEventListener("mousemove",R),O.removeEventListener("mouseup",P),O.removeEventListener("touchmove",R),O.removeEventListener("touchend",P)};const Y=E(le(t));let Q=le(o)||V.value||mn;!Q&&Y&&(Q=(N?Y.isValidSourcePos:Y.isValidTargetPos)||mn);let J,L=0;const{x:ee,y:z}=vt(y),ae=O==null?void 0:O.elementFromPoint(ee,z),re=oi(le(i),ae),ne=($=s.value)==null?void 0:$.getBoundingClientRect();if(!ne||!re)return;let se,Z=vt(y,ne),j=!1;const de=Id({nodes:h.value,nodeId:le(t),handleId:le(e),handleType:re}),fe=()=>{if(!g)return;const[be,x]=_a(Z,ne);v({x:be,y:x}),L=requestAnimationFrame(fe)};m({nodeId:le(t),handleId:le(e),type:re},{x:ee-ne.left,y:z-ne.top},y),_.connectStart({event:y,nodeId:le(t),handleId:le(e),handleType:re}),O.addEventListener("mousemove",R),O.addEventListener("mouseup",P),O.addEventListener("touchmove",R),O.addEventListener("touchend",P)}}function q(y){if(!c.value)return;const $=le(n)==="target";if(!d.value)_.clickConnectStart({event:y,nodeId:le(t),handleId:le(e)}),m({nodeId:le(t),type:le(n),handleId:le(e)},void 0,y,!0);else{let N=le(o)||V.value||mn;const I=E(le(t));if(!N&&I&&(N=($?I.isValidSourcePos:I.isValidTargetPos)||mn),I&&(typeof I.connectable>"u"?f.value:I.connectable)===!1)return;const O=Oi(y.target),{connection:R,isValid:P}=Zi(y,{nodeId:le(t),id:le(e),type:le(n)},l.value,d.value.nodeId,d.value.handleId||null,d.value.type,N,O,D.value,w.value,E),Y=R.source===R.target;P&&!Y&&_.connect(R),_.clickConnectEnd(y),b(y,!0)}}return{handlePointerDown:ce,handleClick:q}}function ri(){return typeof window<"u"?window:{chrome:!1,addEventListener(...e){}}}function Ro(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof o.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,r=typeof o.closest=="function"?o.closest(".nokey"):null;return o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement||i||!!r}function Vf(e){return e.ctrlKey||e.metaKey||e.shiftKey}function nr(e,t,n,o){const i=t.split("+").map(r=>r.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((r,a)=>n.has(r)&&Array.from(n.values())[a]===i[a]))}function Hf(e,t){return n=>{const o=Ff(n.code,e);return Array.isArray(e)?e.some(i=>nr(n[o],i,t,n.type==="keyup")):nr(n[o],e,t,n.type==="keyup")}}function Ff(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Wt(e,t){const n=ri(),o=he(le(e)===!0);let i=!1;const r=new Set;let a=l(le(e));return _e(o,(u,c)=>{u!==c&&(t==null||t(u))}),_e(()=>le(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&s(),a=l(u)},{immediate:!0}),Zo(n,"blur",()=>{le(e)!==!0&&(o.value=!1)}),vi((...u)=>a(...u),u=>{i=Vf(u),!(!i&&Ro(u))&&(u.preventDefault(),o.value=!0)},{eventName:"keydown"}),vi((...u)=>a(...u),u=>{if(o.value){if(!i&&Ro(u))return;s()}},{eventName:"keyup"}),o;function s(){i=!1,r.clear(),o.value=!1}function l(u){return u===null?(s(),()=>!1):typeof u=="boolean"?u?(o.value=u,()=>!0):(s(),()=>!1):Array.isArray(u)||typeof u=="string"?Hf(u,r):u}}function Lf(e){const t=e??At(Ea,""),n=At(Sa,he(null)),{findNode:o,edges:i,emits:r}=Me(),a=o(t);return a||r.error(new Ce(ke.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ue(()=>o(a.parentNode)),connectedEdges:ue(()=>Jn([a],i.value))}}function Gf(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Yf(e,t){const n=Gf();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Pa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:s}=Me();return(l,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=u?4:1,g=l.x*c*f,E=l.y*d*f,v=e.value.filter(h=>h.draggable||a&&typeof h.draggable>"u").map(h=>{const m={x:h.computedPosition.x+g,y:h.computedPosition.y+E},{computedPosition:p}=ti(h,m,s.error,t.value,h.parentNode?o(h.parentNode):void 0);return{id:h.id,position:p,from:h.position,distance:{x:l.x,y:l.y},dimensions:h.dimensions}});n(v,!0,!1)}}const yo=.1;function tt(){return Qn("Viewport not initialized yet."),Promise.resolve(!1)}const Xf={zoomIn:tt,zoomOut:tt,zoomTo:tt,fitView:tt,setCenter:tt,fitBounds:tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:tt,setTransform:tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1};function Uf(e,t){const n=e,o=me(n,"vueFlowRef"),i=me(n,"nodes"),r=me(n,"d3Zoom"),a=me(n,"d3Selection"),s=me(n,"dimensions"),l=me(n,"translateExtent"),u=me(n,"minZoom"),c=me(n,"maxZoom"),d=me(n,"viewport"),f=me(n,"snapToGrid"),g=me(n,"snapGrid"),{getNodes:E}=t,v=he(!1);at(()=>!!r.value&&!!a.value&&!!s.value.width&&!!s.value.height).toBe(!0).then(()=>{v.value=!0});function h(p,b){return new Promise(_=>{a.value&&r.value?r.value.scaleBy(_o(a.value,b,()=>{_(!0)}),p):_(!1)})}function m(p,b,_,k){return new Promise(D=>{const{x:w,y:V}=ca({x:-p,y:-b},l.value),H=Dt.translate(-w,-V).scale(_);a.value&&r.value?r.value.transform(_o(a.value,k,()=>{D(!0)}),H):D(!1)})}return ue(()=>v.value?{initialized:!0,zoomIn:p=>h(1.2,p==null?void 0:p.duration),zoomOut:p=>h(1/1.2,p==null?void 0:p.duration),zoomTo:(p,b)=>new Promise(_=>{a.value&&r.value?r.value.scaleTo(_o(a.value,b==null?void 0:b.duration,()=>{_(!0)}),p):_(!1)}),setViewport:(p,b)=>m(p.x,p.y,p.zoom,b==null?void 0:b.duration),setTransform:(p,b)=>m(p.x,p.y,p.zoom,b==null?void 0:b.duration),getViewport:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(p={padding:yo,includeHiddenNodes:!1,duration:0})=>{const b=(p.includeHiddenNodes?i.value:E.value).filter(V=>{var H;const A=V.initialized&&V.dimensions.width&&V.dimensions.height;let B=!0;return(H=p.nodes)!=null&&H.length&&(B=p.nodes.includes(V.id)),A&&B});if(!b.length)return Promise.resolve(!1);const _=va(b),{x:k,y:D,zoom:w}=Bi(_,s.value.width,s.value.height,p.minZoom??u.value,p.maxZoom??c.value,p.padding??yo,p.offset);return m(k,D,w,p==null?void 0:p.duration)},setCenter:(p,b,_)=>{const k=typeof(_==null?void 0:_.zoom)<"u"?_.zoom:c.value,D=s.value.width/2-p*k,w=s.value.height/2-b*k;return m(D,w,k,_==null?void 0:_.duration)},fitBounds:(p,b={padding:yo})=>{const{x:_,y:k,zoom:D}=Bi(p,s.value.width,s.value.height,u.value,c.value,b.padding);return m(_,k,D,b==null?void 0:b.duration)},project:p=>Do(p,d.value,f.value,g.value),screenToFlowCoordinate:p=>{if(o.value){const{x:b,y:_}=o.value.getBoundingClientRect(),k={x:p.x-b,y:p.y-_};return Do(k,d.value,f.value,g.value)}return{x:0,y:0}},flowToScreenCoordinate:p=>{if(o.value){const{x:b,y:_}=o.value.getBoundingClientRect(),k={x:p.x+b,y:p.y+_};return ga(k,d.value)}return{x:0,y:0}}}:Xf)}function _o(e,t=0,n){return e.transition().duration(t).on("end",n)}function Zf(e,t,n){const o=Sr(!0);return o.run(()=>{const i=()=>{o.run(()=>{let v,h,m=!!(n.nodes.value.length||n.edges.value.length);v=xt([e.modelValue,()=>{var p,b;return(b=(p=e.modelValue)==null?void 0:p.value)==null?void 0:b.length}],([p])=>{p&&Array.isArray(p)&&(h==null||h.pause(),n.setElements(p),!h&&!m&&p.length?m=!0:h==null||h.resume())}),h=xt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([p,b])=>{var _;(_=e.modelValue)!=null&&_.value&&Array.isArray(e.modelValue.value)&&(v==null||v.pause(),e.modelValue.value=[...p,...b],rt(()=>{v==null||v.resume()}))},{immediate:m}),xn(()=>{v==null||v.stop(),h==null||h.stop()})})},r=()=>{o.run(()=>{let v,h,m=!!n.nodes.value.length;v=xt([e.nodes,()=>{var p,b;return(b=(p=e.nodes)==null?void 0:p.value)==null?void 0:b.length}],([p])=>{p&&Array.isArray(p)&&(h==null||h.pause(),n.setNodes(p),!h&&!m&&p.length?m=!0:h==null||h.resume())}),h=xt([n.nodes,()=>n.nodes.value.length],([p])=>{var b;(b=e.nodes)!=null&&b.value&&Array.isArray(e.nodes.value)&&(v==null||v.pause(),e.nodes.value=[...p],rt(()=>{v==null||v.resume()}))},{immediate:m}),xn(()=>{v==null||v.stop(),h==null||h.stop()})})},a=()=>{o.run(()=>{let v,h,m=!!n.edges.value.length;v=xt([e.edges,()=>{var p,b;return(b=(p=e.edges)==null?void 0:p.value)==null?void 0:b.length}],([p])=>{p&&Array.isArray(p)&&(h==null||h.pause(),n.setEdges(p),!h&&!m&&p.length?m=!0:h==null||h.resume())}),h=xt([n.edges,()=>n.edges.value.length],([p])=>{var b;(b=e.edges)!=null&&b.value&&Array.isArray(e.edges.value)&&(v==null||v.pause(),e.edges.value=[...p],rt(()=>{v==null||v.resume()}))},{immediate:m}),xn(()=>{v==null||v.stop(),h==null||h.stop()})})},s=()=>{o.run(()=>{_e(()=>t.maxZoom,()=>{t.maxZoom&&we(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{_e(()=>t.minZoom,()=>{t.minZoom&&we(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{_e(()=>t.translateExtent,()=>{t.translateExtent&&we(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{_e(()=>t.nodeExtent,()=>{t.nodeExtent&&we(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{_e(()=>t.applyDefault,()=>{we(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const v=async h=>{let m=h;typeof t.autoConnect=="function"&&(m=await t.autoConnect(h)),m!==!1&&n.addEdges([m])};_e(()=>t.autoConnect,()=>{we(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),_e(n.autoConnect,(h,m,p)=>{h?n.onConnect(v):n.hooks.value.connect.off(v),p(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},g=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(h=>{const m=h;if(!v.includes(m)){const p=De(()=>t[m]),b=n[m];Yn(b)&&o.run(()=>{_e(p,_=>{we(_)&&(b.value=_)},{immediate:!0,flush:"pre"})})}})};(()=>{i(),r(),a(),l(),s(),u(),c(),d(),f(),g()})()}),()=>o.stop()}function or(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const qf={name:"Pane",compatConfig:{MODE:3}},Wf=ve({...qf,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:r,emits:a,userSelectionActive:s,removeSelectedElements:l,panOnDrag:u,userSelectionRect:c,elementsSelectable:d,nodesSelectionActive:f,addSelectedElements:g,getSelectedEdges:E,getSelectedNodes:v,removeNodes:h,removeEdges:m,selectionMode:p,deleteKeyCode:b,multiSelectionKeyCode:_,multiSelectionActive:k}=Me(),D=he(null),w=he(0),V=he(0),H=he(),A=De(()=>d.value&&(e.isSelecting||s.value));Wt(b,P=>{if(!P)return;const Y=o.value.reduce((Q,J)=>((!J.selected&&J.parentNode&&Q.find(L=>L.id===J.parentNode)||J.selected)&&Q.push(J),Q),[]);(Y||E.value)&&(E.value.length>0&&m(E.value),Y.length>0&&h(Y),f.value=!1,l())}),Wt(_,P=>{k.value=P});function B(){s.value=!1,c.value=null,w.value=0,V.value=0}function ce(P){P.target!==D.value||A.value||(a.paneClick(P),l(),f.value=!1)}function q(P){var Y;if(P.target===D.value){if(Array.isArray(u.value)&&((Y=u.value)!=null&&Y.includes(2))){P.preventDefault();return}a.paneContextMenu(P)}}function y(P){P.target===D.value&&a.paneScroll(P)}function $(P){if(H.value=n.value.getBoundingClientRect(),!A.value||!d||!e.isSelecting||P.button!==0||P.target!==D.value||!H.value)return;const{x:Y,y:Q}=or(P,H.value);l(),c.value={width:0,height:0,startX:Y,startY:Q,x:Y,y:Q},s.value=!0,a.selectionStart(P)}function N(P){if(!A.value)return a.paneMouseMove(P);if(!e.isSelecting||!H.value||!c.value)return;s.value||(s.value=!0),f.value&&(f.value=!1);const Y=or(P,H.value),Q=c.value.startX??0,J=c.value.startY??0,L={...c.value,x:Y.x<Q?Y.x:Q,y:Y.y<J?Y.y:J,width:Math.abs(Y.x-Q),height:Math.abs(Y.y-J)},ee=ma(o.value,c.value,r.value,p.value===ei.Partial),z=Jn(ee,i.value);w.value=ee.length,V.value=z.length,c.value=L,g([...ee,...z])}function I(P){A.value&&P.button===0&&(!s.value&&c.value&&P.target===D.value&&ce(P),f.value=w.value>0,B(),a.selectionEnd(P))}function O(P){var Y;if(!A.value)return a.paneMouseLeave(P);s.value&&(f.value=w.value>0,(Y=a.selectionEnd)==null||Y.call(a,P)),B()}function R(P){A.value||a.paneMouseEnter(P)}return(P,Y)=>(U(),oe("div",{ref_key:"container",ref:D,key:`pane-${C(t)}`,class:Qe(["vue-flow__pane vue-flow__container",{selection:P.isSelecting}]),onClick:ce,onContextmenu:q,onWheelPassive:y,onMouseenter:R,onMousedown:$,onMousemove:N,onMouseup:I,onMouseleave:O},[xe(P.$slots,"default"),C(s)&&C(c)?(U(),Se(Af,{key:0,"user-selection-rect":C(c)},null,8,["user-selection-rect"])):Ee("",!0),C(f)&&C(v).length?(U(),Se(Cf,{key:1})):Ee("",!0)],34))}}),Kf={class:"vue-flow__nodes vue-flow__container"},Jf={name:"Nodes",compatConfig:{MODE:3}},Qf=ve({...Jf,setup(e){const t=At(no),{nodesDraggable:n,nodesFocusable:o,elementsSelectable:i,nodesConnectable:r,getNodes:a,getNodesInitialized:s,areNodesInitialized:l,getNodeTypes:u,updateNodeDimensions:c,emits:d}=Me(),f=he(),g=Xn();at(()=>l.value).toBe(!0).then(()=>{rt(()=>{d.nodesInitialized(s.value)})}),Bt(()=>{f.value=new ResizeObserver(b=>{const _=b.map(k=>({id:k.target.getAttribute("data-id"),nodeElement:k.target,forceUpdate:!0}));rt(()=>c(_))})}),$r(()=>{var b;return(b=f.value)==null?void 0:b.disconnect()});function E(b){return typeof b>"u"?n.value:b}function v(b){return typeof b>"u"?i.value:b}function h(b){return typeof b>"u"?r.value:b}function m(b){return typeof b>"u"?o.value:b}function p(b,_){const k=b||"default",D=t==null?void 0:t[`node-${k}`];if(D)return D;let w=_??u.value[k];if(typeof w=="string"&&g){const V=Object.keys(g.appContext.components);V&&V.includes(k)&&(w=Ar(k,!1))}return w&&typeof w!="string"?w:(d.error(new Ce(ke.NODE_TYPE_MISSING,w)),!1)}return(b,_)=>(U(),oe("div",Kf,[f.value?(U(!0),oe(st,{key:0},Xo(C(a),k=>(U(),Se(C(qd),{id:k.id,key:k.id,"resize-observer":f.value,type:p(k.type,k.template),name:k.type||"default",draggable:E(k.draggable),selectable:v(k.selectable),connectable:h(k.connectable),focusable:m(k.focusable),node:k},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):Ee("",!0)]))}}),jf=["id","markerWidth","markerHeight","markerUnits","orient"],eh={name:"MarkerType",compatConfig:{MODE:3}},th=ve({...eh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(U(),oe("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===C(Po).ArrowClosed?(U(),oe("polyline",{key:0,style:ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Ee("",!0),t.type===C(Po).Arrow?(U(),oe("polyline",{key:1,style:ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Ee("",!0)],8,jf))}}),nh={name:"MarkerDefinitions",compatConfig:{MODE:3}},oh=ve({...nh,setup(e){const t=Me(),n=me(t,"id"),o=me(t,"edges"),i=me(t,"connectionLineOptions"),r=me(t,"defaultMarkerColor"),a=ue(()=>{const s=[],l=[],u=c=>{if(c){const d=ft(c,n.value);s.includes(d)||(typeof c=="object"?l.push({...c,id:d,color:c.color||r.value}):l.push({id:d,color:r.value,type:c}),s.push(d))}};return[i.value.markerEnd,i.value.markerStart].forEach(u),o.value.reduce((c,d)=>([d.markerStart,d.markerEnd].forEach(u),c.sort((f,g)=>f.id.localeCompare(g.id))),l),l});return(s,l)=>(U(),oe("defs",null,[(U(!0),oe(st,null,Xo(a.value,u=>(U(),Se(th,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),ih={class:"vue-flow__edges vue-flow__container"},rh={name:"Edges",compatConfig:{MODE:3}},ah=ve({...rh,setup(e){const t=At(no),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:i,findNode:r,getEdges:a,getEdgeTypes:s,elevateEdgesOnSelect:l,dimensions:u,emits:c}=Me(),d=Xn();function f(h){return typeof h>"u"?i.value:h}function g(h){return typeof h>"u"?n.value:h}function E(h){return typeof h>"u"?o.value:h}function v(h,m){const p=h||"default",b=t==null?void 0:t[`edge-${p}`];if(b)return b;let _=m??s.value[p];if(typeof _=="string"&&d){const k=Object.keys(d.appContext.components);k&&k.includes(p)&&(_=Ar(p,!1))}return _&&typeof _!="string"?_:(c.error(new Ce(ke.EDGE_TYPE_MISSING,_)),!1)}return(h,m)=>C(u).width&&C(u).height?(U(),oe(st,{key:0},[(U(),oe("svg",ih,[Ne(oh)])),(U(!0),oe(st,null,Xo(C(a),p=>(U(),oe("svg",{key:p.id,class:"vue-flow__edges vue-flow__container",style:ze({zIndex:C(Td)(p,C(r),C(l))})},[Ne(C(wf),{id:p.id,edge:p,type:v(p.type,p.template),name:p.type||"default",selectable:f(p.selectable),updatable:g(p.updatable),focusable:E(p.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),Ne(C(Nf))],64)):Ee("",!0)}}),sh=ge("div",{class:"vue-flow__edge-labels"},null,-1),lh={name:"Transform",compatConfig:{MODE:3}},uh=ve({...lh,setup(e){const{id:t,viewport:n,d3Zoom:o,d3Selection:i,dimensions:r}=Me(),a=he(!Tr);return at(()=>!!(o.value&&i.value&&r.value.width>0&&r.value.height>0)).toBe(!0).then(()=>{setTimeout(()=>{a.value=!0},1)}),(s,l)=>(U(),oe("div",{key:`transform-${C(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:ze({transform:`translate(${C(n).x}px,${C(n).y}px) scale(${C(n).zoom})`,opacity:a.value?void 0:0})},[Ne(ah),sh,Ne(Qf),xe(s.$slots,"default")],4))}}),ch={name:"Viewport",compatConfig:{MODE:3}},dh=ve({...ch,setup(e){const t=ri(),{id:n,minZoom:o,maxZoom:i,defaultViewport:r,translateExtent:a,dimensions:s,zoomActivationKeyCode:l,selectionKeyCode:u,panActivationKeyCode:c,panOnScroll:d,panOnScrollMode:f,panOnScrollSpeed:g,panOnDrag:E,zoomOnDoubleClick:v,zoomOnPinch:h,zoomOnScroll:m,preventScrolling:p,noWheelClassName:b,noPanClassName:_,emits:k,connectionStartHandle:D,userSelectionActive:w,paneDragging:V,d3Zoom:H,d3Selection:A,d3ZoomHandler:B,viewport:ce,viewportRef:q}=Me(),y=he(!1),$=he(!1);let N=null,I=!1,O=0,R={x:0,y:0,zoom:0};const P=Wt(c),Y=Wt(u),Q=Wt(l),J=De(()=>!Y.value&&(P.value||E.value)),L=De(()=>Y.value||u.value===!0&&J.value!==!0);Os(q,ne),Zo(t,"resize",ne),Bt(()=>{if(!q.value){Qn("Viewport element is missing");return}const Z=q.value,j=Z.getBoundingClientRect(),de=gd().scaleExtent([o.value,i.value]).translateExtent(a.value),fe=Oe(Z).call(de),be=fe.on("wheel.zoom"),x=Dt.translate(r.value.x??0,r.value.y??0).scale(wt(r.value.zoom??1,o.value,i.value)),M=[[0,0],[j.width,j.height]],G=de.constrain()(x,M,a.value);de.transform(fe,G),de.wheelDelta(z),H.value=de,A.value=fe,B.value=be,ce.value={x:G.x,y:G.y,zoom:G.k},de.on("start",S=>{var T;if(!S.sourceEvent)return null;O=S.sourceEvent.button,y.value=!0;const X=re(S.transform);((T=S.sourceEvent)==null?void 0:T.type)==="mousedown"&&(V.value=!0),R=X,k.viewportChangeStart(X),k.moveStart({event:S,flowTransform:X})}),de.on("end",S=>{if(!S.sourceEvent)return null;if(y.value=!1,V.value=!1,ee(J.value,O??0)&&!I&&k.paneContextMenu(S.sourceEvent),I=!1,ae(R,S.transform)){const T=re(S.transform);R=T,k.viewportChangeEnd(T),k.moveEnd({event:S,flowTransform:T})}}),de.filter(S=>{var T,X;const K=Q.value||m.value,ie=h.value&&S.ctrlKey;if((J.value===!0||Array.isArray(J.value)&&J.value.includes(1))&&S.button===1&&S.type==="mousedown"&&((T=S.target)!=null&&T.closest(".vue-flow__node")||(X=S.target)!=null&&X.closest(".vue-flow__edge")))return!0;if(!J.value&&!K&&!d.value&&!v.value&&!h.value||w.value||!v.value&&S.type==="dblclick"||se(S,b.value)&&S.type==="wheel"||se(S,_.value)&&(S.type!=="wheel"||d.value&&S.type==="wheel"&&!Q.value)||!h.value&&S.ctrlKey&&S.type==="wheel"||!K&&!d.value&&!ie&&S.type==="wheel"||!J.value&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(J.value)&&!J.value.includes(S.button)&&(S.type==="mousedown"||S.type==="touchstart"))return!1;const te=Array.isArray(J.value)&&J.value.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&te}),fi(()=>{Y.value&&w.value&&!y.value?de.on("zoom",null):!Y.value&&!w.value&&de.on("zoom",S=>{ce.value={x:S.transform.x,y:S.transform.y,zoom:S.transform.k};const T=re(S.transform);I=ee(J.value,O??0),k.viewportChange(T),k.move({event:S,flowTransform:T})})}),fi(()=>{P.value||d.value&&!Q.value&&!w.value?fe.on("wheel.zoom",S=>{if(se(S,b.value))return!1;S.preventDefault(),S.stopImmediatePropagation();const T=fe.property("__zoom").k||1,X=On();if(S.ctrlKey&&h&&X){const $e=Le(S),ut=z(S),rs=T*2**ut;de.scaleTo(fe,rs,$e,S);return}const K=S.deltaMode===1?20:1;let ie=f.value===qt.Vertical?0:S.deltaX*K,te=f.value===qt.Horizontal?0:S.deltaY*K;!X&&S.shiftKey&&f.value!==qt.Vertical&&!ie&&te&&(ie=te,te=0),de.translateBy(fe,-(ie/T)*g.value,-(te/T)*g.value);const pe=re(fe.property("__zoom"));N&&clearTimeout(N),$.value?(k.move({event:S,flowTransform:pe}),k.viewportChange(pe),N=setTimeout(()=>{k.moveEnd({event:S,flowTransform:pe}),k.viewportChangeEnd(pe),$.value=!1},150)):($.value=!0,k.moveStart({event:S,flowTransform:pe}),k.viewportChangeStart(pe))},{passive:!1}):typeof be<"u"&&fe.on("wheel.zoom",function(S,T){if(!p.value||se(S,b.value))return null;S.preventDefault(),be.call(this,S,T)},{passive:!1})})});function ee(Z,j){return j===2&&Array.isArray(Z)&&Z.includes(2)}function z(Z){const j=Z.ctrlKey&&On()?10:1;return-Z.deltaY*(Z.deltaMode===1?.05:Z.deltaMode?1:.002)*j}function ae(Z,j){return Z.x!==j.x&&!isNaN(j.x)||Z.y!==j.y&&!isNaN(j.y)||Z.zoom!==j.k&&!isNaN(j.k)}function re(Z){return{x:Z.x,y:Z.y,zoom:Z.k}}function ne(){if(!q.value)return;const{width:Z,height:j}=Kn(q.value);(Z===0||j===0)&&k.error(new Ce(ke.MISSING_VIEWPORT_DIMENSIONS)),s.value.width=Z||500,s.value.height=j||500}function se(Z,j){return Z.target.closest(`.${j}`)}return(Z,j)=>(U(),oe("div",{ref_key:"viewportRef",ref:q,key:`viewport-${C(n)}`,class:"vue-flow__viewport vue-flow__container"},[Ne(Wf,{"is-selecting":C(L),class:Qe({connecting:!!C(D),dragging:C(V),draggable:C(J)})},{default:Pe(()=>[Ne(uh,null,{default:Pe(()=>[xe(Z.$slots,"default")]),_:3})]),_:3},8,["is-selecting","class"])]))}}),fh=["id"],hh=["id"],gh=["id"],ph={name:"A11yDescriptions",compatConfig:{MODE:3}},vh=ve({...ph,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Me();return(i,r)=>(U(),oe(st,null,[ge("div",{id:`${C(sa)}-${C(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ge(C(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,fh),ge("div",{id:`${C(la)}-${C(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,hh),C(n)?Ee("",!0):(U(),oe("div",{key:0,id:`${C(pd)}-${C(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ge(C(o)),9,gh))],64))}}),mh={name:"VueFlow",compatConfig:{MODE:3}},o0=ve({...mh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:{}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=ss(),r=Zt(o,"modelValue",n),a=Zt(o,"nodes",n),s=Zt(o,"edges",n),{vueFlowRef:l,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f}=Me(o),g=Zf({modelValue:r,nodes:a,edges:s},o,{vueFlowRef:l,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f});return Vd(n,u),Tt(no,i),xr(()=>{g()}),t({vueFlowRef:l,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f}),(E,v)=>(U(),oe("div",{ref_key:"vueFlowRef",ref:l,class:"vue-flow"},[Ne(dh,null,{default:Pe(()=>[xe(E.$slots,"zoom-pane")]),_:3}),xe(E.$slots,"default"),Ne(vh)],512))}}),yh=["x","y","width","height"],_h=["stroke","stroke-width","d"],wh=["cx","cy","r","fill"],bh={key:2,height:"100",width:"100"},xh=["fill"],Eh=["x","y","fill"],Sh={name:"Background"},i0=ve({...Sh,props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},{id:n,viewport:o}=Me(),i=ue(()=>{const l=e.gap&&e.gap*o.value.zoom,u=l&&o.value.x%l,c=l&&o.value.y%l,d=e.size*o.value.zoom;return{scaledGap:l,xOffset:u,yOffset:c,size:d}}),r=`pattern-${n}`,a=ue(()=>e.patternColor||t[e.variant||"dots"]),s=ue(()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`);return(l,u)=>(U(),oe("svg",{class:"vue-flow__background",style:ze({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[xe(l.$slots,"pattern-container",{id:r},()=>[ge("pattern",{id:r,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[xe(l.$slots,"pattern",{},()=>[e.variant==="lines"?(U(),oe("path",{key:0,stroke:C(a),"stroke-width":e.size,d:C(s)},null,8,_h)):e.variant==="dots"?(U(),oe("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:C(a)},null,8,wh)):Ee("",!0),e.bgColor?(U(),oe("svg",bh,[ge("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,xh)])):Ee("",!0)])],8,yh)]),ge("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${r})`},null,8,Eh),xe(l.$slots,"default",{id:r})],4))}}),io=ve({__name:"Panel",props:{position:null},setup(e){const t=e,{userSelectionActive:n}=Me(),o=ue(()=>`${t.position}`.split("-"));return(i,r)=>(U(),oe("div",{class:Qe(["vue-flow__panel",C(o)]),style:ze({pointerEvents:C(n)?"none":"all"})},[xe(i.$slots,"default")],6))}});var ro=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ro||{});const Nh={name:"ControlButton"},Mh=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},kh={class:"vue-flow__controls-button"};function Ch(e,t,n,o,i,r){return U(),oe("button",kh,[xe(e.$slots,"default")])}const yn=Mh(Nh,[["render",Ch]]),$h={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ah=ge("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Th=[Ah];function Ph(e,t){return U(),oe("svg",$h,Th)}const Ih={render:Ph},Dh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},zh=ge("path",{d:"M0 0h32v4.2H0z"},null,-1),Oh=[zh];function Bh(e,t){return U(),oe("svg",Dh,Oh)}const Rh={render:Bh},Vh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Hh=ge("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Fh=[Hh];function Lh(e,t){return U(),oe("svg",Vh,Fh)}const Gh={render:Lh},Yh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Xh=ge("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Uh=[Xh];function Zh(e,t){return U(),oe("svg",Yh,Uh)}const qh={render:Zh},Wh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Kh=ge("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Jh=[Kh];function Qh(e,t){return U(),oe("svg",Wh,Jh)}const jh={render:Qh},eg={name:"Controls"},r0=ve({...eg,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null,position:{default:()=>"bottom-left"}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=Me(),o=me(n,"nodesDraggable"),i=me(n,"nodesConnectable"),r=me(n,"elementsSelectable"),a=me(n,"setInteractive"),s=me(n,"zoomIn"),l=me(n,"zoomOut"),u=me(n,"fitView"),c=ue(()=>o.value&&i.value&&r.value),d=()=>{s.value(),t("zoomIn")},f=()=>{l.value(),t("zoomOut")},g=()=>{u.value(e.fitViewParams),t("fitView")},E=()=>{a.value(!c.value),t("interactionChange",!c.value)};return(v,h)=>(U(),Se(C(io),{class:"vue-flow__controls",position:e.position},{default:Pe(()=>[xe(v.$slots,"top"),e.showZoom?(U(),oe(st,{key:0},[xe(v.$slots,"control-zoom-in",{},()=>[Ne(yn,{class:"vue-flow__controls-zoomin",onClick:d},{default:Pe(()=>[xe(v.$slots,"icon-zoom-in",{},()=>[(U(),Se(it(C(Ih))))])]),_:3})]),xe(v.$slots,"control-zoom-out",{},()=>[Ne(yn,{class:"vue-flow__controls-zoomout",onClick:f},{default:Pe(()=>[xe(v.$slots,"icon-zoom-out",{},()=>[(U(),Se(it(C(Rh))))])]),_:3})])],64)):Ee("",!0),e.showFitView?xe(v.$slots,"control-fit-view",{key:1},()=>[Ne(yn,{class:"vue-flow__controls-fitview",onClick:g},{default:Pe(()=>[xe(v.$slots,"icon-fit-view",{},()=>[(U(),Se(it(C(Gh))))])]),_:3})]):Ee("",!0),e.showInteractive?xe(v.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(U(),Se(yn,{key:0,class:"vue-flow__controls-interactive",onClick:E},{default:Pe(()=>[C(c)?xe(v.$slots,"icon-unlock",{key:0},()=>[(U(),Se(it(C(jh))))]):Ee("",!0),C(c)?Ee("",!0):xe(v.$slots,"icon-lock",{key:1},()=>[(U(),Se(it(C(qh))))])]),_:3})):Ee("",!0)]):Ee("",!0),xe(v.$slots,"default")]),_:3},8,["position"]))}});var tg={value:()=>{}};function Ia(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new kn(n)}function kn(e){this._=e}function ng(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}kn.prototype=Ia.prototype={constructor:kn,on:function(e,t){var n=this._,o=ng(e+"",n),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=og(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=ir(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ir(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new kn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function og(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function ir(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=tg,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vo="http://www.w3.org/1999/xhtml";const rr={svg:"http://www.w3.org/2000/svg",xhtml:Vo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ao(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),rr.hasOwnProperty(t)?{space:rr[t],local:e}:e}function ig(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vo&&t.documentElement.namespaceURI===Vo?t.createElement(e):t.createElementNS(n,e)}}function rg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Da(e){var t=ao(e);return(t.local?rg:ig)(t)}function ag(){}function ai(e){return e==null?ag:function(){return this.querySelector(e)}}function sg(e){typeof e!="function"&&(e=ai(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=new Array(a),l,u,c=0;c<a;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Ve(o,this._parents)}function lg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ug(){return[]}function za(e){return e==null?ug:function(){return this.querySelectorAll(e)}}function cg(e){return function(){return lg(e.apply(this,arguments))}}function dg(e){typeof e=="function"?e=cg(e):e=za(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),i.push(l));return new Ve(o,i)}function Oa(e){return function(){return this.matches(e)}}function Ba(e){return function(t){return t.matches(e)}}var fg=Array.prototype.find;function hg(e){return function(){return fg.call(this.children,e)}}function gg(){return this.firstElementChild}function pg(e){return this.select(e==null?gg:hg(typeof e=="function"?e:Ba(e)))}var vg=Array.prototype.filter;function mg(){return Array.from(this.children)}function yg(e){return function(){return vg.call(this.children,e)}}function _g(e){return this.selectAll(e==null?mg:yg(typeof e=="function"?e:Ba(e)))}function wg(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new Ve(o,this._parents)}function Ra(e){return new Array(e.length)}function bg(){return new Ve(this._enter||this._groups.map(Ra),this._parents)}function Rn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Rn.prototype={constructor:Rn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xg(e){return function(){return e}}function Eg(e,t,n,o,i,r){for(var a=0,s,l=t.length,u=r.length;a<u;++a)(s=t[a])?(s.__data__=r[a],o[a]=s):n[a]=new Rn(e,r[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Sg(e,t,n,o,i,r,a){var s,l,u=new Map,c=t.length,d=r.length,f=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(f[s]=g=a.call(l,l.__data__,s,t)+"",u.has(g)?i[s]=l:u.set(g,l));for(s=0;s<d;++s)g=a.call(e,r[s],s,r)+"",(l=u.get(g))?(o[s]=l,l.__data__=r[s],u.delete(g)):n[s]=new Rn(e,r[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function Ng(e){return e.__data__}function Mg(e,t){if(!arguments.length)return Array.from(this,Ng);var n=t?Sg:Eg,o=this._parents,i=this._groups;typeof e!="function"&&(e=xg(e));for(var r=i.length,a=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,g=kg(e.call(c,c&&c.__data__,u,o)),E=g.length,v=s[u]=new Array(E),h=a[u]=new Array(E),m=l[u]=new Array(f);n(c,d,v,h,m,g,t);for(var p=0,b=0,_,k;p<E;++p)if(_=v[p]){for(p>=b&&(b=p+1);!(k=h[b])&&++b<E;);_._next=k||null}}return a=new Ve(a,o),a._enter=s,a._exit=l,a}function kg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cg(){return new Ve(this._exit||this._groups.map(Ra),this._parents)}function $g(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function Ag(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),g,E=0;E<d;++E)(g=u[E]||c[E])&&(f[E]=g);for(;l<i;++l)s[l]=n[l];return new Ve(s,this._parents)}function Tg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Pg(e){e||(e=Ig);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],s=a.length,l=i[r]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new Ve(i,this._parents).order()}function Ig(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zg(){return Array.from(this)}function Og(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Bg(){let e=0;for(const t of this)++e;return e}function Rg(){return!this.node()}function Vg(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,s;r<a;++r)(s=i[r])&&e.call(s,s.__data__,r,i);return this}function Hg(e){return function(){this.removeAttribute(e)}}function Fg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lg(e,t){return function(){this.setAttribute(e,t)}}function Gg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Yg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Xg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ug(e,t){var n=ao(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Fg:Hg:typeof t=="function"?n.local?Xg:Yg:n.local?Gg:Lg)(n,t))}function Va(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zg(e){return function(){this.style.removeProperty(e)}}function qg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wg(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Kg(e,t,n){return arguments.length>1?this.each((t==null?Zg:typeof t=="function"?Wg:qg)(e,t,n??"")):zt(this.node(),e)}function zt(e,t){return e.style.getPropertyValue(t)||Va(e).getComputedStyle(e,null).getPropertyValue(t)}function Jg(e){return function(){delete this[e]}}function Qg(e,t){return function(){this[e]=t}}function jg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ep(e,t){return arguments.length>1?this.each((t==null?Jg:typeof t=="function"?jg:Qg)(e,t)):this.node()[e]}function Ha(e){return e.trim().split(/^|\s+/)}function si(e){return e.classList||new Fa(e)}function Fa(e){this._node=e,this._names=Ha(e.getAttribute("class")||"")}Fa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function La(e,t){for(var n=si(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ga(e,t){for(var n=si(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function tp(e){return function(){La(this,e)}}function np(e){return function(){Ga(this,e)}}function op(e,t){return function(){(t.apply(this,arguments)?La:Ga)(this,e)}}function ip(e,t){var n=Ha(e+"");if(arguments.length<2){for(var o=si(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?op:t?tp:np)(n,t))}function rp(){this.textContent=""}function ap(e){return function(){this.textContent=e}}function sp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lp(e){return arguments.length?this.each(e==null?rp:(typeof e=="function"?sp:ap)(e)):this.node().textContent}function up(){this.innerHTML=""}function cp(e){return function(){this.innerHTML=e}}function dp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fp(e){return arguments.length?this.each(e==null?up:(typeof e=="function"?dp:cp)(e)):this.node().innerHTML}function hp(){this.nextSibling&&this.parentNode.appendChild(this)}function gp(){return this.each(hp)}function pp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vp(){return this.each(pp)}function mp(e){var t=typeof e=="function"?e:Da(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yp(){return null}function _p(e,t){var n=typeof e=="function"?e:Da(e),o=t==null?yp:typeof t=="function"?t:ai(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function wp(){var e=this.parentNode;e&&e.removeChild(this)}function bp(){return this.each(wp)}function xp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sp(e){return this.select(e?Ep:xp)}function Np(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Mp(e){return function(t){e.call(this,t,this.__data__)}}function kp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Cp(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function $p(e,t,n){return function(){var o=this.__on,i,r=Mp(t);if(o){for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function Ap(e,t,n){var o=kp(e+""),i,r=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?$p:Cp,i=0;i<r;++i)this.each(s(o[i],t,n));return this}function Ya(e,t,n){var o=Va(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tp(e,t){return function(){return Ya(this,e,t)}}function Pp(e,t){return function(){return Ya(this,e,t.apply(this,arguments))}}function Ip(e,t){return this.each((typeof t=="function"?Pp:Tp)(e,t))}function*Dp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var zp=[null];function Ve(e,t){this._groups=e,this._parents=t}function un(){return new Ve([[document.documentElement]],zp)}function Op(){return this}Ve.prototype=un.prototype={constructor:Ve,select:sg,selectAll:dg,selectChild:pg,selectChildren:_g,filter:wg,data:Mg,enter:bg,exit:Cg,join:$g,merge:Ag,selection:Op,order:Tg,sort:Pg,call:Dg,nodes:zg,node:Og,size:Bg,empty:Rg,each:Vg,attr:Ug,style:Kg,property:ep,classed:ip,text:lp,html:fp,raise:gp,lower:vp,append:mp,insert:_p,remove:bp,clone:Sp,datum:Np,on:Ap,dispatch:Ip,[Symbol.iterator]:Dp};function li(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xa(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function cn(){}var tn=.7,Vn=1/tn,$t="\\s*([+-]?\\d+)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bp=/^#([0-9a-f]{3,8})$/,Rp=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),Vp=new RegExp(`^rgb\\(${Xe},${Xe},${Xe}\\)$`),Hp=new RegExp(`^rgba\\(${$t},${$t},${$t},${nn}\\)$`),Fp=new RegExp(`^rgba\\(${Xe},${Xe},${Xe},${nn}\\)$`),Lp=new RegExp(`^hsl\\(${nn},${Xe},${Xe}\\)$`),Gp=new RegExp(`^hsla\\(${nn},${Xe},${Xe},${nn}\\)$`),ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};li(cn,on,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHex8:Yp,formatHsl:Xp,formatRgb:lr,toString:lr});function sr(){return this.rgb().formatHex()}function Yp(){return this.rgb().formatHex8()}function Xp(){return Ua(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function on(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ur(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rp.exec(e))?new Te(t[1],t[2],t[3],1):(t=Vp.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hp.exec(e))?_n(t[1],t[2],t[3],t[4]):(t=Fp.exec(e))?_n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lp.exec(e))?fr(t[1],t[2]/100,t[3]/100,1):(t=Gp.exec(e))?fr(t[1],t[2]/100,t[3]/100,t[4]):ar.hasOwnProperty(e)?ur(ar[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function ur(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function _n(e,t,n,o){return o<=0&&(e=t=n=NaN),new Te(e,t,n,o)}function Up(e){return e instanceof cn||(e=on(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function Ho(e,t,n,o){return arguments.length===1?Up(e):new Te(e,t,n,o??1)}function Te(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}li(Te,Ho,Xa(cn,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te(mt(this.r),mt(this.g),mt(this.b),Hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cr,formatHex:cr,formatHex8:Zp,formatRgb:dr,toString:dr}));function cr(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Zp(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function dr(){const e=Hn(this.opacity);return`${e===1?"rgb(":"rgba("}${mt(this.r)}, ${mt(this.g)}, ${mt(this.b)}${e===1?")":`, ${e})`}`}function Hn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=mt(e),(e<16?"0":"")+e.toString(16)}function fr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,o)}function Ua(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof cn||(e=on(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,s=r-i,l=(r+i)/2;return s?(t===r?a=(n-o)/s+(n<o)*6:n===r?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?r+i:2-r-i,a*=60):s=l>0&&l<1?0:a,new Re(a,s,l,e.opacity)}function qp(e,t,n,o){return arguments.length===1?Ua(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}li(Re,qp,Xa(cn,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Te(wo(e>=240?e-240:e+120,i,o),wo(e,i,o),wo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Re(hr(this.h),wn(this.s),wn(this.l),Hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hn(this.opacity);return`${e===1?"hsl(":"hsla("}${hr(this.h)}, ${wn(this.s)*100}%, ${wn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hr(e){return e=(e||0)%360,e<0?e+360:e}function wn(e){return Math.max(0,Math.min(1,e||0))}function wo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Za=e=>()=>e;function Wp(e,t){return function(n){return e+n*t}}function Kp(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Jp(e){return(e=+e)==1?qa:function(t,n){return n-t?Kp(t,n,e):Za(isNaN(t)?n:t)}}function qa(e,t){var n=t-e;return n?Wp(e,n):Za(isNaN(e)?t:e)}const gr=function e(t){var n=Jp(t);function o(i,r){var a=n((i=Ho(i)).r,(r=Ho(r)).r),s=n(i.g,r.g),l=n(i.b,r.b),u=qa(i.opacity,r.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bo=new RegExp(Fo.source,"g");function Qp(e){return function(){return e}}function jp(e){return function(t){return e(t)+""}}function ev(e,t){var n=Fo.lastIndex=bo.lastIndex=0,o,i,r,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Fo.exec(e))&&(i=bo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),s[a]?s[a]+=r:s[++a]=r),(o=o[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ot(o,i)})),n=bo.lastIndex;return n<t.length&&(r=t.slice(n),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?jp(l[0].x):Qp(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var pr=180/Math.PI,Wa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ka(e,t,n,o,i,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*pr,skewX:Math.atan(l)*pr,scaleX:a,scaleY:s}}var bn;function tv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wa:Ka(t.a,t.b,t.c,t.d,t.e,t.f)}function nv(e){return e==null||(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",e),!(e=bn.transform.baseVal.consolidate()))?Wa:(e=e.matrix,Ka(e.a,e.b,e.c,e.d,e.e,e.f))}function Ja(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,g,E){if(u!==d||c!==f){var v=g.push("translate(",null,t,null,n);E.push({i:v-4,x:ot(u,d)},{i:v-2,x:ot(c,f)})}else(d||f)&&g.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,f,g,E){if(u!==d||c!==f){var v=g.push(i(g)+"scale(",null,",",null,")");E.push({i:v-4,x:ot(u,d)},{i:v-2,x:ot(c,f)})}else(d!==1||f!==1)&&g.push(i(g)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(g){for(var E=-1,v=f.length,h;++E<v;)d[(h=f[E]).i]=h.x(g);return d.join("")}}}var ov=Ja(tv,"px, ","px)","deg)"),iv=Ja(nv,", ",")",")"),rv=1e-12;function vr(e){return((e=Math.exp(e))+1/e)/2}function av(e){return((e=Math.exp(e))-1/e)/2}function sv(e){return((e=Math.exp(2*e))-1)/(e+1)}(function e(t,n,o){function i(r,a){var s=r[0],l=r[1],u=r[2],c=a[0],d=a[1],f=a[2],g=c-s,E=d-l,v=g*g+E*E,h,m;if(v<rv)m=Math.log(f/u)/t,h=function(w){return[s+w*g,l+w*E,u*Math.exp(t*w*m)]};else{var p=Math.sqrt(v),b=(f*f-u*u+o*v)/(2*u*n*p),_=(f*f-u*u-o*v)/(2*f*n*p),k=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(_*_+1)-_);m=(D-k)/t,h=function(w){var V=w*m,H=vr(k),A=u/(n*p)*(H*sv(t*V+k)-av(k));return[s+A*g,l+A*E,u*H/vr(t*V+k)]}}return h.duration=m*1e3*t/Math.SQRT2,h}return i.rho=function(r){var a=Math.max(.001,+r),s=a*a,l=s*s;return e(a,s,l)},i})(Math.SQRT2,2,4);var Ot=0,Yt=0,Ft=0,Qa=1e3,Fn,Xt,Ln=0,bt=0,so=0,rn=typeof performance=="object"&&performance.now?performance:Date,ja=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ui(){return bt||(ja(lv),bt=rn.now()+so)}function lv(){bt=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=es.prototype={constructor:Gn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ui():+n)+(t==null?0:+t),!this._next&&Xt!==this&&(Xt?Xt._next=this:Fn=this,Xt=this),this._call=e,this._time=n,Lo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lo())}};function es(e,t,n){var o=new Gn;return o.restart(e,t,n),o}function uv(){ui(),++Ot;for(var e=Fn,t;e;)(t=bt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ot}function mr(){bt=(Ln=rn.now())+so,Ot=Yt=0;try{uv()}finally{Ot=0,dv(),bt=0}}function cv(){var e=rn.now(),t=e-Ln;t>Qa&&(so-=t,Ln=e)}function dv(){for(var e,t=Fn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fn=n);Xt=e,Lo(o)}function Lo(e){if(!Ot){Yt&&(Yt=clearTimeout(Yt));var t=e-bt;t>24?(e<1/0&&(Yt=setTimeout(mr,e-rn.now()-so)),Ft&&(Ft=clearInterval(Ft))):(Ft||(Ln=rn.now(),Ft=setInterval(cv,Qa)),Ot=1,ja(mr))}}function yr(e,t,n){var o=new Gn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var fv=Ia("start","end","cancel","interrupt"),hv=[],ts=0,_r=1,Go=2,Cn=3,wr=4,Yo=5,$n=6;function lo(e,t,n,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;gv(e,n,{name:t,index:o,group:i,on:fv,tween:hv,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:ts})}function ci(e,t){var n=Fe(e,t);if(n.state>ts)throw new Error("too late; already scheduled");return n}function Ze(e,t){var n=Fe(e,t);if(n.state>Cn)throw new Error("too late; already running");return n}function Fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gv(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=es(r,0,n.time);function r(u){n.state=_r,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,g;if(n.state!==_r)return l();for(c in o)if(g=o[c],g.name===n.name){if(g.state===Cn)return yr(a);g.state===wr?(g.state=$n,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=$n,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(yr(function(){n.state===Cn&&(n.state=wr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Go,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Go){for(n.state=Cn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Yo,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Yo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=$n,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function pv(e,t){var n=e.__transition,o,i,r=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){r=!1;continue}i=o.state>Go&&o.state<Yo,o.state=$n,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}r&&delete e.__transition}}function vv(e){return this.each(function(){pv(this,e)})}function mv(e,t){var n,o;return function(){var i=Ze(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function yv(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Ze(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}r.tween=i}}function _v(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Fe(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((t==null?mv:yv)(n,e,t))}function di(e,t,n){var o=e._id;return e.each(function(){var i=Ze(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Fe(i,o).value[t]}}function ns(e,t){var n;return(typeof t=="number"?ot:t instanceof on?gr:(n=on(t))?(t=n,gr):ev)(e,t)}function wv(e){return function(){this.removeAttribute(e)}}function bv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xv(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Ev(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Sv(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Nv(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Mv(e,t){var n=ao(e),o=n==="transform"?iv:ns;return this.attrTween(e,typeof t=="function"?(n.local?Nv:Sv)(n,o,di(this,"attr."+e,t)):t==null?(n.local?bv:wv)(n):(n.local?Ev:xv)(n,o,t))}function kv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $v(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Cv(e,r)),n}return i._value=t,i}function Av(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&kv(e,r)),n}return i._value=t,i}function Tv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=ao(e);return this.tween(n,(o.local?$v:Av)(o,t))}function Pv(e,t){return function(){ci(this,e).delay=+t.apply(this,arguments)}}function Iv(e,t){return t=+t,function(){ci(this,e).delay=t}}function Dv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pv:Iv)(t,e)):Fe(this.node(),t).delay}function zv(e,t){return function(){Ze(this,e).duration=+t.apply(this,arguments)}}function Ov(e,t){return t=+t,function(){Ze(this,e).duration=t}}function Bv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zv:Ov)(t,e)):Fe(this.node(),t).duration}function Rv(e,t){if(typeof t!="function")throw new Error;return function(){Ze(this,e).ease=t}}function Vv(e){var t=this._id;return arguments.length?this.each(Rv(t,e)):Fe(this.node(),t).ease}function Hv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ze(this,e).ease=n}}function Fv(e){if(typeof e!="function")throw new Error;return this.each(Hv(this._id,e))}function Lv(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new et(o,this._parents,this._name,this._id)}function Gv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,g=0;g<c;++g)(f=l[g]||u[g])&&(d[g]=f);for(;s<o;++s)a[s]=t[s];return new et(a,this._parents,this._name,this._id)}function Yv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Xv(e,t,n){var o,i,r=Yv(t)?ci:Ze;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(t,n),a.on=i}}function Uv(e,t){var n=this._id;return arguments.length<2?Fe(this.node(),n).on.on(e):this.each(Xv(n,e,t))}function Zv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qv(){return this.on("end.remove",Zv(this._id))}function Wv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ai(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s=o[a],l=s.length,u=r[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,lo(u[f],t,n,f,u,Fe(c,n)));return new et(r,this._parents,t,n)}function Kv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=za(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),g,E=Fe(c,n),v=0,h=f.length;v<h;++v)(g=f[v])&&lo(g,t,n,v,f,E);r.push(f),a.push(c)}return new et(r,a,t,n)}var Jv=un.prototype.constructor;function Qv(){return new Jv(this._groups,this._parents)}function jv(e,t){var n,o,i;return function(){var r=zt(this,e),a=(this.style.removeProperty(e),zt(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function os(e){return function(){this.style.removeProperty(e)}}function em(e,t,n){var o,i=n+"",r;return function(){var a=zt(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function tm(e,t,n){var o,i,r;return function(){var a=zt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),zt(this,e))),a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s))}}function nm(e,t){var n,o,i,r="style."+t,a="end."+r,s;return function(){var l=Ze(this,e),u=l.on,c=l.value[r]==null?s||(s=os(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(a,i=c),l.on=o}}function om(e,t,n){var o=(e+="")=="transform"?ov:ns;return t==null?this.styleTween(e,jv(e,o)).on("end.style."+e,os(e)):typeof t=="function"?this.styleTween(e,tm(e,o,di(this,"style."+e,t))).each(nm(this._id,e)):this.styleTween(e,em(e,o,t),n).on("end.style."+e,null)}function im(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function rm(e,t,n){var o,i;function r(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&im(e,a,n)),o}return r._value=t,r}function am(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,rm(e,t,n??""))}function sm(e){return function(){this.textContent=e}}function lm(e){return function(){var t=e(this);this.textContent=t??""}}function um(e){return this.tween("text",typeof e=="function"?lm(di(this,"text",e)):sm(e==null?"":e+""))}function cm(e){return function(t){this.textContent=e.call(this,t)}}function dm(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&cm(i)),t}return o._value=e,o}function fm(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,dm(e))}function hm(){for(var e=this._name,t=this._id,n=is(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=Fe(l,t);lo(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new et(o,this._parents,e,n)}function gm(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--i===0&&r()}};n.each(function(){var u=Ze(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&r()})}var pm=0;function et(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function is(){return++pm}var We=un.prototype;et.prototype={constructor:et,select:Wv,selectAll:Kv,selectChild:We.selectChild,selectChildren:We.selectChildren,filter:Lv,merge:Gv,selection:Qv,transition:hm,call:We.call,nodes:We.nodes,node:We.node,size:We.size,empty:We.empty,each:We.each,on:Uv,attr:Mv,attrTween:Tv,style:om,styleTween:am,text:um,textTween:fm,remove:qv,tween:_v,delay:Dv,duration:Bv,ease:Vv,easeVarying:Fv,end:gm,[Symbol.iterator]:We[Symbol.iterator]};function vm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mm={time:null,delay:0,duration:250,ease:vm};function ym(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _m(e){var t,n;e instanceof et?(t=e._id,e=e._name):(t=is(),(n=mm).time=ui(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&lo(l,e,t,u,a,n||ym(l,t));return new et(o,this._parents,e,t)}un.prototype.interrupt=vv;un.prototype.transition=_m;function Ut(e,t,n){this.k=e,this.x=t,this.y=n}Ut.prototype={constructor:Ut,scale:function(e){return e===1?this:new Ut(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ut(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ut.prototype;const wm={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},bm=ge("path",{fill:"currentColor",d:"M3 21v-5h2v3h3v2zm13 0v-2h3v-3h2v5zM3 8V3h5v2H5v3zm16 0V5h-3V3h5v5z"},null,-1),xm=[bm];function Em(e,t){return U(),oe("svg",wm,[...xm])}const Sm={name:"material-symbols-fullscreen",render:Em},Nm={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Mm=ge("path",{fill:"currentColor",d:"M6 21v-3H3v-2h5v5zm10 0v-5h5v2h-3v3zM3 8V6h3V3h2v5zm13 0V3h2v3h3v2z"},null,-1),km=[Mm];function Cm(e,t){return U(),oe("svg",Nm,[...km])}const $m={name:"material-symbols-fullscreen-exit",render:Cm},Am={class:"flex"},Tm=ve({__name:"FullScreenToggle",props:{config:{}},emits:["toggleFullScreen"],setup(e,{emit:t}){const n=e,o=t,{config:i}=Cr(n),r=()=>{o("toggleFullScreen")};return(a,s)=>(U(),Se(C(io),{class:"text-xs bg-white border-1 rounded-md p-2 border-gray-200 z-50 nc-erd-histogram cursor-pointer hover:bg-gray-100 shadow-md",position:C(ro).BottomRight},{default:Pe(()=>[ge("div",Am,[C(i).isFullScreen?(U(),Se(C($m),{key:0,class:"h-5 w-5",onClick:r})):(U(),Se(C(Sm),{key:1,class:"h-5 w-5",onClick:r}))])]),_:1},8,["position"]))}}),Pm={class:"flex items-center gap-2"},Im={class:"flex items-center gap-2"},Dm={class:"select-none nc-erd-config-option-label"},zm={key:0,class:"flex items-center gap-2"},Om={class:"select-none nc-erd-config-option-label"},Bm={key:1,class:"flex flex-row items-center"},Rm={class:"ml-2 select-none nc-erd-config-option-label"},Vm={key:2,class:"flex items-center gap-2"},Hm={class:"select-none nc-erd-config-option-label"},Fm=ve({__name:"ConfigPanel",props:{config:{}},setup(e){const t=e,{includeM2M:n}=fs(),o=hs(t,"config"),i=he(!1);return(r,a)=>{const s=_s,l=gs("e");return U(),Se(C(io),{class:"flex flex-col gap-y-1 bg-white border-1 rounded-lg border-gray-200 z-50 px-3 py-2 nc-erd-context-menu shadow-md",position:C(ro).TopRight},{default:Pe(()=>[ge("div",Pm,[Rt(Ne(s,{checked:C(o).showAllColumns,"onUpdate:checked":a[0]||(a[0]=u=>C(o).showAllColumns=u),class:"nc-erd-showColumns-checkbox"},null,8,["checked"]),[[l,["c:erd:showAllColumns"]]]),ge("span",{class:"select-none nc-erd-config-option-label nc-erd-showColumns-label text-xs",onDblclick:a[1]||(a[1]=u=>i.value=!0)},Ge(r.$t("activity.erd.showColumns")),33)]),ge("div",Im,[Rt(Ne(s,{checked:C(o).showPkAndFk,"onUpdate:checked":a[2]||(a[2]=u=>C(o).showPkAndFk=u),class:Qe(["nc-erd-showPkAndFk-checkbox",[`nc-erd-showPkAndFk-checkbox-${C(o).showAllColumns?"enabled":"disabled"}`,`nc-erd-showPkAndFk-checkbox-${C(o).showPkAndFk?"checked":"unchecked"}`]]),disabled:!C(o).showAllColumns},null,8,["checked","class","disabled"]),[[l,["c:erd:showPkAndFk"]]]),ge("span",Dm,Ge(r.$t("activity.erd.showPkAndFk")),1)]),C(o).singleTableMode?Ee("",!0):(U(),oe("div",zm,[Rt(Ne(s,{checked:C(o).showViews,"onUpdate:checked":a[3]||(a[3]=u=>C(o).showViews=u),class:"nc-erd-showViews-checkbox"},null,8,["checked"]),[[l,["c:erd:showViews"]]]),ge("span",Om,Ge(r.$t("activity.erd.showSqlViews")),1)])),!C(o).singleTableMode&&C(i)&&C(n)?(U(),oe("div",Bm,[Rt(Ne(s,{checked:C(o).showMMTables,"onUpdate:checked":a[4]||(a[4]=u=>C(o).showMMTables=u),class:"nc-erd-showMMTables-checkbox"},null,8,["checked"]),[[l,["c:erd:showMMTables"]]]),ge("span",Rm,Ge(r.$t("activity.erd.showMMTables")),1)])):Ee("",!0),C(i)&&C(n)?(U(),oe("div",Vm,[Rt(Ne(s,{checked:C(o).showJunctionTableNames,"onUpdate:checked":a[5]||(a[5]=u=>C(o).showJunctionTableNames=u),class:"nc-erd-showJunctionTableNames-checkbox"},null,8,["checked"]),[[l,["c:erd:showJunctionTableNames"]]]),ge("span",Hm,Ge(r.$t("activity.erd.showJunctionTableNames")),1)])):Ee("",!0)]),_:1},8,["position"])}}});const Lm=ws(Fm,[["__scopeId","data-v-f7362990"]]),Gm={class:"flex flex-col"},Ym={class:"flex items-center gap-1.5 p-2"},Xm={class:"flex items-center gap-1.5 p-2"},Um=ve({__name:"HistogramPanel",setup(e){return(t,n)=>(U(),Se(C(io),{class:"text-xs bg-white border-1 rounded border-gray-200 shadow-md p-1.5 z-50 nc-erd-histogram",position:C(ro).TopLeft},{default:Pe(()=>[ge("div",Gm,[ge("div",Ym,[(U(),Se(it(C(hi).table))),ge("div",null,Ge(t.$t("objects.table")),1)]),ge("div",Xm,[(U(),Se(it(C(hi).eye))),ge("div",null,Ge(t.$t("objects.sqlVIew")),1)])])]),_:1},8,["position"]))}}),Zm=ps(()=>vs(()=>import("./Flow.1d452f69.js"),["./Flow.1d452f69.js","./Icon.vue.129448d5.js","./entry.5958c07b.js","./entry.bdecbb78.css","./TableIcon.vue.694329e0.js","./Tooltip.vue.092c15c5.js","./index.9b87fcff.js","./_plugin-vue_export-helper.c27b6911.js","./bases.e6c8e3c4.js","./index.0feaca99.js","./Overlay.df272e53.js","./Overlay.09be8605.css","./index.5e1434a7.js","./Checkbox.2e7b0035.js","./FormItemContext.ddc65fa5.js","./createForOfIteratorHelper.33de41ba.js","./index.55641318.js","./debounce.7c24f171.js","./toNumber.e09cd85a.js","./isSymbol.114fe557.js","./Flow.05f2a388.css"],import.meta.url).then(e=>e.default||e)),qm={class:"relative h-full"},Wm={class:"h-full w-full flex flex-col justify-center items-center"},a0=ve({__name:"View",props:{sourceId:{type:String,default:""},table:{type:Object,default:null},showAllColumns:{type:Boolean,default:!0},baseId:{type:String,default:void 0}},setup(e){const t=e,{baseTables:n}=gi(bs()),{sources:o,base:i}=gi(xs()),r=ue(()=>t.baseId??i.value.id),a=ue(()=>n.value.get(r.value)??[]),{metas:s,getMeta:l}=Es(),u=he([]),c=he(!0),d=kr({showPkAndFk:!0,showViews:!1,showAllColumns:t.showAllColumns,singleTableMode:!!t.table,showMMTables:!1,showJunctionTableNames:!1,isFullScreen:!1}),f=async h=>{await Promise.all(h.filter(m=>!s.value[m.id]).map(async m=>{await l(m.id)}))},g=async()=>{let h=[];if(t.table){const m=await l(t.table.id);h=a.value.filter(p=>{var b,_;return p.id===((b=t.table)==null?void 0:b.id)||((_=m.columns)==null?void 0:_.find(k=>{var D;return ms(k.uidt)&&((D=k.colOptions)==null?void 0:D.fk_related_model_id)===p.id}))})}else h=a.value;await f(h),u.value=h.filter(m=>{var p;return d.showMMTables||!d.showMMTables&&!m.mm||m.id===((p=t.table)==null?void 0:p.id)}).filter(m=>d.singleTableMode||!d.showViews&&m.type!=="view"||d.showViews),c.value=!1},E=()=>{d.isFullScreen=!d.isFullScreen};_e([s,a],g,{flush:"post",immediate:!0}),_e(d,g,{flush:"post",deep:!0});const v=ue(()=>u.value.filter(h=>{var m;return t!=null&&t.sourceId?h.source_id===t.sourceId:h.source_id===((m=o.value)==null?void 0:m.filter(p=>p.enabled)[0].id)}));return _e(()=>d.showAllColumns,()=>{d.showPkAndFk=d.showAllColumns}),(h,m)=>{const p=Ss,b=ys,_=Tm,k=Lm,D=Um,w=Zm;return U(),oe("div",{class:Qe(["w-full bg-white border-1 border-gray-100 rounded-lg",{"z-100 h-screen w-screen fixed top-0 left-0 right-0 bottom-0":C(d).isFullScreen,"nc-erd-vue-flow-single-table":C(d).singleTableMode,"nc-erd-vue-flow":!C(d).singleTableMode}]),style:ze(C(d).isFullScreen?"":"height: inherit")},[ge("div",qm,[Ne(w,{tables:C(v),config:C(d)},{default:Pe(()=>[Ne(b,{modelValue:C(c),"onUpdate:modelValue":m[0]||(m[0]=V=>Yn(c)?c.value=V:null),inline:"",class:"bg-gray-300/50"},{default:Pe(()=>[ge("div",Wm,[Ne(p,{size:"large"})])]),_:1},8,["modelValue"]),Ne(_,{config:C(d),onToggleFullScreen:E},null,8,["config"]),Ne(k,{config:C(d)},null,8,["config"]),C(d).singleTableMode?Ee("",!0):(U(),Se(D,{key:0}))]),_:1},8,["tables","config"])])],6)}}});export{i0 as G,Po as M,io as O,W as P,ro as R,r0 as W,a0 as _,Bn as a,n0 as b,lt as c,o0 as d,ka as g,pt as i,Me as u};
