import{f as nt,ba as we,r as _,cG as h,$ as dt,aM as ut,N as ct,bb as N,bA as mt,g as pt,M as ft,gx as _t,H as xe,cg as vt,i as ht,eN as gt,c9 as bt,O as t,o as i,c as w,a as r,d as E,t as m,P as g,w as l,b as d,T as y,dy as yt,S as Z,eW as ee,W as Ce,cb as O,Q as $e,R as qe,bv as kt,au as P,U as wt,a0 as j,a1 as H,fk as Se,X as te,eZ as Fe,eX as pe,a8 as xt,p as Ct,e as $t,C as qt,Y as St}from"./entry.96205fa0.js";import{_ as Ft}from"./Button.vue.02ce6d5b.js";import{a as It,_ as Rt}from"./EditOrAddProvider.vue.8b187915.js";import{c as At,y as Tt,f as Et,M as Mt,A as Ot,b as Ut,R as Dt}from"./index.9b87fcff.js";import{u as Vt}from"./useSmartsheetRowStore.9c7d6fc1.js";import{u as Lt}from"./useViewColumns.8927231f.js";import{u as zt}from"./useViewData.a43f0e8e.js";import{D as Ie}from"./vuedraggable.umd.5a03c14e.js";import{C as Bt}from"./index.c4d36e30.js";import{D as Nt}from"./index.6c1d17b6.js";import"./index.1431a68b.js";import{I as Pt}from"./Input.3f1aaf0c.js";import{F as jt}from"./index.886d43e1.js";import{_ as Ht}from"./index.cd5853db.js";import{a as Wt,_ as Gt}from"./index.208c1883.js";import{_ as Kt}from"./TextArea.b81a19ed.js";import{_ as Jt}from"./FormItem.9f1f85f2.js";import{_ as Qt}from"./index.4a1cb0c9.js";import{_ as Xt}from"./index.c968c966.js";import{_ as Yt}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.9e8f59f4.js";import"./debounce.1d5af9bf.js";import"./toNumber.ed208f2f.js";import"./isSymbol.d46b4957.js";import"./Icon.vue.6d0583a0.js";import"./views.2c163cf7.js";import"./bases.965a49bb.js";import"./index.0c5b3837.js";import"./useSharedView.9e320acb.js";import"./validation.64563eeb.js";import"./v3-infinite-loading.e5e5dc2d.js";import"./cell.810c4fd3.js";import"./index.0b4c0f1e.js";import"./Checkbox.cf2cdba0.js";import"./FormItemContext.b19eb48c.js";import"./createForOfIteratorHelper.f2005dfe.js";import"./index.b5e393d6.js";import"./toArray.3561b70e.js";import"./antInputDirective.8ac36ea7.js";import"./isMobile.e2e89480.js";import"./useMemo.dbc63a5f.js";import"./useState.5a301439.js";import"./CheckOutlined.3b90c20d.js";import"./SearchOutlined.c9794270.js";import"./deepCompare.d32ec333.js";import"./dataUtils.fb0a3616.js";import"./virtualCell.9142cfee.js";import"./index.e034edbd.js";import"./useSmartsheetStore.7d51347e.js";import"./axios.9cbf0d09.js";import"./index.e1ceba77.js";import"./Dropdown.1dedd322.js";import"./useRefs.3fea1e39.js";import"./identity.309e9ead.js";import"./_flatRest.ce557a88.js";import"./isPlainObject.631eb8fb.js";import"./_getPrototype.459a70cf.js";import"./RightOutlined.3ce786f5.js";import"./Password.803cc3dc.js";import"./useSize.c98e621d.js";import"./Col.b3c5d725.js";import"./responsiveObserve.358bcfe9.js";const Zt=j(()=>H(()=>import("./VirtualCell.8c6452ad.js"),["./VirtualCell.8c6452ad.js","./entry.96205fa0.js","./entry.d09b2482.css","./Tooltip.vue.00c0d0fb.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.8b187915.js","./Icon.vue.6d0583a0.js","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./index.9b87fcff.js","./views.2c163cf7.js","./bases.965a49bb.js","./index.0c5b3837.js","./useSharedView.9e320acb.js","./validation.64563eeb.js","./index.886d43e1.js","./FormItem.9f1f85f2.js","./identity.309e9ead.js","./_getPrototype.459a70cf.js","./Col.b3c5d725.js","./responsiveObserve.358bcfe9.js","./toArray.3561b70e.js","./FormItemContext.b19eb48c.js","./useSize.c98e621d.js","./_flatRest.ce557a88.js","./isPlainObject.631eb8fb.js","./vuedraggable.umd.5a03c14e.js","./v3-infinite-loading.e5e5dc2d.js","./index.6c1d17b6.js","./Dropdown.1dedd322.js","./RightOutlined.3ce786f5.js","./index.1431a68b.js","./Input.3f1aaf0c.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c9794270.js","./TextArea.b81a19ed.js","./Password.803cc3dc.js","./cell.810c4fd3.js","./index.0b4c0f1e.js","./Checkbox.cf2cdba0.js","./createForOfIteratorHelper.f2005dfe.js","./index.b5e393d6.js","./isMobile.e2e89480.js","./useMemo.dbc63a5f.js","./useState.5a301439.js","./CheckOutlined.3b90c20d.js","./EditOrAddProvider.9247d0ff.css","./virtualCell.9142cfee.js","./VirtualCell.ff98befc.css"],import.meta.url).then(v=>v.default||v)),eo=j(()=>H(()=>import("./Cell.378562a9.js"),["./Cell.378562a9.js","./entry.96205fa0.js","./entry.d09b2482.css","./CellIcon.0a028b40.js","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./Tooltip.vue.00c0d0fb.js","./Tooltip.b86f91a1.css","./EditOrAddProvider.vue.8b187915.js","./Icon.vue.6d0583a0.js","./Button.vue.02ce6d5b.js","./index.9e8f59f4.js","./debounce.1d5af9bf.js","./toNumber.ed208f2f.js","./isSymbol.d46b4957.js","./_plugin-vue_export-helper.c27b6911.js","./Button.ff10bcb0.css","./views.2c163cf7.js","./useSharedView.9e320acb.js","./validation.64563eeb.js","./index.886d43e1.js","./FormItem.9f1f85f2.js","./identity.309e9ead.js","./_getPrototype.459a70cf.js","./Col.b3c5d725.js","./responsiveObserve.358bcfe9.js","./toArray.3561b70e.js","./FormItemContext.b19eb48c.js","./useSize.c98e621d.js","./_flatRest.ce557a88.js","./isPlainObject.631eb8fb.js","./vuedraggable.umd.5a03c14e.js","./v3-infinite-loading.e5e5dc2d.js","./index.6c1d17b6.js","./Dropdown.1dedd322.js","./RightOutlined.3ce786f5.js","./index.1431a68b.js","./Input.3f1aaf0c.js","./antInputDirective.8ac36ea7.js","./SearchOutlined.c9794270.js","./TextArea.b81a19ed.js","./Password.803cc3dc.js","./index.0b4c0f1e.js","./Checkbox.cf2cdba0.js","./createForOfIteratorHelper.f2005dfe.js","./index.b5e393d6.js","./isMobile.e2e89480.js","./useMemo.dbc63a5f.js","./useState.5a301439.js","./CheckOutlined.3b90c20d.js","./EditOrAddProvider.9247d0ff.css","./Cell.14116970.css"],import.meta.url).then(v=>v.default||v)),to=j(()=>H(()=>import("./VirtualCell.e690dced.js"),["./VirtualCell.e690dced.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./virtualCell.9142cfee.js","./cell.810c4fd3.js"],import.meta.url).then(v=>v.default||v)),oo=j(()=>H(()=>import("./Cell.a619fa9b.js"),["./Cell.a619fa9b.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./cell.810c4fd3.js","./bases.965a49bb.js","./index.0c5b3837.js","./useSmartsheetRowStore.9c7d6fc1.js","./deepCompare.d32ec333.js","./dataUtils.fb0a3616.js","./virtualCell.9142cfee.js","./index.e034edbd.js","./_plugin-vue_export-helper.c27b6911.js","./Cell.f27da8af.css"],import.meta.url).then(v=>v.default||v)),ao=j(()=>H(()=>import("./DivDataCell.7110991f.js"),["./DivDataCell.7110991f.js","./entry.96205fa0.js","./entry.d09b2482.css","./index.9b87fcff.js","./_plugin-vue_export-helper.c27b6911.js","./DivDataCell.1a716a1e.css"],import.meta.url).then(v=>v.default||v)),Re=v=>(Ct("data-v-63d6829e"),v=v(),$t(),v),so={key:0,class:"pl-6 pr-[120px] py-6 bg-white flex-col justify-start items-start gap-2.5 inline-flex"},ro={class:"text-gray-500 text-5xl font-semibold leading-16"},io=Re(()=>r("br",null,null,-1)),lo={class:"text-gray-500 text-base font-medium leading-normal"},no={key:0,class:"items-center justify-center text-center mt-2"},uo={class:"text-center"},co={key:0,class:"text-gray-400 mt-4"},mo={key:1,class:"text-center mt-4"},po={class:"flex flex-wrap gap-2"},fo={class:"flex-1 text-lg"},_o={class:"flex flex-wrap gap-2 mb-4"},vo={class:"flex"},ho={class:"flex flex-1"},go={class:"my-4 select-none border-dashed border-2 border-gray-400 py-3 text-gray-400 text-center nc-drag-n-drop-to-hide","data-testid":"nc-drag-n-drop-to-hide"},bo={class:"flex items-center flex-wrap justify-center gap-2 prose-sm text-gray-400"},yo={class:"color-transition group-hover:text-primary break-words"},ko=Re(()=>r("div",{class:"h-[200px] bg-primary bg-opacity-75"},null,-1)),wo={key:0,class:"px-4 lg:px-12"},xo={key:1,class:"px-4 ml-3 w-full text-bold text-4xl"},Co={key:2,class:"px-4 lg:px-12"},$o={key:3,class:"px-4 ml-3 w-full text-bold text-md"},qo=["onClick"],So={key:0,class:"absolute flex top-2 right-2"},Fo={key:1,class:"flex flex-col gap-3 mb-3"},Io={class:"flex gap-2 items-center"},Ro=["onClick"],Ao={class:"flex gap-2 items-center"},To=["onClick"],Eo={class:"nc-form-help-text text-gray-500 text-xs truncate","data-testid":"nc-form-input-help-text-label"},Mo={key:0,class:"mt-4 border-dashed border-2 border-gray-400 py-3 text-gray-400 text-center"},Oo={class:"justify-center flex mt-6"},Uo={key:1,class:"px-4 flex flex-col gap-2"},Do={class:"text-lg text-gray-700"},Vo={class:"text-gray-500 text-bold"},Lo={class:"flex flex-col gap-2 mt-4"},zo={class:"flex items-center"},Bo={class:"ml-4"},No={class:"flex items-center"},Po={class:"ml-4"},jo={class:"mb-12 flex items-center"},Ho={class:"ml-4"},Wo={class:"text-bold text-gray-600"},Go=nt({__name:"Form",setup(v){we(At,_(!0)),we(Tt,_(!1));const Ae=["created_at","updated_at"],fe=[h.Rollup,h.Lookup,h.Formula,h.QrCode,h.Barcode,h.SpecificDBType,h.CreatedTime,h.LastModifiedTime,h.CreatedBy,h.LastModifiedBy],{isMobileMode:Te,user:oe}=dt(),_e=_(),{$api:ve,$e:W}=qt(),{isUIAllowed:ae}=ut(),S=ct({}),se=_(0),k=N(Et,_(!1)),F=ae("viewFieldEdit"),U=N(Mt,_()),he=N(Ot,_()),Ee=N(Ut,_(!1)),{loadFormView:re,insertRow:Me,formColumnData:ie,formViewData:n,updateFormView:Oe}=zt(U,he),le=N(Dt,mt());le.on(async()=>{await re(),ue()});const{showAll:Ue,hideAll:De,saveOrUpdate:G}=Lt(),{state:Ve,row:Le}=Vt(U,_({row:S,oldRow:{},rowMeta:{new:!0}})),ne=pt(()=>{var e;return((e=U==null?void 0:U.value)==null?void 0:e.columns)||[]}),u=_([]),K=_([]),ge=_(),J=_([]),I=_(!1),de=_(!1),Q=_(!1),R=_(!1),D=_(!1),X=_(""),V=_([]),{t:be}=ft(),{betaFeatureToggleState:ze}=It(),C=Se(()=>{Oe(n.value)},300,{maxWait:2e3});async function Be(){var e;try{await((e=_e.value)==null?void 0:e.validateFields())}catch(a){if(a.errorFields.map(s=>te.error(s.errors.join(","))),a.errorFields.length)return}await Me({row:{...S,...Ve.value},oldRow:{},rowMeta:{new:!0}}),D.value=!0}function Ne(e){if(Ae.includes(e.fk_column_id))return!1;let a=!ee(e)&&e.rqd&&!e.cdf&&!ne.value.some(s=>{var b;return Fe(s.uidt)&&((b=s==null?void 0:s.colOptions)==null?void 0:b.type)===pe.BELONGS_TO&&e.fk_column_id===s.colOptions.fk_child_column_id})||e.pk&&!e.ai&&!e.cdf;if(e.uidt===h.LinkToAnotherRecord&&e.colOptions.type===pe.BELONGS_TO){const s=ne.value.find(b=>b.id===e.colOptions.fk_child_column_id);s.rqd&&!s.default&&(a=!0)}return a}function Pe(e){if(e.from!==e.to&&L(e.draggedContext.element))return!1}function je(e){var x,$,p;const{newIndex:a,element:s,oldIndex:b}=e.added||e.moved||e.removed;if(e.added&&(s.show=!0),e.removed){if(L(s))return;s.show=!1,G(s,b)}else!u.value.length||u.value.length===1?s.order=1:u.value.length-1===a?s.order=(((x=u.value[a-1])==null?void 0:x.order)||0)+1:a===0?s.order=((($=u.value[1])==null?void 0:$.order)||0)/2:s.order=((((p=u.value[a-1])==null?void 0:p.order)||0)+(u.value[a+1].order||0))/2,G(s,a);W("a:form-view:reorder")}function He(e){if(L(u.value[e])){te.info(be("msg.info.requriedFieldsCantBeMoved"));return}G({...u.value[e],show:!1},e),le.trigger(),W("a:form-view:hide-columns")}async function We(){for(const e of u==null?void 0:u.value)J.value.includes(e.fk_column_id)||(e.show=!0);await Ue(J.value),W("a:form-view:add-all")}function L(e){return Ne(e)||!!e.required||!!e.rqd&&!e.cdf||e.uidt===h.QrCode||e.uidt===h.Barcode}async function Ge(){for(const e of u==null?void 0:u.value)L(e)||(e.show=!1);await De(u==null?void 0:u.value.filter(e=>L(e)).map(e=>e.fk_column_id)),W("a:form-view:remove-all")}async function Ke(){return R.value&&!await ve.plugin.status("SMTP")?(R.value=!1,te.info(be("msg.toast.formEmailSMTP")),!1):!0}function ue(){var s,b,x,$;const e=(ie==null?void 0:ie.value)||[];n.value={...n.value,submit_another_form:!!(((s=n.value)==null?void 0:s.submit_another_form)??0),show_blank_form:!!(((b=n.value)==null?void 0:b.show_blank_form)??0)};let a={};try{a=JSON.parse(((x=n.value)==null?void 0:x.email)||"")||{}}catch{}R.value=a[($=oe.value)==null?void 0:$.email],u.value=e.filter(p=>p.show&&!fe.includes(p.uidt)).sort((p,Y)=>p.order-Y.order).map(p=>({...p,required:!!p.required})),V.value=new Array(u.value.length).fill(!1),J.value=_t(e).map(p=>p.fk_column_id),K.value=e.filter(p=>!p.show&&!J.value.includes(p.fk_column_id)&&!fe.includes(p.uidt))}function A(e,a=!1){let s=e;return Fe(s.uidt)&&s.colOptions&&s.colOptions.type===pe.BELONGS_TO&&(s=ne.value.find(b=>b.id===s.colOptions.fk_child_column_id)),a||s&&s.rqd&&!s.cdf}async function Je(){var e,a,s;try{if(!await Ke())return;const b=(e=n.value)!=null&&e.email?JSON.parse((a=n.value)==null?void 0:a.email):{};b[(s=oe.value)==null?void 0:s.email]=R.value,n.value.email=JSON.stringify(b)}catch{}}function Qe(){Je(),C()}async function Xe(){await re(),ue(),I.value=!1}const M=Se(async e=>{if(e.id)try{await ve.dbView.formColumnUpdate(e.id,e)}catch(a){te.error(await St(a))}},250);xe(D,e=>{var a;if(e&&((a=n.value)!=null&&a.show_blank_form)){se.value=5;const s=setInterval(()=>{--se.value<0&&(D.value=!1,clearInterval(s))},1e3)}});function Ye(e,a){if(!k.value&&!de.value){const s=u.value.length;e.order=(s?u.value[s-1].order:0)+1,e.show=!0,u.value.push(e),K.value.splice(a,1),G(e,s)}}const Ze=e=>ze.show&&[h.SingleLineText,h.Number,h.Email,h.URL,h.LongText].includes(e);vt(ge,()=>{X.value=""}),ht(async()=>{await re(),ue()}),xe(he,e=>{(e==null?void 0:e.type)===gt.FORM&&le.trigger()});const et=e=>{k.value||(X.value=e.title)};return(e,a)=>{const s=Ht,b=xt,x=Wt,$=Gt,p=Ft,Y=Zt,ye=eo,ce=Bt,tt=Rt,ot=Nt,me=Kt,T=Jt,z=Qt,ke=Pt,at=to,st=oo,rt=ao,it=jt,lt=Xt,B=bt("e");return t(Te)?(i(),w("div",so,[r("div",ro,[E(m(e.$t("general.available")),1),io,E(m(e.$t("title.inDesktop")),1)]),r("div",lo,m(e.$t("msg.formViewNotSupportedOnMobile")),1)])):(i(),w(wt,{key:1},[t(D)?(i(),g($,{key:0,class:"h-full","data-testid":"nc-form-wrapper-submit"},{default:l(()=>[d(x,{span:24},{default:l(()=>[t(n)?(i(),w("div",no,[d(s,{type:"success"},{message:l(()=>[r("div",uo,m(t(n).success_msg||e.$t("msg.successfullySubmittedFormData")),1)]),_:1}),t(n).show_blank_form?(i(),w("div",co,m(e.$t("msg.newFormWillBeLoaded",{seconds:t(se)})),1)):y("",!0),t(n).submit_another_form||!t(Ee)?(i(),w("div",mo,[d(b,{type:"primary",size:"large",onClick:a[0]||(a[0]=c=>D.value=!1)},{default:l(()=>[E(m(e.$t("activity.submitAnotherForm")),1)]),_:1})])):y("",!0)])):y("",!0)]),_:1})]),_:1})):(i(),g($,{key:1,class:"h-full flex","data-testid":"nc-form-wrapper"},{default:l(()=>[t(F)?(i(),g(x,{key:0,span:8,class:"shadow p-2 md:p-4 h-full overflow-auto scrollbar-thin-dull nc-form-left-drawer"},{default:l(()=>[r("div",po,[r("div",fo,m(e.$t("objects.fields")),1),r("div",_o,[t(K).length?(i(),g(p,{key:0,type:"secondary",class:"nc-form-add-all","data-testid":"nc-form-add-all",disabled:t(k),onClick:We},{default:l(()=>[E(m(e.$t("general.addAll")),1)]),_:1},8,["disabled"])):y("",!0),t(u).length?(i(),g(p,{key:1,type:"secondary",class:"nc-form-remove-all","data-testid":"nc-form-remove-all",disabled:t(k),onClick:Ge},{default:l(()=>[E(m(e.$t("general.removeAll")),1)]),_:1},8,["disabled"])):y("",!0)])]),d(t(Ie),{list:t(K),"item-key":"id",draggable:".item",group:"form-inputs",disabled:t(k),class:"flex flex-col gap-2",onStart:a[8]||(a[8]=c=>Q.value=!0),onEnd:a[9]||(a[9]=c=>Q.value=!1)},yt({item:l(({element:c,index:o})=>[d(ce,{size:"small",class:Z(["!border-0 color-transition cursor-pointer item hover:bg-primary hover:ring-1 hover:ring-accent hover:ring-opacity-100 bg-opacity-10 !rounded !shadow-lg",{"!bg-gray-50 !hover:bg-gray-50 !hover:ring-transparent !cursor-not-allowed":t(k)}]),"data-testid":`nc-form-hidden-column-${c.label||c.title}`,onMousedown:a[1]||(a[1]=q=>de.value=!1),onMousemove:a[2]||(a[2]=q=>de.value=!1),onMouseup:q=>Ye(c,o)},{default:l(()=>[r("div",vo,[r("div",ho,[t(ee)(c)?(i(),g(Y,{key:0,column:{...c,title:c.label||c.title},required:A(c,c.required),"hide-menu":!0},null,8,["column","required"])):(i(),g(ye,{key:1,column:{...c,title:c.label||c.title},required:A(c,c.required),"hide-menu":!0},null,8,["column","required"]))])])]),_:2},1032,["class","data-testid","onMouseup"])]),_:2},[t(k)?void 0:{name:"footer",fn:l(()=>[r("div",go,m(e.$t("msg.info.dragDropHide")),1),d(ot,{visible:t(I),"onUpdate:visible":a[7]||(a[7]=c=>Ce(I)?I.value=c:null),trigger:["click"],"overlay-class-name":"nc-dropdown-form-add-column"},{overlay:l(()=>[t(I)?(i(),g(tt,{key:0,onSubmit:Xe,onCancel:a[4]||(a[4]=c=>I.value=!1),onClick:a[5]||(a[5]=O(()=>{},["stop"])),onKeydown:a[6]||(a[6]=O(()=>{},["stop"]))})):y("",!0)]),default:l(()=>[r("button",{type:"button",class:"group w-full mt-2",onClick:a[3]||(a[3]=O(c=>I.value=!0,["stop"]))},[r("span",bo,[(i(),g($e(t(qe).plus),{class:"color-transition transform group-hover:text-accent group-hover:scale-125"})),r("span",yo,m(e.$t("activity.addField")),1)])])]),_:1},8,["visible"])]),key:"0"}]),1032,["list","disabled"])]),_:1})):y("",!0),t(n)?(i(),g(x,{key:1,span:t(F)?16:24,class:"h-full overflow-auto scrollbar-thin-dull"},{default:l(()=>[ko,d(ce,{class:"p-4 border-none","body-style":{maxWidth:"max(50vw, 700px)",margin:"0 auto",marginTop:"-200px",padding:"0px"}},{default:l(()=>{var c;return[d(it,{ref_key:"formRef",ref:_e,model:t(S),class:"nc-form","no-style":""},{default:l(()=>[d(ce,{class:"!rounded !shadow !m-2 !md:m-4 !xl:m-8","body-style":{paddingLeft:"0px",paddingRight:"0px"}},{default:l(()=>[t(F)?(i(),w("div",wo,[t(F)?(i(),g(T,{key:0},{default:l(()=>[d(me,{value:t(n).heading,"onUpdate:value":a[10]||(a[10]=o=>t(n).heading=o),class:"w-full !font-bold !text-4xl !border-0 !border-b-1 !border-dashed !rounded-none !border-gray-400",style:{borderRightWidth:"0px !important",height:"70px","max-height":"250px",resize:"vertical"},autosize:"",size:"large","hide-details":"",disabled:t(k),placeholder:"Form Title",bordered:!1,"data-testid":"nc-form-heading",onBlur:t(C),onKeydown:kt(t(C),["enter"])},null,8,["value","disabled","onBlur","onKeydown"])]),_:1})):y("",!0)])):(i(),w("div",xo,m(t(n).heading),1)),t(F)?(i(),w("div",Co,[d(T,null,{default:l(()=>[d(me,{value:t(n).subheading,"onUpdate:value":a[11]||(a[11]=o=>t(n).subheading=o),class:"w-full !border-0 !border-b-1 !border-dashed !rounded-none !border-gray-400",style:{borderRightWidth:"0px !important",height:"40px","min-height":"40px",resize:"vertical"},size:"large",autosize:"","hide-details":"",placeholder:e.$t("msg.info.formDesc"),bordered:!1,disabled:!t(F)||t(k),"data-testid":"nc-form-sub-heading",onBlur:t(C),onClick:t(C)},null,8,["value","placeholder","disabled","onBlur","onClick"])]),_:1})])):(i(),w("div",$o,m(t(n).subheading||"---"),1)),d(t(Ie),{ref_key:"draggableRef",ref:ge,list:t(u),"item-key":"fk_column_id",draggable:".item",group:"form-inputs",class:"h-full",move:Pe,disabled:t(k),onChange:a[14]||(a[14]=o=>je(o)),onStart:a[15]||(a[15]=o=>Q.value=!0),onEnd:a[16]||(a[16]=o=>Q.value=!1)},{item:l(({element:o,index:q})=>[r("div",{class:Z(["color-transition nc-editable item cursor-pointer hover:bg-primary hover:bg-opacity-10 hover:ring-1 hover:ring-accent hover:ring-opacity-100 px-4 lg:px-12 py-4 relative",[`nc-form-drag-${o.title.replaceAll(" ","")}`,{"bg-primary bg-opacity-5 ring-0.5 ring-accent ring-opacity-100":t(X)===o.title},{"!hover:bg-white !ring-0 !cursor-auto":t(k)}]]),"data-testid":"nc-form-fields",onClick:f=>et(o)},[t(ae)("viewFieldEdit")&&!A(o,o.required)&&!t(k)?(i(),w("div",So,[(i(),g($e(t(qe).eyeSlash),{class:"opacity-0 nc-field-remove-icon","data-testid":"nc-field-remove-icon",onClick:O(f=>He(q),["stop"])},null,8,["onClick"]))])):y("",!0),t(X)===o.title?(i(),w("div",Fo,[r("div",Io,[r("span",{class:"text-gray-500 mr-2 nc-form-input-required","data-testid":"nc-form-input-required",onClick:()=>{o.required=!o.required,t(M)(o)}},m(e.$t("general.required")),9,Ro),P(d(z,{checked:o.required,"onUpdate:checked":f=>o.required=f,size:"small",onChange:f=>t(M)(o)},null,8,["checked","onUpdate:checked","onChange"]),[[B,["a:form-view:field:mark-required"]]])]),Ze(o.uidt)?(i(),g(T,{key:0,class:"my-0 w-1/2 !mb-1"},{default:l(()=>[r("div",Ao,[r("span",{class:"text-gray-500 mr-2 nc-form-input-required","data-testid":"nc-form-input-enable-scanner",onClick:()=>{o.general.enable_scanner=!o.general.enable_scanner,t(M)(o)}},m(e.$t("general.enableScanner")),9,To),P(d(z,{checked:o.enable_scanner,"onUpdate:checked":f=>o.enable_scanner=f,size:"small",onChange:f=>t(M)(o)},null,8,["checked","onUpdate:checked","onChange"]),[[B,["a:form-view:field:mark-enable-scaner"]]])])]),_:2},1024)):y("",!0),d(T,{class:"my-0 w-1/2 !mb-1"},{default:l(()=>[d(ke,{value:o.label,"onUpdate:value":f=>o.label=f,type:"text",class:"form-meta-input nc-form-input-label","data-testid":"nc-form-input-label",placeholder:e.$t("msg.info.formInput"),onChange:f=>t(M)(o)},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1024),d(T,{class:"mt-2 mb-0 w-1/2"},{default:l(()=>[d(ke,{value:o.description,"onUpdate:value":f=>o.description=f,type:"text",class:"form-meta-input text-sm nc-form-input-help-text","data-testid":"nc-form-input-help-text",placeholder:e.$t("msg.info.formHelpText"),onChange:f=>t(M)(o)},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1024)])):y("",!0),r("div",null,[t(ee)(o)?(i(),g(Y,{key:0,column:{...o,title:o.label||o.title},required:A(o,o.required),"hide-menu":!0,"data-testid":"nc-form-input-label"},null,8,["column","required"])):(i(),g(ye,{key:1,column:{...o,title:o.label||o.title},required:A(o,o.required),"hide-menu":!0,"data-testid":"nc-form-input-label"},null,8,["column","required"]))]),t(ee)(o)?(i(),g(T,{key:2,name:o.title,class:"!mb-0 nc-input-required-error nc-form-input-item",rules:[{required:A(o,o.required),message:`${o.label||o.title} is required`}]},{default:l(()=>[d(at,{modelValue:t(S)[o.title],"onUpdate:modelValue":f=>t(S)[o.title]=f,row:t(Le),class:Z(["nc-input",`nc-form-input-${o.title.replaceAll(" ","")}`]),"data-testid":`nc-form-input-${o.title.replaceAll(" ","")}`,column:o,onClick:a[12]||(a[12]=O(()=>{},["stop","prevent"]))},null,8,["modelValue","onUpdate:modelValue","row","class","data-testid","column"])]),_:2},1032,["name","rules"])):(i(),g(T,{key:3,name:o.title,class:"!mb-0 nc-input-required-error nc-form-input-item",rules:[{required:A(o,o.required),message:`${o.label||o.title} is required`}]},{default:l(()=>[d(rt,{class:"relative"},{default:l(()=>[d(st,{modelValue:t(S)[o.title],"onUpdate:modelValue":f=>t(S)[o.title]=f,class:Z(["nc-input truncate",`nc-form-input-${o.title.replaceAll(" ","")}`]),"data-testid":`nc-form-input-${o.title.replaceAll(" ","")}`,column:o,"edit-enabled":t(V)[q],onClick:[f=>t(V)[q]=!0,a[13]||(a[13]=O(()=>{},["stop","prevent"]))],onCancel:f=>t(V)[q]=!1,"onUpdate:editEnabled":f=>t(V)[q]=f},null,8,["modelValue","onUpdate:modelValue","class","data-testid","column","edit-enabled","onClick","onCancel","onUpdate:editEnabled"])]),_:2},1024)]),_:2},1032,["name","rules"])),r("div",Eo,m(o.description),1)],10,qo)]),footer:l(()=>[t(u).length?y("",!0):(i(),w("div",Mo,m(e.$t("activity.dragAndDropFieldsHereToAdd")),1))]),_:1},8,["list","disabled"]),r("div",Oo,[d(p,{"html-type":"submit",type:"primary",disabled:!t(ae)("dataInsert"),class:"nc-form-submit","data-testid":"nc-form-submit",onClick:Be},{default:l(()=>[E(m(e.$t("general.submit")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model"]),t(k)?y("",!0):(i(),g(lt,{key:0})),t(F)&&!t(k)?(i(),w("div",Uo,[r("div",Do,m(e.$t("msg.info.afterFormSubmitted")),1),r("div",Vo,m(e.$t("msg.info.showMessage"))+":",1),d(me,{value:t(n).success_msg,"onUpdate:value":a[17]||(a[17]=o=>t(n).success_msg=o),rows:3,"hide-details":"",class:"nc-form-after-submit-msg","data-testid":"nc-form-after-submit-msg",onChange:t(C)},null,8,["value","onChange"]),r("div",Lo,[r("div",zo,[P(d(z,{checked:t(n).submit_another_form,"onUpdate:checked":a[18]||(a[18]=o=>t(n).submit_another_form=o),size:"small",class:"nc-form-checkbox-submit-another-form","data-testid":"nc-form-checkbox-submit-another-form",onChange:t(C)},null,8,["checked","onChange"]),[[B,["a:form-view:submit-another-form"]]]),r("span",Bo,m(e.$t("msg.info.submitAnotherForm")),1)]),r("div",No,[P(d(z,{checked:t(n).show_blank_form,"onUpdate:checked":a[19]||(a[19]=o=>t(n).show_blank_form=o),size:"small",class:"nc-form-checkbox-show-blank-form","data-testid":"nc-form-checkbox-show-blank-form",onChange:t(C)},null,8,["checked","onChange"]),[[B,["a:form-view:show-blank-form"]]]),r("span",Po,m(e.$t("msg.info.showBlankForm")),1)]),r("div",jo,[P(d(z,{checked:t(R),"onUpdate:checked":a[20]||(a[20]=o=>Ce(R)?R.value=o:null),size:"small",class:"nc-form-checkbox-send-email","data-testid":"nc-form-checkbox-send-email",onChange:Qe},null,8,["checked"]),[[B,["a:form-view:email-me"]]]),r("span",Ho,[E(m(e.$t("msg.info.emailForm"))+" ",1),r("span",Wo,m((c=t(oe))==null?void 0:c.email),1)])])])])):y("",!0)]}),_:1},8,["body-style"])]),_:1},8,["span"])):y("",!0)]),_:1}))],64))}}});const os=Yt(Go,[["__scopeId","data-v-63d6829e"]]);export{os as default};
