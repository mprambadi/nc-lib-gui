import{_ as H}from"./Icon.vue.6d0583a0.js";import{_ as L}from"./Icon.vue.dcf4a73e.js";import{_ as M}from"./Tooltip.vue.00c0d0fb.js";import{f as Q,bb as k,r as u,$ as R,cg as A,g as S,cZ as E,cG as P,H as $,g$ as W,c9 as Z,o as n,c as y,a as h,b as p,O as t,t as x,T as C,P as d,Q as V,R as I,au as B,w as f,U as J,V as K,d as F,S as N}from"./entry.96205fa0.js";import{R as X,A as Y}from"./index.9b87fcff.js";import{a as ee,b as te}from"./useSmartsheetStore.7d51347e.js";import"./index.1431a68b.js";import{I as ae}from"./Input.3f1aaf0c.js";import{S as oe,_ as re}from"./index.b5e393d6.js";import{_ as se}from"./_plugin-vue_export-helper.c27b6911.js";import"./VirtualCellIcon.79739fcf.js";import"./virtualCell.9142cfee.js";import"./CellIcon.0a028b40.js";import"./cell.810c4fd3.js";import"./bases.965a49bb.js";import"./index.0c5b3837.js";import"./views.2c163cf7.js";import"./useSharedView.9e320acb.js";import"./index.e034edbd.js";import"./SearchOutlined.c9794270.js";import"./isPlainObject.631eb8fb.js";import"./_getPrototype.459a70cf.js";import"./TextArea.b81a19ed.js";import"./antInputDirective.8ac36ea7.js";import"./FormItemContext.b19eb48c.js";import"./Password.803cc3dc.js";import"./toArray.3561b70e.js";import"./isMobile.e2e89480.js";import"./useMemo.dbc63a5f.js";import"./useState.5a301439.js";import"./CheckOutlined.3b90c20d.js";const le={key:0,class:"w-16 text-[0.75rem] font-medium text-gray-400 truncate"},ne={class:"xs:text-gray-600 group-hover:text-gray-700 sm:text-gray-400"},ie={class:"text-sm flex items-center gap-2"},ce=Q({__name:"SearchData",setup(me){const O=k(X),{meta:T}=ee(),g=k(Y,u()),{search:s,loadFieldQuery:q}=te(),c=u(!1),{isMobileMode:z}=R(),v=u(!1),w=u(null);A(w,()=>c.value=!1);const i=S(()=>{var a,e,l;return(l=(e=(a=T.value)==null?void 0:a.columns)==null?void 0:e.filter(o=>!E(o)&&(o==null?void 0:o.uidt)!==P.Links))==null?void 0:l.map(o=>({value:o.id,label:o.title,column:o,primaryValue:o.pv}))});$(()=>{var a;return(a=g.value)==null?void 0:a.id},(a,e)=>{var l;a!==e&&q((l=g.value)==null?void 0:l.id)},{immediate:!0});function _(){O.trigger()}const b=S(()=>{var a,e,l,o;return s.value.field?(e=(a=i.value)==null?void 0:a.find(m=>m.value===s.value.field))==null?void 0:e.label:(o=(l=i.value)==null?void 0:l.find(m=>m.primaryValue))==null?void 0:o.label});return W(()=>s.value.query,()=>{_()},{debounce:500,maxWait:600}),$(i,()=>{var a;(a=i.value)!=null&&a.length&&(s.value.field=i.value[0].value)}),(a,e)=>{const l=H,o=L,m=M,U=oe,j=re,G=ae,D=Z("e");return n(),y("div",{class:N(["flex flex-row border-1 rounded-lg h-8 xs:h-10 xs:ml-0 ml-1 border-gray-200 overflow-hidden",{"border-primary":t(s).query.length!==0||t(v)}])},[h("div",{ref_key:"searchDropdown",ref:w,class:N(["flex items-center group relative px-2 cursor-pointer border-r-1 border-gray-200 hover:bg-gray-100",{"bg-gray-50 ":t(c)}]),onClick:e[1]||(e[1]=r=>c.value=!t(c))},[p(l,{icon:"search",class:"ml-1 mr-2 h-3.5 w-3.5 text-gray-500 group-hover:text-black"}),t(z)?C("",!0):(n(),y("div",le,x(t(b)),1)),h("div",ne,[(n(),d(V(t(I).arrowDown),{class:"text-sm text-inherit"}))]),B((n(),d(j,{value:t(s).field,"onUpdate:value":e[0]||(e[0]=r=>t(s).field=r),open:t(c),size:"small","dropdown-match-select-width":!1,"dropdown-class-name":"!rounded-lg nc-dropdown-toolbar-search-field-option max-w-64",class:"py-1 !absolute top-2 left-0 w-full h-full z-10 text-xs opacity-0",onChange:_},{default:f(()=>[(n(!0),y(J,null,K(t(i),r=>B((n(),d(U,{key:r.value,value:r.value},{default:f(()=>[h("div",ie,[p(o,{column:r.column},null,8,["column"]),p(m,{class:"truncate flex-1",placement:"top","show-on-truncate-only":""},{title:f(()=>[F(x(r.label),1)]),default:f(()=>[F(" "+x(r.label),1)]),_:2},1024),t(s).field===r.value?(n(),d(V(t(I).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):C("",!0)])]),_:2},1032,["value"])),[[D,["c:search:field:select"]]])),128))]),_:1},8,["value","open"])),[[D,["c:search:field:select:open"]]])],2),p(G,{value:t(s).query,"onUpdate:value":e[2]||(e[2]=r=>t(s).query=r),size:"small",class:"text-xs w-40",placeholder:`${a.$t("general.searchIn")} ${t(b)}`,bordered:!1,"data-testid":"search-data-input",onPressEnter:_,onFocus:e[3]||(e[3]=r=>v.value=!0),onBlur:e[4]||(e[4]=r=>v.value=!1)},null,8,["value","placeholder"])],2)}}});const Me=se(ce,[["__scopeId","data-v-532f4c32"]]);export{Me as default};
